travis_fold:start:worker_infoWorker information
hostname: i-08f95e0-production-2-worker-org-ec2.travisci.net:ec1ce9d7-2d82-46f5-993e-59bb4ca08e1a
version: v2.8.2 https://github.com/travis-ci/worker/tree/8af6d454c3a7790f73c7af98ed33b0b33292478f
instance: 822cf28:travis:ruby
startup: 958.337104ms
travis_fold:end:worker_infotravis_fold:start:system_infoBuild system information
Build language: ruby
Build group: stable
Build dist: trusty
Build id: 240266470
Job id: 240266476
travis-build version: 4183c5148
Build image provisioning date and time
Thu Nov 10 03:26:46 UTC 2016
Operating System Details
Distributor ID:	Ubuntu
Description:	Ubuntu 14.04.5 LTS
Release:	14.04
Codename:	trusty
Linux Version
4.4.0-45-generic
Cookbooks Version
58fad1f https://github.com/travis-ci/travis-cookbooks/tree/58fad1f
git version
git version 1.9.1
bash version
GNU bash, version 4.3.11(1)-release (x86_64-pc-linux-gnu)
Copyright (C) 2013 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>

This is free software; you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.
gcc version
gcc (Ubuntu 4.8.4-2ubuntu1~14.04.3) 4.8.4
Copyright (C) 2013 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

docker version
Client:
 Version:      1.12.3
 API version:  1.24
 Go version:   go1.6.3
 Git commit:   6b644ec
 Built:        Wed Oct 26 23:26:11 2016
 OS/Arch:      linux/amd64
clang version
clang version 3.5.0 (tags/RELEASE_350/final)
Target: x86_64-unknown-linux-gnu
Thread model: posix
jq version
jq-1.5
bats version
Bats 0.4.0
gimme version
v1.0.0
nvm version
0.32.0
perlbrew version
/home/travis/perl5/perlbrew/bin/perlbrew  - App::perlbrew/0.76
postgresql client version
psql (PostgreSQL) 9.6.1
phpenv version
rbenv 1.0.0-33-gc7dcaf1
rvm version
rvm 1.27.0 (latest) by Wayne E. Seguin <wayneeseguin@gmail.com>, Michal Papis <mpapis@gmail.com> [https://rvm.io/]
default ruby version
ruby 2.3.1p112 (2016-04-26 revision 54768) [x86_64-linux]
Pre-installed Ruby versions
ruby-2.2.5
ruby-2.3.1
travis_fold:end:system_info
Removing symlink /usr/lib/jvm/java-8-oracle-amd64
$ sudo rm -f /usr/lib/jvm/java-8-oracle-amd64
Reload jdk_switcher
$ source $HOME/.jdk_switcher_rc
travis_fold:start:git.checkouttravis_time:start:11a04c62$ git clone --depth=50 https://github.com/chef/chef.git chef/chef
Cloning into 'chef/chef'...
remote: Counting objects: 12193, done.[K
remote: Compressing objects:   0% (1/6956)   [Kremote: Compressing objects:   1% (70/6956)   [Kremote: Compressing objects:   2% (140/6956)   [Kremote: Compressing objects:   3% (209/6956)   [Kremote: Compressing objects:   4% (279/6956)   [Kremote: Compressing objects:   5% (348/6956)   [Kremote: Compressing objects:   6% (418/6956)   [Kremote: Compressing objects:   7% (487/6956)   [Kremote: Compressing objects:   8% (557/6956)   [Kremote: Compressing objects:   9% (627/6956)   [Kremote: Compressing objects:  10% (696/6956)   [Kremote: Compressing objects:  11% (766/6956)   [Kremote: Compressing objects:  12% (835/6956)   [Kremote: Compressing objects:  13% (905/6956)   [Kremote: Compressing objects:  14% (974/6956)   [Kremote: Compressing objects:  15% (1044/6956)   [Kremote: Compressing objects:  16% (1113/6956)   [Kremote: Compressing objects:  17% (1183/6956)   [Kremote: Compressing objects:  18% (1253/6956)   [Kremote: Compressing objects:  19% (1322/6956)   [Kremote: Compressing objects:  20% (1392/6956)   [Kremote: Compressing objects:  21% (1461/6956)   [Kremote: Compressing objects:  22% (1531/6956)   [Kremote: Compressing objects:  23% (1600/6956)   [Kremote: Compressing objects:  24% (1670/6956)   [Kremote: Compressing objects:  25% (1739/6956)   [Kremote: Compressing objects:  26% (1809/6956)   [Kremote: Compressing objects:  27% (1879/6956)   [Kremote: Compressing objects:  28% (1948/6956)   [Kremote: Compressing objects:  29% (2018/6956)   [Kremote: Compressing objects:  30% (2087/6956)   [Kremote: Compressing objects:  31% (2157/6956)   [Kremote: Compressing objects:  32% (2226/6956)   [Kremote: Compressing objects:  33% (2296/6956)   [Kremote: Compressing objects:  34% (2366/6956)   [Kremote: Compressing objects:  35% (2435/6956)   [Kremote: Compressing objects:  36% (2505/6956)   [Kremote: Compressing objects:  37% (2574/6956)   [Kremote: Compressing objects:  38% (2644/6956)   [Kremote: Compressing objects:  39% (2713/6956)   [Kremote: Compressing objects:  40% (2783/6956)   [Kremote: Compressing objects:  41% (2852/6956)   [Kremote: Compressing objects:  42% (2922/6956)   [Kremote: Compressing objects:  43% (2992/6956)   [Kremote: Compressing objects:  44% (3061/6956)   [Kremote: Compressing objects:  45% (3131/6956)   [Kremote: Compressing objects:  46% (3200/6956)   [Kremote: Compressing objects:  47% (3270/6956)   [Kremote: Compressing objects:  48% (3339/6956)   [Kremote: Compressing objects:  49% (3409/6956)   [Kremote: Compressing objects:  50% (3478/6956)   [Kremote: Compressing objects:  51% (3548/6956)   [Kremote: Compressing objects:  52% (3618/6956)   [Kremote: Compressing objects:  53% (3687/6956)   [Kremote: Compressing objects:  54% (3757/6956)   [Kremote: Compressing objects:  55% (3826/6956)   [Kremote: Compressing objects:  56% (3896/6956)   [Kremote: Compressing objects:  57% (3965/6956)   [Kremote: Compressing objects:  58% (4035/6956)   [Kremote: Compressing objects:  59% (4105/6956)   [Kremote: Compressing objects:  60% (4174/6956)   [Kremote: Compressing objects:  61% (4244/6956)   [Kremote: Compressing objects:  62% (4313/6956)   [Kremote: Compressing objects:  63% (4383/6956)   [Kremote: Compressing objects:  64% (4452/6956)   [Kremote: Compressing objects:  65% (4522/6956)   [Kremote: Compressing objects:  66% (4591/6956)   [Kremote: Compressing objects:  67% (4661/6956)   [Kremote: Compressing objects:  68% (4731/6956)   [Kremote: Compressing objects:  69% (4800/6956)   [Kremote: Compressing objects:  70% (4870/6956)   [Kremote: Compressing objects:  71% (4939/6956)   [Kremote: Compressing objects:  72% (5009/6956)   [Kremote: Compressing objects:  73% (5078/6956)   [Kremote: Compressing objects:  74% (5148/6956)   [Kremote: Compressing objects:  75% (5217/6956)   [Kremote: Compressing objects:  76% (5287/6956)   [Kremote: Compressing objects:  77% (5357/6956)   [Kremote: Compressing objects:  78% (5426/6956)   [Kremote: Compressing objects:  79% (5496/6956)   [Kremote: Compressing objects:  80% (5565/6956)   [Kremote: Compressing objects:  81% (5635/6956)   [Kremote: Compressing objects:  82% (5704/6956)   [Kremote: Compressing objects:  83% (5774/6956)   [Kremote: Compressing objects:  84% (5844/6956)   [Kremote: Compressing objects:  85% (5913/6956)   [Kremote: Compressing objects:  86% (5983/6956)   [Kremote: Compressing objects:  87% (6052/6956)   [Kremote: Compressing objects:  88% (6122/6956)   [Kremote: Compressing objects:  89% (6191/6956)   [Kremote: Compressing objects:  90% (6261/6956)   [Kremote: Compressing objects:  91% (6330/6956)   [Kremote: Compressing objects:  92% (6400/6956)   [Kremote: Compressing objects:  93% (6470/6956)   [Kremote: Compressing objects:  94% (6539/6956)   [Kremote: Compressing objects:  95% (6609/6956)   [Kremote: Compressing objects:  96% (6678/6956)   [Kremote: Compressing objects:  97% (6748/6956)   [Kremote: Compressing objects:  98% (6817/6956)   [Kremote: Compressing objects:  99% (6887/6956)   [Kremote: Compressing objects: 100% (6956/6956)   [Kremote: Compressing objects: 100% (6956/6956), done.[K
Receiving objects:   0% (1/12193)   Receiving objects:   1% (122/12193)   Receiving objects:   2% (244/12193)   Receiving objects:   3% (366/12193)   Receiving objects:   4% (488/12193)   Receiving objects:   5% (610/12193)   Receiving objects:   6% (732/12193)   Receiving objects:   7% (854/12193)   Receiving objects:   8% (976/12193)   Receiving objects:   9% (1098/12193)   Receiving objects:  10% (1220/12193)   Receiving objects:  11% (1342/12193)   Receiving objects:  12% (1464/12193)   Receiving objects:  13% (1586/12193)   Receiving objects:  14% (1708/12193)   Receiving objects:  15% (1829/12193)   Receiving objects:  16% (1951/12193)   Receiving objects:  17% (2073/12193)   Receiving objects:  18% (2195/12193)   Receiving objects:  19% (2317/12193)   Receiving objects:  20% (2439/12193)   Receiving objects:  21% (2561/12193)   Receiving objects:  22% (2683/12193)   Receiving objects:  23% (2805/12193)   Receiving objects:  24% (2927/12193)   Receiving objects:  25% (3049/12193)   Receiving objects:  26% (3171/12193)   Receiving objects:  27% (3293/12193)   Receiving objects:  28% (3415/12193)   Receiving objects:  29% (3536/12193)   Receiving objects:  30% (3658/12193)   Receiving objects:  31% (3780/12193)   Receiving objects:  32% (3902/12193)   Receiving objects:  33% (4024/12193)   Receiving objects:  34% (4146/12193)   Receiving objects:  35% (4268/12193)   Receiving objects:  36% (4390/12193)   Receiving objects:  37% (4512/12193)   Receiving objects:  38% (4634/12193)   Receiving objects:  39% (4756/12193)   Receiving objects:  40% (4878/12193)   Receiving objects:  41% (5000/12193)   Receiving objects:  42% (5122/12193)   Receiving objects:  43% (5243/12193)   Receiving objects:  44% (5365/12193)   Receiving objects:  45% (5487/12193)   Receiving objects:  46% (5609/12193)   Receiving objects:  47% (5731/12193)   Receiving objects:  48% (5853/12193)   Receiving objects:  49% (5975/12193)   Receiving objects:  50% (6097/12193)   Receiving objects:  51% (6219/12193)   Receiving objects:  52% (6341/12193)   Receiving objects:  53% (6463/12193)   Receiving objects:  54% (6585/12193)   Receiving objects:  55% (6707/12193)   Receiving objects:  56% (6829/12193)   Receiving objects:  57% (6951/12193)   Receiving objects:  58% (7072/12193)   Receiving objects:  59% (7194/12193)   Receiving objects:  60% (7316/12193)   Receiving objects:  61% (7438/12193)   Receiving objects:  62% (7560/12193)   Receiving objects:  63% (7682/12193)   Receiving objects:  64% (7804/12193)   Receiving objects:  65% (7926/12193)   Receiving objects:  66% (8048/12193)   Receiving objects:  67% (8170/12193)   Receiving objects:  68% (8292/12193)   Receiving objects:  69% (8414/12193)   Receiving objects:  70% (8536/12193)   Receiving objects:  71% (8658/12193)   Receiving objects:  72% (8779/12193)   Receiving objects:  73% (8901/12193)   Receiving objects:  74% (9023/12193)   Receiving objects:  75% (9145/12193)   Receiving objects:  76% (9267/12193)   Receiving objects:  77% (9389/12193)   Receiving objects:  78% (9511/12193)   Receiving objects:  79% (9633/12193), 3.95 MiB | 7.88 MiB/s   Receiving objects:  80% (9755/12193), 3.95 MiB | 7.88 MiB/s   Receiving objects:  81% (9877/12193), 3.95 MiB | 7.88 MiB/s   Receiving objects:  82% (9999/12193), 3.95 MiB | 7.88 MiB/s   Receiving objects:  83% (10121/12193), 3.95 MiB | 7.88 MiB/s   Receiving objects:  84% (10243/12193), 3.95 MiB | 7.88 MiB/s   Receiving objects:  85% (10365/12193), 3.95 MiB | 7.88 MiB/s   Receiving objects:  86% (10486/12193), 3.95 MiB | 7.88 MiB/s   Receiving objects:  87% (10608/12193), 3.95 MiB | 7.88 MiB/s   Receiving objects:  88% (10730/12193), 3.95 MiB | 7.88 MiB/s   Receiving objects:  89% (10852/12193), 3.95 MiB | 7.88 MiB/s   Receiving objects:  90% (10974/12193), 3.95 MiB | 7.88 MiB/s   Receiving objects:  91% (11096/12193), 3.95 MiB | 7.88 MiB/s   Receiving objects:  92% (11218/12193), 3.95 MiB | 7.88 MiB/s   Receiving objects:  93% (11340/12193), 3.95 MiB | 7.88 MiB/s   Receiving objects:  94% (11462/12193), 3.95 MiB | 7.88 MiB/s   Receiving objects:  95% (11584/12193), 3.95 MiB | 7.88 MiB/s   Receiving objects:  96% (11706/12193), 3.95 MiB | 7.88 MiB/s   Receiving objects:  97% (11828/12193), 3.95 MiB | 7.88 MiB/s   Receiving objects:  98% (11950/12193), 3.95 MiB | 7.88 MiB/s   Receiving objects:  99% (12072/12193), 3.95 MiB | 7.88 MiB/s   remote: Total 12193 (delta 7339), reused 8068 (delta 4598), pack-reused 0[K
Receiving objects: 100% (12193/12193), 3.95 MiB | 7.88 MiB/s   Receiving objects: 100% (12193/12193), 5.43 MiB | 7.88 MiB/s, done.
Resolving deltas:   0% (0/7339)   Resolving deltas:   1% (104/7339)   Resolving deltas:   2% (185/7339)   Resolving deltas:   3% (225/7339)   Resolving deltas:   4% (302/7339)   Resolving deltas:   5% (404/7339)   Resolving deltas:   7% (520/7339)   Resolving deltas:   9% (720/7339)   Resolving deltas:  10% (735/7339)   Resolving deltas:  14% (1095/7339)   Resolving deltas:  15% (1104/7339)   Resolving deltas:  16% (1184/7339)   Resolving deltas:  17% (1251/7339)   Resolving deltas:  18% (1340/7339)   Resolving deltas:  19% (1412/7339)   Resolving deltas:  20% (1469/7339)   Resolving deltas:  21% (1588/7339)   Resolving deltas:  22% (1615/7339)   Resolving deltas:  23% (1697/7339)   Resolving deltas:  24% (1810/7339)   Resolving deltas:  26% (1925/7339)   Resolving deltas:  27% (2003/7339)   Resolving deltas:  29% (2149/7339)   Resolving deltas:  30% (2203/7339)   Resolving deltas:  31% (2291/7339)   Resolving deltas:  32% (2353/7339)   Resolving deltas:  33% (2447/7339)   Resolving deltas:  34% (2508/7339)   Resolving deltas:  35% (2569/7339)   Resolving deltas:  36% (2643/7339)   Resolving deltas:  37% (2716/7339)   Resolving deltas:  38% (2833/7339)   Resolving deltas:  39% (2866/7339)   Resolving deltas:  41% (3016/7339)   Resolving deltas:  42% (3135/7339)   Resolving deltas:  44% (3292/7339)   Resolving deltas:  45% (3316/7339)   Resolving deltas:  46% (3377/7339)   Resolving deltas:  47% (3512/7339)   Resolving deltas:  50% (3706/7339)   Resolving deltas:  51% (3746/7339)   Resolving deltas:  52% (3858/7339)   Resolving deltas:  53% (3891/7339)   Resolving deltas:  54% (3971/7339)   Resolving deltas:  55% (4043/7339)   Resolving deltas:  56% (4114/7339)   Resolving deltas:  57% (4192/7339)   Resolving deltas:  58% (4259/7339)   Resolving deltas:  59% (4332/7339)   Resolving deltas:  60% (4408/7339)   Resolving deltas:  61% (4477/7339)   Resolving deltas:  62% (4566/7339)   Resolving deltas:  63% (4625/7339)   Resolving deltas:  64% (4700/7339)   Resolving deltas:  65% (4771/7339)   Resolving deltas:  66% (4844/7339)   Resolving deltas:  67% (4921/7339)   Resolving deltas:  68% (5005/7339)   Resolving deltas:  69% (5074/7339)   Resolving deltas:  70% (5139/7339)   Resolving deltas:  71% (5211/7339)   Resolving deltas:  72% (5288/7339)   Resolving deltas:  73% (5360/7339)   Resolving deltas:  74% (5435/7339)   Resolving deltas:  75% (5505/7339)   Resolving deltas:  76% (5606/7339)   Resolving deltas:  77% (5653/7339)   Resolving deltas:  78% (5725/7339)   Resolving deltas:  79% (5799/7339)   Resolving deltas:  80% (5877/7339)   Resolving deltas:  81% (5945/7339)   Resolving deltas:  82% (6019/7339)   Resolving deltas:  83% (6101/7339)   Resolving deltas:  84% (6166/7339)   Resolving deltas:  85% (6241/7339)   Resolving deltas:  86% (6313/7339)   Resolving deltas:  87% (6385/7339)   Resolving deltas:  88% (6462/7339)   Resolving deltas:  89% (6532/7339)   Resolving deltas:  90% (6607/7339)   Resolving deltas:  91% (6679/7339)   Resolving deltas:  92% (6752/7339)   Resolving deltas:  93% (6828/7339)   Resolving deltas:  94% (6904/7339)   Resolving deltas:  95% (6973/7339)   Resolving deltas:  96% (7046/7339)   Resolving deltas:  97% (7119/7339)   Resolving deltas:  98% (7195/7339)   Resolving deltas:  99% (7266/7339)   Resolving deltas: 100% (7339/7339)   Resolving deltas: 100% (7339/7339), done.
Checking connectivity... done.

travis_time:end:11a04c62:start=1496822961158196870,finish=1496822964612133186,duration=3453936316$ cd chef/chef
travis_time:start:16dc6880$ git fetch origin +refs/pull/6193/merge:
remote: Counting objects: 23, done.[K
remote: Compressing objects:  10% (1/10)   [Kremote: Compressing objects:  20% (2/10)   [Kremote: Compressing objects:  30% (3/10)   [Kremote: Compressing objects:  40% (4/10)   [Kremote: Compressing objects:  50% (5/10)   [Kremote: Compressing objects:  60% (6/10)   [Kremote: Compressing objects:  70% (7/10)   [Kremote: Compressing objects:  80% (8/10)   [Kremote: Compressing objects:  90% (9/10)   [Kremote: Compressing objects: 100% (10/10)   [Kremote: Compressing objects: 100% (10/10), done.[K
remote: Total 23 (delta 17), reused 17 (delta 13), pack-reused 0[K
Unpacking objects:   4% (1/23)   Unpacking objects:   8% (2/23)   Unpacking objects:  13% (3/23)   Unpacking objects:  17% (4/23)   Unpacking objects:  21% (5/23)   Unpacking objects:  26% (6/23)   Unpacking objects:  30% (7/23)   Unpacking objects:  34% (8/23)   Unpacking objects:  39% (9/23)   Unpacking objects:  43% (10/23)   Unpacking objects:  47% (11/23)   Unpacking objects:  52% (12/23)   Unpacking objects:  56% (13/23)   Unpacking objects:  60% (14/23)   Unpacking objects:  65% (15/23)   Unpacking objects:  69% (16/23)   Unpacking objects:  73% (17/23)   Unpacking objects:  78% (18/23)   Unpacking objects:  82% (19/23)   Unpacking objects:  86% (20/23)   Unpacking objects:  91% (21/23)   Unpacking objects:  95% (22/23)   Unpacking objects: 100% (23/23)   Unpacking objects: 100% (23/23), done.
From https://github.com/chef/chef
 * branch            refs/pull/6193/merge -> FETCH_HEAD

travis_time:end:16dc6880:start=1496822964624203690,finish=1496822965306194813,duration=681991123$ git checkout -qf FETCH_HEAD
travis_fold:end:git.checkout
Setting environment variables from .travis.yml
$ export FORCE_FFI_YAJL=ext
$ export PEDANT_OPTS=--skip-oc_id
$ export TEST_GEM=chef/chef-zero

travis_fold:start:rvmtravis_time:start:309d2200$ rvm use 2.4.1 --install --binary --fuzzy
ruby-2.4.1 is not installed - installing.
Searching for binary rubies, this might take some time.
Found remote file https://rubies.travis-ci.org/ubuntu/14.04/x86_64/ruby-2.4.1.tar.bz2
Checking requirements for ubuntu.
Requirements installation successful.
ruby-2.4.1 - #configure
ruby-2.4.1 - #download
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
100 14.3M  100 14.3M    0     0  56.5M      0 --:--:-- --:--:-- --:--:-- 56.5M
No checksum for downloaded archive, recording checksum in user configuration.
ruby-2.4.1 - #validate archive
ruby-2.4.1 - #extract
ruby-2.4.1 - #validate binary
ruby-2.4.1 - #setup
ruby-2.4.1 - #gemset created /home/travis/.rvm/gems/ruby-2.4.1@global
ruby-2.4.1 - #importing gemset /home/travis/.rvm/gemsets/global.gems|/-\|/-\|.-\|/-\|/-.|/-\|/-\|.-\|/-\|/-.|/-\|/-\|.-\|/-\|/-.|/-\|/-\|.-\|/-\|/-.|/-\|/-\|.-\|/-\|/-.|/-\|/-\|.-\|/-\|/-.|/-\|/-\|.-\|/-\|/-.|/-\|/-\|.-\|/-\|/-.|/-\|/-\|.-\|/-\|/-.|/-\|/-\|.-\|/-\|/-.|/-\|/-\|.-\|/-\|/-.|/-\|/-\|.-\|/-\|/-.|/-\|/-\|.-\|/-\|/-.|/-\|/-\|.-\|/-\|/-.|/-\|/-\|.-\|/-\|/-.|/-\|/-\|.-\|/-\|/-.|/-\|/-\|.-\|/-\|/-.|/-\|/-\|.-\|/-\|/-.|/-\|/-\|.-\|/-\|/-.|/-\|/-\|.-\|/-\|/-.|/-\|/-\|.-\|/-\|/-.|/-\|/-\|.-\|/-\|/-.|/-\|/-\|.-\|/-\|/-.|/-\|/-\|.-\|/-\|.
ruby-2.4.1 - #generating global wrappers|/-\|/-\|.-\|/-\|/-.|/-\|/-\|.-\|/-\|/-.|/-\|/-\|.-\|/-\|/-.|/-\|/-\|.-\|/-.
ruby-2.4.1 - #uninstalling gem rubygems-bundler-1.4.4|/.
ruby-2.4.1 - #gemset created /home/travis/.rvm/gems/ruby-2.4.1
ruby-2.4.1 - #importing gemset /home/travis/.rvm/gemsets/default.gems|/-\|/-\|.-\|/-\|/-.|/-\|/-\|.-\|/-\|/-.|/-\|/-\|.-\|/-\|/-.|/-\|/-\|.-\|/-\|/-.|/-\|/-\|.-\|/-\|/-.|/-\|/-\|.-\|/-\|/-.|/-\|/-\|.-\|/-\|/-.|/-\|/.
ruby-2.4.1 - #generating default wrappers|/-\|/-\|.-\|/-\|/-.|/-\|/-\|.-\|/-\|/-.|/-\|/-\|.-\|/-\|/-.|/-\|/-\|.-\|/-\.
Using /home/travis/.rvm/gems/ruby-2.4.1

travis_time:end:309d2200:start=1496822975810354609,finish=1496823004624405418,duration=28814050809travis_fold:end:rvm$ export BUNDLE_GEMFILE=$PWD/Gemfile
travis_fold:start:cache.1Setting up build cache
$ export CASHER_DIR=$HOME/.casher
travis_time:start:0dfbd3fc$ Installing caching utilities

travis_time:end:0dfbd3fc:start=1496823005739616281,finish=1496823005904228844,duration=164612563travis_time:start:0dc5ab5e
travis_time:end:0dc5ab5e:start=1496823005925412227,finish=1496823005939680220,duration=14267993travis_time:start:08b0590cattempting to download cache archive
fetching PR.6193/cache-linux-trusty-e57cc6af8531cb7ead42328b59d22584889d787a87697d0fb6b78ff1fc0f42de--rvm-2.4.1--gemfile-Gemfile.tgz
fetching PR.6193/cache--rvm-2.4.1--gemfile-Gemfile.tgz
fetching master/cache-linux-trusty-e57cc6af8531cb7ead42328b59d22584889d787a87697d0fb6b78ff1fc0f42de--rvm-2.4.1--gemfile-Gemfile.tgz
found cache

travis_time:end:08b0590c:start=1496823005961926244,finish=1496823008618392272,duration=2656466028travis_fold:end:cache.1
travis_fold:start:cache.bundlertravis_time:start:0315e21b
travis_time:end:0315e21b:start=1496823008630337694,finish=1496823008642466955,duration=12129261travis_time:start:20e88291adding /home/travis/build/chef/chef/vendor/bundle to cache
creating directory /home/travis/build/chef/chef/vendor/bundle

travis_time:end:20e88291:start=1496823008654742835,finish=1496823014901417378,duration=6246674543travis_fold:end:cache.bundler$ ruby --version
ruby 2.4.1p111 (2017-03-22 revision 58053) [x86_64-linux]
$ rvm --version
rvm 1.27.0 (latest) by Wayne E. Seguin <wayneeseguin@gmail.com>, Michal Papis <mpapis@gmail.com> [https://rvm.io/]
$ bundle --version
Bundler version 1.15.1
$ gem --version
2.6.12
travis_fold:start:before_install.1travis_time:start:10a02e08$ gem update --system $(grep rubygems omnibus_overrides.rb | cut -d'"' -f2)
Updating rubygems-update
Fetching: rubygems-update-2.6.11.gemFetching: rubygems-update-2.6.11.gem (  1%)Fetching: rubygems-update-2.6.11.gem (  2%)Fetching: rubygems-update-2.6.11.gem (  3%)Fetching: rubygems-update-2.6.11.gem (  4%)Fetching: rubygems-update-2.6.11.gem (  5%)Fetching: rubygems-update-2.6.11.gem (  7%)Fetching: rubygems-update-2.6.11.gem (  9%)Fetching: rubygems-update-2.6.11.gem ( 11%)Fetching: rubygems-update-2.6.11.gem ( 13%)Fetching: rubygems-update-2.6.11.gem ( 15%)Fetching: rubygems-update-2.6.11.gem ( 18%)Fetching: rubygems-update-2.6.11.gem ( 20%)Fetching: rubygems-update-2.6.11.gem ( 22%)Fetching: rubygems-update-2.6.11.gem ( 24%)Fetching: rubygems-update-2.6.11.gem ( 26%)Fetching: rubygems-update-2.6.11.gem ( 28%)Fetching: rubygems-update-2.6.11.gem ( 30%)Fetching: rubygems-update-2.6.11.gem ( 33%)Fetching: rubygems-update-2.6.11.gem ( 35%)Fetching: rubygems-update-2.6.11.gem ( 37%)Fetching: rubygems-update-2.6.11.gem ( 39%)Fetching: rubygems-update-2.6.11.gem ( 41%)Fetching: rubygems-update-2.6.11.gem ( 43%)Fetching: rubygems-update-2.6.11.gem ( 46%)Fetching: rubygems-update-2.6.11.gem ( 48%)Fetching: rubygems-update-2.6.11.gem ( 50%)Fetching: rubygems-update-2.6.11.gem ( 52%)Fetching: rubygems-update-2.6.11.gem ( 54%)Fetching: rubygems-update-2.6.11.gem ( 56%)Fetching: rubygems-update-2.6.11.gem ( 58%)Fetching: rubygems-update-2.6.11.gem ( 61%)Fetching: rubygems-update-2.6.11.gem ( 63%)Fetching: rubygems-update-2.6.11.gem ( 65%)Fetching: rubygems-update-2.6.11.gem ( 67%)Fetching: rubygems-update-2.6.11.gem ( 69%)Fetching: rubygems-update-2.6.11.gem ( 71%)Fetching: rubygems-update-2.6.11.gem ( 74%)Fetching: rubygems-update-2.6.11.gem ( 76%)Fetching: rubygems-update-2.6.11.gem ( 78%)Fetching: rubygems-update-2.6.11.gem ( 80%)Fetching: rubygems-update-2.6.11.gem ( 82%)Fetching: rubygems-update-2.6.11.gem ( 84%)Fetching: rubygems-update-2.6.11.gem ( 86%)Fetching: rubygems-update-2.6.11.gem ( 89%)Fetching: rubygems-update-2.6.11.gem ( 91%)Fetching: rubygems-update-2.6.11.gem ( 93%)Fetching: rubygems-update-2.6.11.gem ( 95%)Fetching: rubygems-update-2.6.11.gem ( 97%)Fetching: rubygems-update-2.6.11.gem ( 99%)Fetching: rubygems-update-2.6.11.gem (100%)Fetching: rubygems-update-2.6.11.gem (100%)
Successfully installed rubygems-update-2.6.11
Installing RubyGems 2.6.11
RubyGems 2.6.11 installed



------------------------------------------------------------------------------

RubyGems installed the following executables:
	/home/travis/.rvm/rubies/ruby-2.4.1/bin/gem

RubyGems system software updated

travis_time:end:10a02e08:start=1496823016278352876,finish=1496823021180276392,duration=4901923516travis_fold:end:before_install.1travis_fold:start:before_install.2travis_time:start:08bb7ae4$ gem --version
2.6.11

travis_time:end:08bb7ae4:start=1496823021207843658,finish=1496823021500553885,duration=292710227travis_fold:end:before_install.2travis_fold:start:before_install.3travis_time:start:02abc088$ rvm @global do gem uninstall bundler -a -x
Removing bundle
Removing bundler
Successfully uninstalled bundler-1.15.1

travis_time:end:02abc088:start=1496823021511889284,finish=1496823023212189404,duration=1700300120travis_fold:end:before_install.3travis_fold:start:before_install.4travis_time:start:16031284$ gem install bundler -v $(grep bundler omnibus_overrides.rb | cut -d'"' -f2)
Fetching: bundler-1.14.6.gemFetching: bundler-1.14.6.gem (  1%)Fetching: bundler-1.14.6.gem (  2%)Fetching: bundler-1.14.6.gem (  3%)Fetching: bundler-1.14.6.gem (  4%)Fetching: bundler-1.14.6.gem (  5%)Fetching: bundler-1.14.6.gem (  6%)Fetching: bundler-1.14.6.gem (  7%)Fetching: bundler-1.14.6.gem (  8%)Fetching: bundler-1.14.6.gem (  9%)Fetching: bundler-1.14.6.gem ( 10%)Fetching: bundler-1.14.6.gem ( 16%)Fetching: bundler-1.14.6.gem ( 21%)Fetching: bundler-1.14.6.gem ( 26%)Fetching: bundler-1.14.6.gem ( 31%)Fetching: bundler-1.14.6.gem ( 36%)Fetching: bundler-1.14.6.gem ( 41%)Fetching: bundler-1.14.6.gem ( 46%)Fetching: bundler-1.14.6.gem ( 52%)Fetching: bundler-1.14.6.gem ( 57%)Fetching: bundler-1.14.6.gem ( 62%)Fetching: bundler-1.14.6.gem ( 67%)Fetching: bundler-1.14.6.gem ( 72%)Fetching: bundler-1.14.6.gem ( 77%)Fetching: bundler-1.14.6.gem ( 82%)Fetching: bundler-1.14.6.gem ( 87%)Fetching: bundler-1.14.6.gem ( 93%)Fetching: bundler-1.14.6.gem ( 98%)Fetching: bundler-1.14.6.gem (100%)Fetching: bundler-1.14.6.gem (100%)
Successfully installed bundler-1.14.6
1 gem installed

travis_time:end:16031284:start=1496823023228528688,finish=1496823024068477283,duration=839948595travis_fold:end:before_install.4travis_fold:start:before_install.5travis_time:start:02e2eb7a$ bundle --version
Bundler version 1.14.6

travis_time:end:02e2eb7a:start=1496823024080457601,finish=1496823024404550072,duration=324092471travis_fold:end:before_install.5travis_fold:start:before_install.6travis_time:start:0915b367$ rm -f .bundle/config

travis_time:end:0915b367:start=1496823024419567548,finish=1496823024430416543,duration=10848995travis_fold:end:before_install.6travis_fold:start:install.bundlertravis_time:start:08f685c6$ bundle install --jobs=3 --retry=3 --deployment --path=${BUNDLE_PATH:-vendor/bundle}
Using rake 12.0.0
Using concurrent-ruby 1.0.5
Using i18n 0.8.1
Using minitest 5.10.2
Using thread_safe 0.3.6
Using addressable 2.4.0
Using mixlib-cli 1.7.0
Using ast 2.3.0
Using backports 3.8.0
Using debug_inspector 0.0.3
Using blankslate 2.1.2.4
Using builder 3.2.3
Using bundler 1.14.6
Using thor 0.19.4
Using byebug 9.0.6
Using fuzzyurl 0.9.0
Using mixlib-config 2.2.4
Using mixlib-shellout 2.2.7
Using libyajl2 1.2.0
Using hashie 3.5.5
Using mixlib-log 1.7.1
Using rack 2.0.3
Using uuidtools 2.1.5
Using diff-lcs 1.3
Using erubis 2.7.0
Using highline 1.7.8
Using iso8601 0.9.1
Using net-ssh 4.1.0
Using ffi 1.9.18
Using ipaddress 0.8.3
Using plist 3.3.0
Using systemu 2.6.5
Using wmi-lite 1.0.0
Using proxifier 1.0.3
Using rspec-support 3.6.0
Using multi_json 1.12.1
Using net-telnet 0.1.1
Using sfl 2.3
Using syslog-logger 1.6.8
Using powerpack 0.1.1
Using ruby-progressbar 1.8.1
Using unicode-display_width 1.2.1
Using coderay 1.1.1
Using docile 1.1.5
Using excon 0.55.0
Using json 2.1.0
Using multipart-post 2.0.0
Using net-http-persistent 2.9.4
Using net-http-pipeline 1.0.1
Using retriable 3.0.2
Using httpclient 2.8.3
Using method_source 0.8.2
Using parallel 1.11.2
Using slop 3.6.0
Using rubyzip 1.2.1
Using semverse 2.0.0
Using sslshake 1.2.0
Using little-plugger 1.1.4
Using nori 2.6.0
Using rubyntlm 0.6.2
Using mixlib-versioning 1.1.0
Using netrc 0.11.0
Using websocket 1.2.4
Using rb-readline 0.5.4
Using ruby-prof 0.16.2
Using ruby-shadow 2.5.0
Using simplecov-html 0.10.1
Using tomlrb 1.2.4
Using yard 0.9.9
Using iniparse 1.4.2
Using rainbow 2.2.2
Using tzinfo 1.2.3
Using launchy 2.4.3
Using appbundler 0.10.0
Using parser 2.4.0.0
Using binding_of_caller 0.7.2
Using parslet 1.5.0
Using gyoku 1.3.1
Using bundler-audit 0.5.0 from https://github.com/rubysec/bundler-audit.git (at master@6eb5a81)
Using chef-config 13.2.7 from source at `chef-config`
Using ffi-yajl 2.3.0
Using mixlib-archive 0.4.1
Using net-sftp 2.1.2
Using net-ssh-gateway 2.0.0
Using net-scp 1.2.1
Using ethon 0.10.1
Using gssapi 1.2.0
Using rspec-core 3.6.0
Using rspec-expectations 3.6.0
Using rspec-mocks 3.6.0
Using docker-api 1.33.4
Using faraday 0.12.1
Using pry 0.10.4
Using logging 2.2.2
Using mixlib-install 3.2.1
Using pusher-client 0.6.2
Using simplecov 0.14.1
Using activesupport 5.1.1
Using rubocop 0.47.1
Using toml 0.1.2
Using chef-zero 13.0.0
Using ohai 13.1.0
Using mixlib-authentication 1.4.1
Using net-ssh-multi 1.2.1
Using typhoeus 0.8.0
Using rspec_junit_formatter 0.2.3
Using rspec-its 1.2.0
Using specinfra 2.67.10
Using rspec 3.6.0
Using faraday_middleware 0.11.0.1
Using gh 0.15.1
Using faraday-http-cache 2.0.0
Using pry-byebug 3.4.2
Using pry-remote 0.1.8
Using pry-stack_explorer 0.4.9.2
Using winrm 2.2.3
Using chefstyle 0.5.0 from https://github.com/chef/chefstyle.git (at master@b2bf89d)
Using cheffish 13.0.0
Using serverspec 2.38.1
Using travis 1.8.8
Using winrm-fs 1.0.1
Using sawyer 0.8.1
Using chef 13.2.7 from source at `.`
Using train 0.23.0
Using octokit 4.7.0
Using inspec 1.25.1
Using github_changelog_generator 1.14.2 from https://github.com/chef/github-changelog-generator (at master@7ab4953)
Bundle complete! 24 Gemfile dependencies, 127 gems now installed.
Bundled gems are installed into ./vendor/bundle.

travis_time:end:08f685c6:start=1496823024442964700,finish=1496823026648235675,duration=2205270975travis_fold:end:install.bundlertravis_fold:start:before_script.1travis_time:start:0d87ed32$ echo --color > .rspec

travis_time:end:0d87ed32:start=1496823026668086297,finish=1496823026693829995,duration=25743698travis_fold:end:before_script.1travis_fold:start:before_script.2travis_time:start:01c27850$ echo -fp >> .rspec

travis_time:end:01c27850:start=1496823026708451042,finish=1496823026734669176,duration=26218134travis_fold:end:before_script.2travis_fold:start:before_script.3travis_time:start:0ab90894$ sudo sed -i -e 's/^Defaults\tsecure_path.*$//' /etc/sudoers || true
This job is running on container-based infrastructure, which does not allow use of 'sudo', setuid, and setgid executables.
If you require sudo, add 'sudo: required' to your .travis.yml


travis_time:end:0ab90894:start=1496823026756930513,finish=1496823026809336573,duration=52406060travis_fold:end:before_script.3travis_time:start:1411b0fe$ bundle exec tasks/bin/run_external_test $TEST_GEM master rake spec cheffs
Cloning into '/tmp/chef-external-test20170607-4965-1yv3rgp'...
Already on 'master'
Your branch is up-to-date with 'origin/master'.
Fetching https://github.com/chef/chef-server.git
Fetching https://github.com/chef/github-changelog-generator.git
Fetching gem metadata from https://rubygems.org/......
Fetching version metadata from https://rubygems.org/..
Fetching dependency metadata from https://rubygems.org/.
Resolving dependencies....
Using rake 12.0.0
Installing concurrent-ruby 1.0.5
Installing i18n 0.8.4
Installing minitest 5.10.2
Installing thread_safe 0.3.6
Installing public_suffix 2.0.5
Installing ast 2.3.0
Installing debug_inspector 0.0.3 with native extensions
Installing builder 3.2.3
Using bundler 1.14.6
Installing byebug 9.0.6 with native extensions
Installing fuzzyurl 0.9.0
Installing mixlib-config 2.2.4
Installing mixlib-shellout 2.2.7
Installing libyajl2 1.2.0 with native extensions
Installing hashie 3.5.5
Installing mixlib-log 1.7.1
Installing rack 2.0.3
Installing uuidtools 2.1.5
Installing diff-lcs 1.3
Installing erubis 2.7.0
Installing highline 1.7.8
Installing iniparse 1.4.3
Installing iso8601 0.9.1
Installing mixlib-cli 1.7.0
Installing net-ssh 4.1.0
Installing ffi 1.9.18 with native extensions
Installing ipaddress 0.8.3
Installing plist 3.3.0
Installing systemu 2.6.5
Installing wmi-lite 1.0.0
Installing proxifier 1.0.3
Installing rspec-support 3.6.0
Installing multi_json 1.12.1
Using net-telnet 0.1.1
Installing sfl 2.3
Installing syslog-logger 1.6.8
Installing powerpack 0.1.1
Installing ruby-progressbar 1.8.1
Installing unicode-display_width 1.2.1
Installing coderay 1.1.1
Installing unf_ext 0.0.7.4 with native extensions
Installing multipart-post 2.0.0
Installing retriable 3.0.2
Installing method_source 0.8.2
Installing mime-types-data 3.2016.0521
Installing net-http-spy 0.2.1
Installing netrc 0.11.0
Installing slop 3.6.0
Installing rainbow 2.2.2 with native extensions
Installing tzinfo 1.2.3
Installing addressable 2.5.1
Installing parser 2.4.0.0
Installing binding_of_caller 0.7.2 with native extensions
Installing ffi-yajl 2.3.0 with native extensions
Installing mixlib-archive 0.4.1
Installing mixlib-authentication 1.4.1
Installing net-sftp 2.1.2
Installing net-ssh-gateway 2.0.0
Installing net-scp 1.2.1
Installing rspec-core 3.6.0
Installing rspec-expectations 3.6.0
Installing rspec-mocks 3.6.0
Installing unf 0.1.4
Installing faraday 0.12.1
Installing mime-types 3.1
Installing pry 0.10.4
Installing activesupport 5.1.1
Installing chef-config 13.1.31
Installing rubocop 0.39.0
Using chef-zero 13.0.0 from source at `.`
Installing net-ssh-multi 1.2.1
Installing specinfra 2.68.0
Installing rspec_junit_formatter 0.2.3
Installing rspec-its 1.2.0
Installing rspec 3.6.0
Installing domain_name 0.5.20170404
Installing faraday-http-cache 2.0.0
Installing sawyer 0.8.1
Installing pry-byebug 3.4.2
Installing pry-stack_explorer 0.4.9.2
Installing ohai 13.1.0
Installing chefstyle 0.3.1
Installing serverspec 2.39.1
Installing rspec-rerun 1.1.0
Installing http-cookie 1.0.3
Installing octokit 4.7.0
Installing chef 13.1.31
Installing rest-client 2.0.2
Using github_changelog_generator 1.14.2 from https://github.com/chef/github-changelog-generator.git (at master@7ab4953)
Using oc-chef-pedant 2.2.0 from https://github.com/chef/chef-server.git (at master@0ecebf2)
Bundle complete! 10 Gemfile dependencies, 91 gems now installed.
Use `bundle show [gemname]` to see where a bundled gem is installed.

ChefZero::Solr::SolrParser
  handles terms
  handles ranges
  handles -
  handles wildcard ranges

ChefZero::Server
  with a server bound to port 8889
>> Starting Chef Zero (v13.0.0)...
[2017-06-07T08:11:44+00:00] WARN: Port 8889 not available
    a second server bound to port 8889 throws EADDRINUSE
[2017-06-07T08:11:44+00:00] WARN: Port 8889 not available
    a server bound to range 8889-9999 binds to a port > 8889
[2017-06-07T08:11:44+00:00] WARN: Port 8889 not available
    a server bound to range 8889-8889 throws an exception
    has a very patient request timeout
    accept headers
      accepts requests with no accept header
      accepts requests with accept: application/json
      accepts requests with accept: application/*
      accepts requests with accept: application/*
      denies requests with accept: application/blah
      denies requests with accept: blah/json
      denies requests with accept: blah/*
      denies requests with accept: blah/*
      denies requests with accept: <empty string>
      accepts requests with accept: a/b;a=b;c=d, application/json;a=b, application/xml;a=b
      accepts /version

Socketless Mode
  registers a socketful server
  retrieves a server by port
  when a no-listen server is registered
    assigns the server a low port number
    and another server is registered
      assigns another port when another server is registered
      raises NoSocketlessPortAvailable when too many servers are registered
      deregisters a server
      routing requests to a server
        routes a request to the registered port
        raises ServerNotFound when a request is sent to an unregistered port

Deprecation Warnings:

Using `should` from rspec-expectations' old `:should` syntax without explicitly enabling the syntax is deprecated. Use the new `:expect` syntax or explicitly enable `:should` with `config.expect_with(:rspec) { |c| c.syntax = :should }` instead. Called from /tmp/chef-external-test20170607-4965-1yv3rgp/spec/search_spec.rb:20:in `block (2 levels) in <top (required)>'.


If you need more of the backtrace for any of these deprecations to
identify where to make the necessary changes, you can configure
`config.raise_errors_for_deprecations!`, and it will turn the
deprecation warnings into errors, giving you the full backtrace.

1 deprecation warning total

Finished in 0.5118 seconds (files took 0.61935 seconds to load)
27 examples, 0 failures

Configuring logging...
Creating platform...
Configured server URL: http://127.0.0.1:8889
Configured base resource URL: http://127.0.0.1:8889
Starting Pedant Run: 2017-06-07 08:11:47 UTC
Running tests from the following directories:
/home/travis/.rvm/gems/ruby-2.4.1/bundler/gems/chef-server-0ecebf2c610d/oc-chef-pedant/spec/api
/home/travis/.rvm/gems/ruby-2.4.1/bundler/gems/chef-server-0ecebf2c610d/oc-chef-pedant/spec/api/knife/nodes/delete_spec.rb:33: warning: key :stderr is duplicated and overwritten on line 34
/home/travis/.rvm/gems/ruby-2.4.1/bundler/gems/chef-server-0ecebf2c610d/oc-chef-pedant/spec/api/knife/roles/delete_spec.rb:33: warning: key :stderr is duplicated and overwritten on line 34
Run options:
  include {:focus=>true}
  exclude {:intermittent_failure=>true, :cleanup=>true, :validation=>true, :authentication=>true, :authorization=>true, :oc_id=>true, :omnibus=>true, :usags=>true, :universe=>true, :chef_zero_quirks=>true, :association=>true, :users=>true, :organizations=>true, :multiuser=>true, :user_keys=>true, :knife=>true}

All examples were filtered out; ignoring {:focus=>true}

ACL API
  /organizations/_acl endpoint
    GET /organizations/_acl
      admin user
        can get object ACL
      with modified ACLs
        when normal user granted GRANT permission
          can get ACL
        when normal client granted GRANT permission
          can get ACL
    PUT /organizations/_acl
      admin user
        returns 405
    POST /organizations/_acl
      admin user
        returns 405
    DELETE /organizations/_acl
      admin user
        returns 405
  /organizations/_acl/create endpoint
    PUT /organizations/_acl/create
      admin user
        can modify ACL
      with modified ACLs
        when normal user granted GRANT permission
          can modify ACL
        when normal client granted GRANT permission
          can modify ACL
    GET /organizations/_acl/create
      admin user
        returns 405
    POST /organizations/_acl/create
      admin user
        returns 405
    DELETE /organizations/_acl/create
      admin user
        returns 405
  /organizations/_acl/read endpoint
    PUT /organizations/_acl/read
      admin user
        can modify ACL
      with modified ACLs
        when normal user granted GRANT permission
          can modify ACL
        when normal client granted GRANT permission
          can modify ACL
    GET /organizations/_acl/read
      admin user
        returns 405
    POST /organizations/_acl/read
      admin user
        returns 405
    DELETE /organizations/_acl/read
      admin user
        returns 405
  /organizations/_acl/update endpoint
    PUT /organizations/_acl/update
      admin user
        can modify ACL
      with modified ACLs
        when normal user granted GRANT permission
          can modify ACL
        when normal client granted GRANT permission
          can modify ACL
    GET /organizations/_acl/update
      admin user
        returns 405
    POST /organizations/_acl/update
      admin user
        returns 405
    DELETE /organizations/_acl/update
      admin user
        returns 405
  /organizations/_acl/delete endpoint
    PUT /organizations/_acl/delete
      admin user
        can modify ACL
      with modified ACLs
        when normal user granted GRANT permission
          can modify ACL
        when normal client granted GRANT permission
          can modify ACL
    GET /organizations/_acl/delete
      admin user
        returns 405
    POST /organizations/_acl/delete
      admin user
        returns 405
    DELETE /organizations/_acl/delete
      admin user
        returns 405
  /organizations/_acl/grant endpoint
    PUT /organizations/_acl/grant
      admin user
        can modify ACL
      with modified ACLs
        when normal user granted GRANT permission
          can modify ACL
        when normal client granted GRANT permission
          can modify ACL
    GET /organizations/_acl/grant
      admin user
        returns 405
    POST /organizations/_acl/grant
      admin user
        returns 405
    DELETE /organizations/_acl/grant
      admin user
        returns 405
  /<type>/<name>/_acl endpoint
    for clients type
      GET /clients/<name>/_acl
        admin user
          can get object ACL
          can get a granular object ACL
        when normal user granted GRANT permission
          can get object ACL
        when normal client granted GRANT permission
          can get object ACL
      PUT /clients/<name>/_acl
        admin user
          returns 405
      POST /clients/<name>/_acl
        admin user
          returns 405
      DELETE /clients/<name>/_acl
        admin user
          returns 405
      /clients/<name>/_acl/create endpoint
        GET /clients/<name>/_acl/create
          admin user
            returns 405
        PUT /clients/<name>/_acl/create
          admin user
            using the new 'users' and 'clients' attributes
              can update ACL
            using the legacy 'actors' attribute
              can update ACL
              when client with '.' in name is used in actors hash
                returns 200
            with non-local groups
              can update ACL
          normal user with GRANT permission
            can update ACL
          normal client with GRANT permission
            can update ACL
        POST /clients/<name>/_acl/create
          admin user
            returns 405
        DELETE /clients/<name>/_acl/create
          admin user
            returns 405
      /clients/<name>/_acl/read endpoint
        GET /clients/<name>/_acl/read
          admin user
            returns 405
        PUT /clients/<name>/_acl/read
          admin user
            using the new 'users' and 'clients' attributes
              can update ACL
            using the legacy 'actors' attribute
              can update ACL
              when client with '.' in name is used in actors hash
                returns 200
            with non-local groups
              can update ACL
          normal user with GRANT permission
            can update ACL
          normal client with GRANT permission
            can update ACL
        POST /clients/<name>/_acl/read
          admin user
            returns 405
        DELETE /clients/<name>/_acl/read
          admin user
            returns 405
      /clients/<name>/_acl/update endpoint
        GET /clients/<name>/_acl/update
          admin user
            returns 405
        PUT /clients/<name>/_acl/update
          admin user
            using the new 'users' and 'clients' attributes
              can update ACL
            using the legacy 'actors' attribute
              can update ACL
              when client with '.' in name is used in actors hash
                returns 200
            with non-local groups
              can update ACL
          normal user with GRANT permission
            can update ACL
          normal client with GRANT permission
            can update ACL
        POST /clients/<name>/_acl/update
          admin user
            returns 405
        DELETE /clients/<name>/_acl/update
          admin user
            returns 405
      /clients/<name>/_acl/delete endpoint
        GET /clients/<name>/_acl/delete
          admin user
            returns 405
        PUT /clients/<name>/_acl/delete
          admin user
            using the new 'users' and 'clients' attributes
              can update ACL
            using the legacy 'actors' attribute
              can update ACL
              when client with '.' in name is used in actors hash
                returns 200
            with non-local groups
              can update ACL
          normal user with GRANT permission
            can update ACL
          normal client with GRANT permission
            can update ACL
        POST /clients/<name>/_acl/delete
          admin user
            returns 405
        DELETE /clients/<name>/_acl/delete
          admin user
            returns 405
      /clients/<name>/_acl/grant endpoint
        GET /clients/<name>/_acl/grant
          admin user
            returns 405
        PUT /clients/<name>/_acl/grant
          admin user
            using the new 'users' and 'clients' attributes
              can update ACL
            using the legacy 'actors' attribute
              can update ACL
              when client with '.' in name is used in actors hash
                returns 200
            with non-local groups
              can update ACL
          normal user with GRANT permission
            can update ACL
          normal client with GRANT permission
            can update ACL
        POST /clients/<name>/_acl/grant
          admin user
            returns 405
        DELETE /clients/<name>/_acl/grant
          admin user
            returns 405
    for groups type
      GET /groups/<name>/_acl
        admin user
          can get object ACL
          can get a granular object ACL
        when normal user granted GRANT permission
          can get object ACL
        when normal client granted GRANT permission
          can get object ACL
      PUT /groups/<name>/_acl
        admin user
          returns 405
      POST /groups/<name>/_acl
        admin user
          returns 405
      DELETE /groups/<name>/_acl
        admin user
          returns 405
      /groups/<name>/_acl/create endpoint
        GET /groups/<name>/_acl/create
          admin user
            returns 405
        PUT /groups/<name>/_acl/create
          admin user
            using the new 'users' and 'clients' attributes
              can update ACL
            using the legacy 'actors' attribute
              can update ACL
              when client with '.' in name is used in actors hash
                returns 200
            with non-local groups
              can update ACL
          normal user with GRANT permission
            can update ACL
          normal client with GRANT permission
            can update ACL
        POST /groups/<name>/_acl/create
          admin user
            returns 405
        DELETE /groups/<name>/_acl/create
          admin user
            returns 405
      /groups/<name>/_acl/read endpoint
        GET /groups/<name>/_acl/read
          admin user
            returns 405
        PUT /groups/<name>/_acl/read
          admin user
            using the new 'users' and 'clients' attributes
              can update ACL
            using the legacy 'actors' attribute
              can update ACL
              when client with '.' in name is used in actors hash
                returns 200
            with non-local groups
              can update ACL
          normal user with GRANT permission
            can update ACL
          normal client with GRANT permission
            can update ACL
        POST /groups/<name>/_acl/read
          admin user
            returns 405
        DELETE /groups/<name>/_acl/read
          admin user
            returns 405
      /groups/<name>/_acl/update endpoint
        GET /groups/<name>/_acl/update
          admin user
            returns 405
        PUT /groups/<name>/_acl/update
          admin user
            using the new 'users' and 'clients' attributes
              can update ACL
            using the legacy 'actors' attribute
              can update ACL
              when client with '.' in name is used in actors hash
                returns 200
            with non-local groups
              can update ACL
          normal user with GRANT permission
            can update ACL
          normal client with GRANT permission
            can update ACL
        POST /groups/<name>/_acl/update
          admin user
            returns 405
        DELETE /groups/<name>/_acl/update
          admin user
            returns 405
      /groups/<name>/_acl/delete endpoint
        GET /groups/<name>/_acl/delete
          admin user
            returns 405
        PUT /groups/<name>/_acl/delete
          admin user
            using the new 'users' and 'clients' attributes
              can update ACL
            using the legacy 'actors' attribute
              can update ACL
              when client with '.' in name is used in actors hash
                returns 200
            with non-local groups
              can update ACL
          normal user with GRANT permission
            can update ACL
          normal client with GRANT permission
            can update ACL
        POST /groups/<name>/_acl/delete
          admin user
            returns 405
        DELETE /groups/<name>/_acl/delete
          admin user
            returns 405
      /groups/<name>/_acl/grant endpoint
        GET /groups/<name>/_acl/grant
          admin user
            returns 405
        PUT /groups/<name>/_acl/grant
          admin user
            using the new 'users' and 'clients' attributes
              can update ACL
            using the legacy 'actors' attribute
              can update ACL
              when client with '.' in name is used in actors hash
                returns 200
            with non-local groups
              can update ACL
          normal user with GRANT permission
            can update ACL
          normal client with GRANT permission
            can update ACL
        POST /groups/<name>/_acl/grant
          admin user
            returns 405
        DELETE /groups/<name>/_acl/grant
          admin user
            returns 405
    for containers type
      GET /containers/<name>/_acl
        admin user
          can get object ACL
          can get a granular object ACL
        when normal user granted GRANT permission
          can get object ACL
        when normal client granted GRANT permission
          can get object ACL
      PUT /containers/<name>/_acl
        admin user
          returns 405
      POST /containers/<name>/_acl
        admin user
          returns 405
      DELETE /containers/<name>/_acl
        admin user
          returns 405
      /containers/<name>/_acl/create endpoint
        GET /containers/<name>/_acl/create
          admin user
            returns 405
        PUT /containers/<name>/_acl/create
          admin user
            using the new 'users' and 'clients' attributes
              can update ACL
            using the legacy 'actors' attribute
              can update ACL
              when client with '.' in name is used in actors hash
                returns 200
            with non-local groups
              can update ACL
          normal user with GRANT permission
            can update ACL
          normal client with GRANT permission
            can update ACL
        POST /containers/<name>/_acl/create
          admin user
            returns 405
        DELETE /containers/<name>/_acl/create
          admin user
            returns 405
      /containers/<name>/_acl/read endpoint
        GET /containers/<name>/_acl/read
          admin user
            returns 405
        PUT /containers/<name>/_acl/read
          admin user
            using the new 'users' and 'clients' attributes
              can update ACL
            using the legacy 'actors' attribute
              can update ACL
              when client with '.' in name is used in actors hash
                returns 200
            with non-local groups
              can update ACL
          normal user with GRANT permission
            can update ACL
          normal client with GRANT permission
            can update ACL
        POST /containers/<name>/_acl/read
          admin user
            returns 405
        DELETE /containers/<name>/_acl/read
          admin user
            returns 405
      /containers/<name>/_acl/update endpoint
        GET /containers/<name>/_acl/update
          admin user
            returns 405
        PUT /containers/<name>/_acl/update
          admin user
            using the new 'users' and 'clients' attributes
              can update ACL
            using the legacy 'actors' attribute
              can update ACL
              when client with '.' in name is used in actors hash
                returns 200
            with non-local groups
              can update ACL
          normal user with GRANT permission
            can update ACL
          normal client with GRANT permission
            can update ACL
        POST /containers/<name>/_acl/update
          admin user
            returns 405
        DELETE /containers/<name>/_acl/update
          admin user
            returns 405
      /containers/<name>/_acl/delete endpoint
        GET /containers/<name>/_acl/delete
          admin user
            returns 405
        PUT /containers/<name>/_acl/delete
          admin user
            using the new 'users' and 'clients' attributes
              can update ACL
            using the legacy 'actors' attribute
              can update ACL
              when client with '.' in name is used in actors hash
                returns 200
            with non-local groups
              can update ACL
          normal user with GRANT permission
            can update ACL
          normal client with GRANT permission
            can update ACL
        POST /containers/<name>/_acl/delete
          admin user
            returns 405
        DELETE /containers/<name>/_acl/delete
          admin user
            returns 405
      /containers/<name>/_acl/grant endpoint
        GET /containers/<name>/_acl/grant
          admin user
            returns 405
        PUT /containers/<name>/_acl/grant
          admin user
            using the new 'users' and 'clients' attributes
              can update ACL
            using the legacy 'actors' attribute
              can update ACL
              when client with '.' in name is used in actors hash
                returns 200
            with non-local groups
              can update ACL
          normal user with GRANT permission
            can update ACL
          normal client with GRANT permission
            can update ACL
        POST /containers/<name>/_acl/grant
          admin user
            returns 405
        DELETE /containers/<name>/_acl/grant
          admin user
            returns 405
    for data type
      GET /data/<name>/_acl
        admin user
          can get object ACL
          can get a granular object ACL
        when normal user granted GRANT permission
          can get object ACL
        when normal client granted GRANT permission
          can get object ACL
      PUT /data/<name>/_acl
        admin user
          returns 405
      POST /data/<name>/_acl
        admin user
          returns 405
      DELETE /data/<name>/_acl
        admin user
          returns 405
      /data/<name>/_acl/create endpoint
        GET /data/<name>/_acl/create
          admin user
            returns 405
        PUT /data/<name>/_acl/create
          admin user
            using the new 'users' and 'clients' attributes
              can update ACL
            using the legacy 'actors' attribute
              can update ACL
              when client with '.' in name is used in actors hash
                returns 200
            with non-local groups
              can update ACL
          normal user with GRANT permission
            can update ACL
          normal client with GRANT permission
            can update ACL
        POST /data/<name>/_acl/create
          admin user
            returns 405
        DELETE /data/<name>/_acl/create
          admin user
            returns 405
      /data/<name>/_acl/read endpoint
        GET /data/<name>/_acl/read
          admin user
            returns 405
        PUT /data/<name>/_acl/read
          admin user
            using the new 'users' and 'clients' attributes
              can update ACL
            using the legacy 'actors' attribute
              can update ACL
              when client with '.' in name is used in actors hash
                returns 200
            with non-local groups
              can update ACL
          normal user with GRANT permission
            can update ACL
          normal client with GRANT permission
            can update ACL
        POST /data/<name>/_acl/read
          admin user
            returns 405
        DELETE /data/<name>/_acl/read
          admin user
            returns 405
      /data/<name>/_acl/update endpoint
        GET /data/<name>/_acl/update
          admin user
            returns 405
        PUT /data/<name>/_acl/update
          admin user
            using the new 'users' and 'clients' attributes
              can update ACL
            using the legacy 'actors' attribute
              can update ACL
              when client with '.' in name is used in actors hash
                returns 200
            with non-local groups
              can update ACL
          normal user with GRANT permission
            can update ACL
          normal client with GRANT permission
            can update ACL
        POST /data/<name>/_acl/update
          admin user
            returns 405
        DELETE /data/<name>/_acl/update
          admin user
            returns 405
      /data/<name>/_acl/delete endpoint
        GET /data/<name>/_acl/delete
          admin user
            returns 405
        PUT /data/<name>/_acl/delete
          admin user
            using the new 'users' and 'clients' attributes
              can update ACL
            using the legacy 'actors' attribute
              can update ACL
              when client with '.' in name is used in actors hash
                returns 200
            with non-local groups
              can update ACL
          normal user with GRANT permission
            can update ACL
          normal client with GRANT permission
            can update ACL
        POST /data/<name>/_acl/delete
          admin user
            returns 405
        DELETE /data/<name>/_acl/delete
          admin user
            returns 405
      /data/<name>/_acl/grant endpoint
        GET /data/<name>/_acl/grant
          admin user
            returns 405
        PUT /data/<name>/_acl/grant
          admin user
            using the new 'users' and 'clients' attributes
              can update ACL
            using the legacy 'actors' attribute
              can update ACL
              when client with '.' in name is used in actors hash
                returns 200
            with non-local groups
              can update ACL
          normal user with GRANT permission
            can update ACL
          normal client with GRANT permission
            can update ACL
        POST /data/<name>/_acl/grant
          admin user
            returns 405
        DELETE /data/<name>/_acl/grant
          admin user
            returns 405
    for nodes type
      GET /nodes/<name>/_acl
        admin user
          can get object ACL
          can get a granular object ACL
        when normal user granted GRANT permission
          can get object ACL
        when normal client granted GRANT permission
          can get object ACL
      PUT /nodes/<name>/_acl
        admin user
          returns 405
      POST /nodes/<name>/_acl
        admin user
          returns 405
      DELETE /nodes/<name>/_acl
        admin user
          returns 405
      /nodes/<name>/_acl/create endpoint
        GET /nodes/<name>/_acl/create
          admin user
            returns 405
        PUT /nodes/<name>/_acl/create
          admin user
            using the new 'users' and 'clients' attributes
              can update ACL
            using the legacy 'actors' attribute
              can update ACL
              when client with '.' in name is used in actors hash
                returns 200
            with non-local groups
              can update ACL
          normal user with GRANT permission
            can update ACL
          normal client with GRANT permission
            can update ACL
        POST /nodes/<name>/_acl/create
          admin user
            returns 405
        DELETE /nodes/<name>/_acl/create
          admin user
            returns 405
      /nodes/<name>/_acl/read endpoint
        GET /nodes/<name>/_acl/read
          admin user
            returns 405
        PUT /nodes/<name>/_acl/read
          admin user
            using the new 'users' and 'clients' attributes
              can update ACL
            using the legacy 'actors' attribute
              can update ACL
              when client with '.' in name is used in actors hash
                returns 200
            with non-local groups
              can update ACL
          normal user with GRANT permission
            can update ACL
          normal client with GRANT permission
            can update ACL
        POST /nodes/<name>/_acl/read
          admin user
            returns 405
        DELETE /nodes/<name>/_acl/read
          admin user
            returns 405
      /nodes/<name>/_acl/update endpoint
        GET /nodes/<name>/_acl/update
          admin user
            returns 405
        PUT /nodes/<name>/_acl/update
          admin user
            using the new 'users' and 'clients' attributes
              can update ACL
            using the legacy 'actors' attribute
              can update ACL
              when client with '.' in name is used in actors hash
                returns 200
            with non-local groups
              can update ACL
          normal user with GRANT permission
            can update ACL
          normal client with GRANT permission
            can update ACL
        POST /nodes/<name>/_acl/update
          admin user
            returns 405
        DELETE /nodes/<name>/_acl/update
          admin user
            returns 405
      /nodes/<name>/_acl/delete endpoint
        GET /nodes/<name>/_acl/delete
          admin user
            returns 405
        PUT /nodes/<name>/_acl/delete
          admin user
            using the new 'users' and 'clients' attributes
              can update ACL
            using the legacy 'actors' attribute
              can update ACL
              when client with '.' in name is used in actors hash
                returns 200
            with non-local groups
              can update ACL
          normal user with GRANT permission
            can update ACL
          normal client with GRANT permission
            can update ACL
        POST /nodes/<name>/_acl/delete
          admin user
            returns 405
        DELETE /nodes/<name>/_acl/delete
          admin user
            returns 405
      /nodes/<name>/_acl/grant endpoint
        GET /nodes/<name>/_acl/grant
          admin user
            returns 405
        PUT /nodes/<name>/_acl/grant
          admin user
            using the new 'users' and 'clients' attributes
              can update ACL
            using the legacy 'actors' attribute
              can update ACL
              when client with '.' in name is used in actors hash
                returns 200
            with non-local groups
              can update ACL
          normal user with GRANT permission
            can update ACL
          normal client with GRANT permission
            can update ACL
        POST /nodes/<name>/_acl/grant
          admin user
            returns 405
        DELETE /nodes/<name>/_acl/grant
          admin user
            returns 405
    for roles type
      GET /roles/<name>/_acl
        admin user
          can get object ACL
          can get a granular object ACL
        when normal user granted GRANT permission
          can get object ACL
        when normal client granted GRANT permission
          can get object ACL
      PUT /roles/<name>/_acl
        admin user
          returns 405
      POST /roles/<name>/_acl
        admin user
          returns 405
      DELETE /roles/<name>/_acl
        admin user
          returns 405
      /roles/<name>/_acl/create endpoint
        GET /roles/<name>/_acl/create
          admin user
            returns 405
        PUT /roles/<name>/_acl/create
          admin user
            using the new 'users' and 'clients' attributes
              can update ACL
            using the legacy 'actors' attribute
              can update ACL
              when client with '.' in name is used in actors hash
                returns 200
            with non-local groups
              can update ACL
          normal user with GRANT permission
            can update ACL
          normal client with GRANT permission
            can update ACL
        POST /roles/<name>/_acl/create
          admin user
            returns 405
        DELETE /roles/<name>/_acl/create
          admin user
            returns 405
      /roles/<name>/_acl/read endpoint
        GET /roles/<name>/_acl/read
          admin user
            returns 405
        PUT /roles/<name>/_acl/read
          admin user
            using the new 'users' and 'clients' attributes
              can update ACL
            using the legacy 'actors' attribute
              can update ACL
              when client with '.' in name is used in actors hash
                returns 200
            with non-local groups
              can update ACL
          normal user with GRANT permission
            can update ACL
          normal client with GRANT permission
            can update ACL
        POST /roles/<name>/_acl/read
          admin user
            returns 405
        DELETE /roles/<name>/_acl/read
          admin user
            returns 405
      /roles/<name>/_acl/update endpoint
        GET /roles/<name>/_acl/update
          admin user
            returns 405
        PUT /roles/<name>/_acl/update
          admin user
            using the new 'users' and 'clients' attributes
              can update ACL
            using the legacy 'actors' attribute
              can update ACL
              when client with '.' in name is used in actors hash
                returns 200
            with non-local groups
              can update ACL
          normal user with GRANT permission
            can update ACL
          normal client with GRANT permission
            can update ACL
        POST /roles/<name>/_acl/update
          admin user
            returns 405
        DELETE /roles/<name>/_acl/update
          admin user
            returns 405
      /roles/<name>/_acl/delete endpoint
        GET /roles/<name>/_acl/delete
          admin user
            returns 405
        PUT /roles/<name>/_acl/delete
          admin user
            using the new 'users' and 'clients' attributes
              can update ACL
            using the legacy 'actors' attribute
              can update ACL
              when client with '.' in name is used in actors hash
                returns 200
            with non-local groups
              can update ACL
          normal user with GRANT permission
            can update ACL
          normal client with GRANT permission
            can update ACL
        POST /roles/<name>/_acl/delete
          admin user
            returns 405
        DELETE /roles/<name>/_acl/delete
          admin user
            returns 405
      /roles/<name>/_acl/grant endpoint
        GET /roles/<name>/_acl/grant
          admin user
            returns 405
        PUT /roles/<name>/_acl/grant
          admin user
            using the new 'users' and 'clients' attributes
              can update ACL
            using the legacy 'actors' attribute
              can update ACL
              when client with '.' in name is used in actors hash
                returns 200
            with non-local groups
              can update ACL
          normal user with GRANT permission
            can update ACL
          normal client with GRANT permission
            can update ACL
        POST /roles/<name>/_acl/grant
          admin user
            returns 405
        DELETE /roles/<name>/_acl/grant
          admin user
            returns 405
    for environments type
      GET /environments/<name>/_acl
        admin user
          can get object ACL
          can get a granular object ACL
        when normal user granted GRANT permission
          can get object ACL
        when normal client granted GRANT permission
          can get object ACL
      PUT /environments/<name>/_acl
        admin user
          returns 405
      POST /environments/<name>/_acl
        admin user
          returns 405
      DELETE /environments/<name>/_acl
        admin user
          returns 405
      /environments/<name>/_acl/create endpoint
        GET /environments/<name>/_acl/create
          admin user
            returns 405
        PUT /environments/<name>/_acl/create
          admin user
            using the new 'users' and 'clients' attributes
              can update ACL
            using the legacy 'actors' attribute
              can update ACL
              when client with '.' in name is used in actors hash
                returns 200
            with non-local groups
              can update ACL
          normal user with GRANT permission
            can update ACL
          normal client with GRANT permission
            can update ACL
        POST /environments/<name>/_acl/create
          admin user
            returns 405
        DELETE /environments/<name>/_acl/create
          admin user
            returns 405
      /environments/<name>/_acl/read endpoint
        GET /environments/<name>/_acl/read
          admin user
            returns 405
        PUT /environments/<name>/_acl/read
          admin user
            using the new 'users' and 'clients' attributes
              can update ACL
            using the legacy 'actors' attribute
              can update ACL
              when client with '.' in name is used in actors hash
                returns 200
            with non-local groups
              can update ACL
          normal user with GRANT permission
            can update ACL
          normal client with GRANT permission
            can update ACL
        POST /environments/<name>/_acl/read
          admin user
            returns 405
        DELETE /environments/<name>/_acl/read
          admin user
            returns 405
      /environments/<name>/_acl/update endpoint
        GET /environments/<name>/_acl/update
          admin user
            returns 405
        PUT /environments/<name>/_acl/update
          admin user
            using the new 'users' and 'clients' attributes
              can update ACL
            using the legacy 'actors' attribute
              can update ACL
              when client with '.' in name is used in actors hash
                returns 200
            with non-local groups
              can update ACL
          normal user with GRANT permission
            can update ACL
          normal client with GRANT permission
            can update ACL
        POST /environments/<name>/_acl/update
          admin user
            returns 405
        DELETE /environments/<name>/_acl/update
          admin user
            returns 405
      /environments/<name>/_acl/delete endpoint
        GET /environments/<name>/_acl/delete
          admin user
            returns 405
        PUT /environments/<name>/_acl/delete
          admin user
            using the new 'users' and 'clients' attributes
              can update ACL
            using the legacy 'actors' attribute
              can update ACL
              when client with '.' in name is used in actors hash
                returns 200
            with non-local groups
              can update ACL
          normal user with GRANT permission
            can update ACL
          normal client with GRANT permission
            can update ACL
        POST /environments/<name>/_acl/delete
          admin user
            returns 405
        DELETE /environments/<name>/_acl/delete
          admin user
            returns 405
      /environments/<name>/_acl/grant endpoint
        GET /environments/<name>/_acl/grant
          admin user
            returns 405
        PUT /environments/<name>/_acl/grant
          admin user
            using the new 'users' and 'clients' attributes
              can update ACL
            using the legacy 'actors' attribute
              can update ACL
              when client with '.' in name is used in actors hash
                returns 200
            with non-local groups
              can update ACL
          normal user with GRANT permission
            can update ACL
          normal client with GRANT permission
            can update ACL
        POST /environments/<name>/_acl/grant
          admin user
            returns 405
        DELETE /environments/<name>/_acl/grant
          admin user
            returns 405
    for cookbooks type
      GET /cookbooks/<name>/_acl
        admin user
          can get object ACL
          can get a granular object ACL
        when normal user granted GRANT permission
          can get object ACL
        when normal client granted GRANT permission
          can get object ACL
      PUT /cookbooks/<name>/_acl
        admin user
          returns 405
      POST /cookbooks/<name>/_acl
        admin user
          returns 405
      DELETE /cookbooks/<name>/_acl
        admin user
          returns 405
      /cookbooks/<name>/_acl/create endpoint
        GET /cookbooks/<name>/_acl/create
          admin user
            returns 405
        PUT /cookbooks/<name>/_acl/create
          admin user
            using the new 'users' and 'clients' attributes
              can update ACL
            using the legacy 'actors' attribute
              can update ACL
              when client with '.' in name is used in actors hash
                returns 200
            with non-local groups
              can update ACL
          normal user with GRANT permission
            can update ACL
          normal client with GRANT permission
            can update ACL
        POST /cookbooks/<name>/_acl/create
          admin user
            returns 405
        DELETE /cookbooks/<name>/_acl/create
          admin user
            returns 405
      /cookbooks/<name>/_acl/read endpoint
        GET /cookbooks/<name>/_acl/read
          admin user
            returns 405
        PUT /cookbooks/<name>/_acl/read
          admin user
            using the new 'users' and 'clients' attributes
              can update ACL
            using the legacy 'actors' attribute
              can update ACL
              when client with '.' in name is used in actors hash
                returns 200
            with non-local groups
              can update ACL
          normal user with GRANT permission
            can update ACL
          normal client with GRANT permission
            can update ACL
        POST /cookbooks/<name>/_acl/read
          admin user
            returns 405
        DELETE /cookbooks/<name>/_acl/read
          admin user
            returns 405
      /cookbooks/<name>/_acl/update endpoint
        GET /cookbooks/<name>/_acl/update
          admin user
            returns 405
        PUT /cookbooks/<name>/_acl/update
          admin user
            using the new 'users' and 'clients' attributes
              can update ACL
            using the legacy 'actors' attribute
              can update ACL
              when client with '.' in name is used in actors hash
                returns 200
            with non-local groups
              can update ACL
          normal user with GRANT permission
            can update ACL
          normal client with GRANT permission
            can update ACL
        POST /cookbooks/<name>/_acl/update
          admin user
            returns 405
        DELETE /cookbooks/<name>/_acl/update
          admin user
            returns 405
      /cookbooks/<name>/_acl/delete endpoint
        GET /cookbooks/<name>/_acl/delete
          admin user
            returns 405
        PUT /cookbooks/<name>/_acl/delete
          admin user
            using the new 'users' and 'clients' attributes
              can update ACL
            using the legacy 'actors' attribute
              can update ACL
              when client with '.' in name is used in actors hash
                returns 200
            with non-local groups
              can update ACL
          normal user with GRANT permission
            can update ACL
          normal client with GRANT permission
            can update ACL
        POST /cookbooks/<name>/_acl/delete
          admin user
            returns 405
        DELETE /cookbooks/<name>/_acl/delete
          admin user
            returns 405
      /cookbooks/<name>/_acl/grant endpoint
        GET /cookbooks/<name>/_acl/grant
          admin user
            returns 405
        PUT /cookbooks/<name>/_acl/grant
          admin user
            using the new 'users' and 'clients' attributes
              can update ACL
            using the legacy 'actors' attribute
              can update ACL
              when client with '.' in name is used in actors hash
                returns 200
            with non-local groups
              can update ACL
          normal user with GRANT permission
            can update ACL
          normal client with GRANT permission
            can update ACL
        POST /cookbooks/<name>/_acl/grant
          admin user
            returns 405
        DELETE /cookbooks/<name>/_acl/grant
          admin user
            returns 405
    for policies type
      GET /policies/<name>/_acl
        admin user
          can get object ACL
          can get a granular object ACL
        when normal user granted GRANT permission
          can get object ACL
        when normal client granted GRANT permission
          can get object ACL
      PUT /policies/<name>/_acl
        admin user
          returns 405
      POST /policies/<name>/_acl
        admin user
          returns 405
      DELETE /policies/<name>/_acl
        admin user
          returns 405
      /policies/<name>/_acl/create endpoint
        GET /policies/<name>/_acl/create
          admin user
            returns 405
        PUT /policies/<name>/_acl/create
          admin user
            using the new 'users' and 'clients' attributes
              can update ACL
            using the legacy 'actors' attribute
              can update ACL
              when client with '.' in name is used in actors hash
                returns 200
            with non-local groups
              can update ACL
          normal user with GRANT permission
            can update ACL
          normal client with GRANT permission
            can update ACL
        POST /policies/<name>/_acl/create
          admin user
            returns 405
        DELETE /policies/<name>/_acl/create
          admin user
            returns 405
      /policies/<name>/_acl/read endpoint
        GET /policies/<name>/_acl/read
          admin user
            returns 405
        PUT /policies/<name>/_acl/read
          admin user
            using the new 'users' and 'clients' attributes
              can update ACL
            using the legacy 'actors' attribute
              can update ACL
              when client with '.' in name is used in actors hash
                returns 200
            with non-local groups
              can update ACL
          normal user with GRANT permission
            can update ACL
          normal client with GRANT permission
            can update ACL
        POST /policies/<name>/_acl/read
          admin user
            returns 405
        DELETE /policies/<name>/_acl/read
          admin user
            returns 405
      /policies/<name>/_acl/update endpoint
        GET /policies/<name>/_acl/update
          admin user
            returns 405
        PUT /policies/<name>/_acl/update
          admin user
            using the new 'users' and 'clients' attributes
              can update ACL
            using the legacy 'actors' attribute
              can update ACL
              when client with '.' in name is used in actors hash
                returns 200
            with non-local groups
              can update ACL
          normal user with GRANT permission
            can update ACL
          normal client with GRANT permission
            can update ACL
        POST /policies/<name>/_acl/update
          admin user
            returns 405
        DELETE /policies/<name>/_acl/update
          admin user
            returns 405
      /policies/<name>/_acl/delete endpoint
        GET /policies/<name>/_acl/delete
          admin user
            returns 405
        PUT /policies/<name>/_acl/delete
          admin user
            using the new 'users' and 'clients' attributes
              can update ACL
            using the legacy 'actors' attribute
              can update ACL
              when client with '.' in name is used in actors hash
                returns 200
            with non-local groups
              can update ACL
          normal user with GRANT permission
            can update ACL
          normal client with GRANT permission
            can update ACL
        POST /policies/<name>/_acl/delete
          admin user
            returns 405
        DELETE /policies/<name>/_acl/delete
          admin user
            returns 405
      /policies/<name>/_acl/grant endpoint
        GET /policies/<name>/_acl/grant
          admin user
            returns 405
        PUT /policies/<name>/_acl/grant
          admin user
            using the new 'users' and 'clients' attributes
              can update ACL
            using the legacy 'actors' attribute
              can update ACL
              when client with '.' in name is used in actors hash
                returns 200
            with non-local groups
              can update ACL
          normal user with GRANT permission
            can update ACL
          normal client with GRANT permission
            can update ACL
        POST /policies/<name>/_acl/grant
          admin user
            returns 405
        DELETE /policies/<name>/_acl/grant
          admin user
            returns 405
    for policy_groups type
      GET /policy_groups/<name>/_acl
        admin user
          can get object ACL
          can get a granular object ACL
        when normal user granted GRANT permission
          can get object ACL
        when normal client granted GRANT permission
          can get object ACL
      PUT /policy_groups/<name>/_acl
        admin user
          returns 405
      POST /policy_groups/<name>/_acl
        admin user
          returns 405
      DELETE /policy_groups/<name>/_acl
        admin user
          returns 405
      /policy_groups/<name>/_acl/create endpoint
        GET /policy_groups/<name>/_acl/create
          admin user
            returns 405
        PUT /policy_groups/<name>/_acl/create
          admin user
            using the new 'users' and 'clients' attributes
              can update ACL
            using the legacy 'actors' attribute
              can update ACL
              when client with '.' in name is used in actors hash
                returns 200
            with non-local groups
              can update ACL
          normal user with GRANT permission
            can update ACL
          normal client with GRANT permission
            can update ACL
        POST /policy_groups/<name>/_acl/create
          admin user
            returns 405
        DELETE /policy_groups/<name>/_acl/create
          admin user
            returns 405
      /policy_groups/<name>/_acl/read endpoint
        GET /policy_groups/<name>/_acl/read
          admin user
            returns 405
        PUT /policy_groups/<name>/_acl/read
          admin user
            using the new 'users' and 'clients' attributes
              can update ACL
            using the legacy 'actors' attribute
              can update ACL
              when client with '.' in name is used in actors hash
                returns 200
            with non-local groups
              can update ACL
          normal user with GRANT permission
            can update ACL
          normal client with GRANT permission
            can update ACL
        POST /policy_groups/<name>/_acl/read
          admin user
            returns 405
        DELETE /policy_groups/<name>/_acl/read
          admin user
            returns 405
      /policy_groups/<name>/_acl/update endpoint
        GET /policy_groups/<name>/_acl/update
          admin user
            returns 405
        PUT /policy_groups/<name>/_acl/update
          admin user
            using the new 'users' and 'clients' attributes
              can update ACL
            using the legacy 'actors' attribute
              can update ACL
              when client with '.' in name is used in actors hash
                returns 200
            with non-local groups
              can update ACL
          normal user with GRANT permission
            can update ACL
          normal client with GRANT permission
            can update ACL
        POST /policy_groups/<name>/_acl/update
          admin user
            returns 405
        DELETE /policy_groups/<name>/_acl/update
          admin user
            returns 405
      /policy_groups/<name>/_acl/delete endpoint
        GET /policy_groups/<name>/_acl/delete
          admin user
            returns 405
        PUT /policy_groups/<name>/_acl/delete
          admin user
            using the new 'users' and 'clients' attributes
              can update ACL
            using the legacy 'actors' attribute
              can update ACL
              when client with '.' in name is used in actors hash
                returns 200
            with non-local groups
              can update ACL
          normal user with GRANT permission
            can update ACL
          normal client with GRANT permission
            can update ACL
        POST /policy_groups/<name>/_acl/delete
          admin user
            returns 405
        DELETE /policy_groups/<name>/_acl/delete
          admin user
            returns 405
      /policy_groups/<name>/_acl/grant endpoint
        GET /policy_groups/<name>/_acl/grant
          admin user
            returns 405
        PUT /policy_groups/<name>/_acl/grant
          admin user
            using the new 'users' and 'clients' attributes
              can update ACL
            using the legacy 'actors' attribute
              can update ACL
              when client with '.' in name is used in actors hash
                returns 200
            with non-local groups
              can update ACL
          normal user with GRANT permission
            can update ACL
          normal client with GRANT permission
            can update ACL
        POST /policy_groups/<name>/_acl/grant
          admin user
            returns 405
        DELETE /policy_groups/<name>/_acl/grant
          admin user
            returns 405

opscode-account containers
  /containers endpoint
    GET /containers
      admin user
        can get containers
      normal user
        can get containers
    POST /containers
      permissions
        admin user
          can create container
      container creation
        when container already exists
          returns 409
        with id instead of container name
          can create container
        with non-matching id and container name
          can create container (id wins)
        with bogus value in request
          can create container (ignores bogus value)
    DELETE /containers
      admin user
        returns 404
    PUT /containers
      admin user
        returns 404
  /containers/<name> endpoint
    GET /containers/<name>
      admin user
        can get container
    DELETE /containers/<name>
      admin user
        can delete container
    PUT /containers/<name>
      is not allowed
    POST /containers/<name>
      admin user
        returns 404

opscode-account groups
  /groups endpoint
    GET /groups
      admin user
        can get groups
      normal user
        can get groups
    POST /groups
      permissions
        admin user
          can create group
      group creation
        when group already exists
          returns 409
        with id instead of group name
          can create group
        with non-matching id and group name
          can create group (id wins)
        with bogus value in request
          can create group (ignores bogus value)
    DELETE /groups
      admin user
        returns 405
    PUT /groups
      admin user
        returns 405
  /groups/<name> endpoint
    GET /groups/<name>
      admin user
        can get group
      normal user
        can get group
      user requesting not existing group(#1284)
        should return 404
      user requesting not existing group acl(#1284)
        should return 404
    DELETE /groups/<name>
      admin user
        can delete group
    PUT /groups/<name>
      permissions
        admin user
          can update group
        admin user can reference global group and other orgs
          can update group
        admin user cannot remove self from group
          can update group (PENDING: pending discussion)
        normal user with update ACE
          can update group
        normal user with update ACE cannot remove self
          can update group (PENDING: pending discussion)
      updating groups
        with different group name
          will rename group
          will not overwrite existing group
        with only user change
          will update group
        with only client change
          will update group
        with only group change
          will update group
        without groupname
          will update group
        with empty actors
          will not update group (nothing changed)
        with no actors
          will not update group (nothing changed)
    POST /groups/<name>
      admin user
        returns 405

opscode-account endpoint
  Client ACLs
    the initial validator client
      has the appropriate ACLs
    a new validator client
      has the appropriate ACLs
  Admin User Group
    has the appropriate members
  Client Group
    group retrieval
      retrieves the group
    group ACL retrieval
      retrieves the ACL
  Client Container
    retrieves the Clients container
    retrieves the Clients container's ACL
  Client Creation
    by a validator
      creates a new non-validator client
      has the validator removed from the new client's ACL
      puts the new client into the 'clients' group
      a new validator should have read / create permissions on clients container (PENDING: No reason given)

Client API endpoint
  GET /clients
    as an admin user
      with an operational server
        should respond with 200 OK
      with only Pedant-created clients
        should respond with 200 OK and the Pedant-created clients
  POST /clients
    when validating
      when setting public_key
        should respond with 201 Created and create the client
        without a public key
          should respond with 200 OK and generates a new keypair
        with nil for a public key
          should respond with 200 OK and generates a new keypair
    valid requests of various types to create a client
      with a valid name
        like 'pedanttestingclient'
          should respond with 201 Created
        like 'pedanttestingclient123'
          should respond with 201 Created
        like 'pedant_testing_client'
          should respond with 201 Created
        like 'pedant.testing.client'
          should respond with 201 Created
    creation of an existing client
      should respond with 409 Conflict
  GET /clients/<name>
    without an existing client
      should respond with 404 Not Found
    with an existing client
      as an org admin
        with another validator client
          should respond with 200 OK
        with another normal client
          should respond with 200 OK
      as a normal client
        with self
          should respond with 200 OK
      as a user
        with another validator client
          should respond with 200 OK
        with another normal client
          should respond with 200 OK
  PUT /clients/<name>
    modifying a non-existent client
      should respond with 404 Not Found
    as an admin requestor
      RSpec::ExampleGroups::ClientAPIEndpoint::PUTClientsName::AsAnAdminRequestor::AdminUpdatesToValidatorClientAppearToBeMisbehavingOrMisconfigured (PENDING: No reason given)
      with another normal client
        when updating to a normal client
          should respond with 200 OK
        when updating to a validator client
          should respond with 200 OK
        when renaming client
          to an unclaimed name
            should respond with 201 Created and rename the client
          to an existing name
            should respond with 409 Conflict and does not rename the client
        when generating key pairs
          with private_key set to true
            should respond with 200 OK and generate a new key pair
          with private_key set to false
            should respond with 200 OK and does not generate a new key pair
          without a private_key
            should respond with 200 OK and does not generate a new key pair
        when updating public_key
          should respond with 200 OK and update the public key
          without a public key
            should respond with 200 OK and does not update the public key
          with nil for the public key
            should respond with 200 OK and does not update the public key
    as a normal client
      with self
        normal clients should not be able to upgrade themselves to validator - are we testing what we think we are? (PENDING: No reason given)
        when updating to a normal client
          should respond with 200 OK
        when renaming client
          to an unclaimed name
            should respond with 201 Created and rename the client
          to an existing name
            should respond with 409 Conflict and does not rename the client
        when generating key pairs
          with private_key set to true
            should respond with 200 OK and generate a new key pair
          with private_key set to false
            should respond with 200 OK and does not generate a new key pair
          without a private_key
            should respond with 200 OK and does not generate a new key pair
        when updating public_key
          should respond with 200 OK and update the public key
          without a public key
            should respond with 200 OK and does not update the public key
          with nil for the public key
            should respond with 200 OK and does not update the public key
  DELETE /clients/<name>
    without an existing client
      should respond with 404 Not Found
    as an org admin
      with another validator client
        should respond with 200 OK
      with another normal client
        should respond with 200 OK
    as a normal client
      with self
        should respond with 200 OK

Compliance Proxy Tests
  Compliance Proxy Tests disabled since config.compliance_proxy_tests = false

Controls API Endpoint
  when actions is disabled
    a POST to controls endpoint returns 410
    a GET to controls endpoint returns 410

Cookbook Artifacts API endpoint
  PUT /cookbook_artifacts/<name>/<version> [create]
    with a basic cookbook
      creates a basic cookbook_artifact
    when validating
      the cookbook version
        with versions at exactly 4 bytes
          should respond with 201 Created
        with versions larger than 4 bytes
          should respond with 201 Created
        with versions with 'prerelease' fields
          should respond with 201 Created
    creating good cookbook_artifacts to test defaults
      allows override of defaults
  PUT multiple cookbook_artifacts
    allows us to create 2 revisions of the same cookbook

Cookbook Artifacts API endpoint
  DELETE /cookbook_artifacts/<name>/<version>
    for non-existent cookbooks
      returns 404
      with bad identifier
        returns 404
    for existing cookbooks
      when deleting non-existent version of an existing cookbook
        should respond with 404 ("Not Found") and not delete existing versions
      when deleting existent version of an existing cookbook
        should cleanup unused checksum data in s3/bookshelf
    with permissions for
      as admin user
        should respond with 200 ("OK") and be deleted

Cookbook Artifacts API endpoint
  GET /cookbook_artifacts
    with no cookbook artifacts on the server
      responds with 200
    with existing cookbook_artifacts and multiple versions
      should respond with a cookbook collection containing all versions of each cookbook
  GET /cookbook_artifacts/<name>/<version>
    as a normal user
      returns a 200 response
      returns valid file URLs
    as an admin user
      returns a 200 response
      returns valid file URLs

Cookbook Artifacts API endpoint
  PUT /cookbook_artifacts/<name>/<version> [update]
    as admin user
      should respond with 409 Conflict

Cookbooks API endpoint
  PUT /cookbooks/<name>/<version> [create]
    with a basic cookbook
      creates a basic cookbook
    when validating
      the 'json_class' field
        when passing valid value "Chef::CookbookVersion"
          should respond with 201 Created and persist the resource
      the cookbook version
        with versions at exactly 4 bytes
          should respond with 201 Created
        with versions larger than 4 bytes
          should respond with 201 Created
    creating good cookbooks to test defaults
      allows creation of a minimal cookbook with no data
      allows override of defaults
  PUT multiple cookbooks
    allows us to create 2 versions of the same cookbook

Cookbooks API endpoint
  DELETE /cookbooks/<name>/<version>
    for non-existent cookbooks
      should respond with 404 Not Found
    for existing cookbooks
      when deleting non-existent version of an existing cookbook
        should respond with 404 ("Not Found") and not delete existing versions
      when deleting existent version of an existing cookbook
        should cleanup unused checksum data in s3/bookshelf
    with permissions for
      as admin user
        should respond with 200 ("OK") and be deleted

Cookbooks API endpoint, named filters
  with no cookbooks
    when requesting /cookbooks/_latest
      should respond with the 'latest' cookbooks
    when requesting /cookbooks/_recipes
      shows the recipes from the latest cookbooks
    when requesting /cookbooks/my_cookbook
      should respond with 404
  with one cookbook, one version
    when requesting /cookbooks/_latest
      should respond with the 'latest' cookbooks
    when requesting /cookbooks/_recipes
      shows the recipes from the latest cookbooks
    when requesting /cookbooks/my_cookbook
      should respond with the 'named' cookbook
  with different cookbook, one version
    when requesting /cookbooks/_latest
      should respond with the 'latest' cookbooks
    when requesting /cookbooks/_recipes
      shows the recipes from the latest cookbooks
    when requesting /cookbooks/my_cookbook
      should respond with 404
  with multiple cookbooks, one version each
    when requesting /cookbooks/_latest
      should respond with the 'latest' cookbooks
    when requesting /cookbooks/_recipes
      shows the recipes from the latest cookbooks
    when requesting /cookbooks/my_cookbook
      should respond with the 'named' cookbook
  with multiple cookbooks, multiple versions each
    when requesting /cookbooks/_latest
      should respond with the 'latest' cookbooks
    when requesting /cookbooks/_recipes
      shows the recipes from the latest cookbooks
    when requesting /cookbooks/my_cookbook
      should respond with the 'named' cookbook

Cookbooks API endpoint
  GET /cookbooks
    with an operational server
      should respond with 200 OK
    without existing cookbooks
      should respond with 200 OK and an empty collection
    with existing cookbooks and multiple versions
      with num_versions set to 0
        should respond with cookbook collection with no version
      when num_versions is not set
        should return cookbook collection with one version per cookbook
      when num_versions is set to 1
        should return cookbook collection with one version per cookbook
      when num_versions is set to "all"
        should respond with a cookbook collection containing all versions of each cookbook
    with varying numbers of existing cookbooks
      with a single, existing cookbook
        should respond with a single cookbook in the collection
      with multiple, existing cookbooks
        multiple cookbooks can be listed
  GET /cookbooks/<name>/<version>
    as a normal user
      should respond with 200 OK
      allows access to cookbook recipe files via
        net/http
    as an admin user
      should respond with 200 OK

Cookbooks API endpoint
  PUT /cookbooks/<name>/<version> [update]
    as admin user
      should respond with 200 Ok
    for checksums
      adding all new checksums should succeed
      should return url when adding checksums
      deleting all checksums should succeed
      deleting some checksums should succeed
      changing all different checksums should succeed
      changing some different checksums should succeed
      CHEF-3716 coverage
        it does not delete checksums in use by another version
    for frozen?
      can set frozen? to true
      can not edit cookbook when frozen? is set to true
      can override frozen? with force set to true
      can not override frozen? with force set to false
    when modifying data
      for json_class
        json_class = delete returns 200
      for chef_type
        chef_type = delete returns 200
      for version
        version = delete returns 200
      for collections
        for attributes
          attributes = [] returns 200
        for definitions
          definitions = [] returns 200
        for files
          files = [] returns 200
        for libraries
          libraries = [] returns 200
        for providers
          providers = [] returns 200
        for recipes
          recipes = [] returns 200
        for resources
          resources = [] returns 200
        for root_files
          root_files = [] returns 200
        for templates
          templates = [] returns 200
      for other stuff
        frozen? = true returns 200
    when modifying metadata
      for name
        name = delete returns 200
      for description
        description = new description returns 200
        description = delete returns 200
      for long description
        long_description = longer description returns 200
        long_description = delete returns 200
      for maintainer
        maintainer = Captain Stupendous returns 200
        maintainer = delete returns 200
        maintainer_email = cap@awesome.com returns 200
        maintainer_email = not really an email returns 200
        maintainer_email = delete returns 200
      for license
        license = to_kill returns 200
        license = delete returns 200
      for collections
        for platforms
          platforms = {} returns 200
          platforms = delete returns 200
        with metadata.providing
          when providing is set to cats::sleep
            providing = cats::sleep returns 200
          when providing is set to here(:kitty, :time_to_eat)
            providing = here(:kitty, :time_to_eat) returns 200
          when providing is set to service[snuggle]
            providing = service[snuggle] returns 200
          when providing is set to
            providing =  returns 200
          when providing is set to 1
            providing = 1 returns 200
          when providing is set to true
            providing = true returns 200
          when providing is set to ["cats", "sleep", "here"]
            providing = ["cats", "sleep", "here"] returns 200
          when providing is set to {"cats::sleep"=>"0.0.1", "here(:kitty, :time_to_eat)"=>"0.0.1", "service[snuggle]"=>"0.0.1"}
            providing = {"cats::sleep"=>"0.0.1", "here(:kitty, :time_to_eat)"=>"0.0.1", "service[snuggle]"=>"0.0.1"} returns 200
        for dependencies
          dependencies = {} returns 200
          dependencies = delete returns 200

Cookbook Versions API endpoint, GET
  with no cookbooks on the server
    should respond with 404 Not Found
  with cookbooks on the server
    when fetching existing version of cookbook
      should respond with 200 OK and the cookbook version
    when fetching non-existant version of cookbook
      should respond with 404 Not Found
    as a non-admin user
      should respond with 200 OK and the cookbook version
    when requesting the 'latest' Cookbook version
      should respond with 200 OK and the latest cookbook version
    when requesting the 'latest' version of a non-existent cookbook
      should respond with 404 Not Found

Cookbooks API endpoint
  DELETE /cookbooks/<name>/<version>
    with delete cookbook authorization
      as an authorized, normal user
        should respond with 200 ("OK")

Data Bag API endpoint
  with no data bags
    a request to /data
      GET
        returns an empty list of data bags
      POST
        with a canonical payload
          behaves like a successful data bag POST
            returns success
            creates the data bag
        valid requests of various types to create a data bag
          with a valid name
            like 'pedant'
              behaves like a successful data bag POST
                returns success
                creates the data bag
            like 'pedant-bag'
              behaves like a successful data bag POST
                returns success
                creates the data bag
            like 'pedant_bag'
              behaves like a successful data bag POST
                returns success
                creates the data bag
            like 'pedant_bag-foo'
              behaves like a successful data bag POST
                returns success
                creates the data bag
            like '1234567890'
              behaves like a successful data bag POST
                returns success
                creates the data bag
            like 'pedant99'
              behaves like a successful data bag POST
                returns success
                creates the data bag
            like 'pedant:with:colons'
              behaves like a successful data bag POST
                returns success
                creates the data bag
            like 'pedant.with.dots'
              behaves like a successful data bag POST
                returns success
                creates the data bag
          missing certain keys
            without a 'json_class' key
              behaves like a successful data bag POST
                returns success
                creates the data bag
            without a 'chef_type' key
              behaves like a successful data bag POST
                returns success
                creates the data bag
          with just a name
            behaves like a successful data bag POST
              returns success
              creates the data bag
          with an incorrect 'chef_type' key
            does not have the correct chef_type key
            behaves like a successful data bag POST
              returns success
              creates the data bag
          with an incorrect 'json_class' key
            does not have the correct json_class key
            behaves like a successful data bag POST
              returns success
              creates the data bag
      PUT
        is not allowed
      DELETE
        is not allowed
    a request to /data/<bag>
      GET
        fails because there is no bag
      POST
        fails because there is no bag
      PUT
        is not allowed
      DELETE
        fails because there is no bag
    a request to /data/<bag>/<item>
      GET
        fails because there is no bag
      POST
        is not allowed
      PUT
        fails because there is no bag
      DELETE
        fails because there is no bag
  with data bags
    that have no items
      a request to /data
        GET
          returns a non-empty list of data bags
        POST
          raises a conflict when creating an existing data bag
      a request to /data/<bag>
        GET
          returns an empty bag
        POST
          various good inputs to create a data bag item
            with JUST an ID
              behaves like a successful data bag item POST
                returns success
                creates the resource
            with a good ID
              like 'pedantitem'
                behaves like a successful data bag item POST
                  returns success
                  creates the resource
              like 'pedant_item'
                behaves like a successful data bag item POST
                  returns success
                  creates the resource
              like 'pedant-item'
                behaves like a successful data bag item POST
                  returns success
                  creates the resource
              like 'pedant-123-item'
                behaves like a successful data bag item POST
                  returns success
                  creates the resource
              like 'pedant:item'
                behaves like a successful data bag item POST
                  returns success
                  creates the resource
              like 'pedant.item'
                behaves like a successful data bag item POST
                  returns success
                  creates the resource
        DELETE
          deletes the data bag
      a request to /data/<bag>/<item>
        GET
          fails because there is no item
        PUT
          fails because there is no item
        DELETE
          fails because there is no item
    that have items
      a request to /data
        GET
          returns the same non-empty list of data bags
      a request to /data/<bag>
        GET
          shows a full data bag
        POST
          raises a conflict when creating an existing data bag item
        DELETE
          deletes a bag AND ALL THE ITEMS
      a request to /data/<bag>/<item>
        GET
          shows the complete item
        PUT
          with various correct inputs to update a data bag item
            with normal input
              behaves like a successful data bag item PUT
                returns success
                updates the data bag item
            with no ID in the update body
              successfully updates (using ID from the URL)
          with various incorrect inputs to update a data bag item
            to an item with a different id
              should have a different id
        DELETE
          deletes the item

Depsolver API endpoint
  POST /environments/:env/cookbook_versions
    empty and error cases
      returns 404 with an invalid environment
      returns 200 with an empty run_list
      returns 412 with a non-existent cookbook in _default environment
      returns 412 with a non-existent cookbook
      returns 412 with an existing cookbook filtered out by environment
      returns 412 and both cookbooks with more than one non-existent cookbook
      returns 412 when there is a runlist entry specifying version that doesn't exist
      returns 412 and both errors non-existent and no versions cookbooks
    dependency error cases (one cookbook)
      returns 412 when there is a dep that doesn't exist
    dependency error cases (two cookbooks)
      returns 412 and both entries when there are runlist entries specifying versions that don't exist
      returns 412 when there is a dep that doesn't have new enough version
      returns 412 when there is an impossible dependency
    success cases
      returns 200 with a minimal good cookbook
      CHEF-3813: Return cookbook dependency metadata when a cookbook has dependencies
        returns dependencies
      with datestamps in cookbooks and environments
        returns the correct solution

/environments/ENVIRONMENT/cookbooks API endpoint
  with no cookbooks
    when fetching cookbooks from "_default" environment
      should respond with 200 OK and no cookbooks
    when environment does not exist
      should respond with 404 Not Found
    when fetching cookbooks
      should respond with 200 OK and no cookbooks
    when fetching cookbooks with num_version=all
      should respond with 200 OK and no cookbooks
    when fetching cookbooks with num_version=0
      should respond with 200 OK and no cookbooks
    when fetching cookbooks with num_version=1
      should respond with 200 OK and no cookbooks
    when fetching cookbooks with num_version=2
      should respond with 200 OK and no cookbooks
    when fetching cookbooks with num_version=30
      should respond with 200 OK and no cookbooks
  with multiple versions of multiple cookbooks
    with no environment constraints
      from a non-default environment
        when fetching cookbooks
          should respond with 200 OK and latest versions of ALL cookbooks
        when fetching cookbooks with num_version=all
          should respond with 200 OK and all latest versions of cookbooks
        when fetching cookbooks with num_version=1
          should respond with 200 OK and 1 latest versions of cookbooks
        when fetching cookbooks with num_version=2
          should respond with 200 OK and 2 latest versions of cookbooks
        when fetching cookbooks with num_version=3
          should respond with 200 OK and 3 latest versions of cookbooks
        when fetching cookbooks with num_version=30
          should respond with 200 OK and 30 latest versions of cookbooks
      from the _default environment
        when fetching cookbooks in the _default environment
          should respond with 200 OK and latest versions of ALL cookbooks
        when fetching cookbooks with num_version=all
          should respond with 200 OK and all latest versions of cookbooks
        when fetching cookbooks with num_version=1
          should respond with 200 OK and 1 latest versions of cookbooks
        when fetching cookbooks with num_version=2
          should respond with 200 OK and 2 latest versions of cookbooks
        when fetching cookbooks with num_version=3
          should respond with 200 OK and 3 latest versions of cookbooks
        when fetching cookbooks with num_version=30
          should respond with 200 OK and 30 latest versions of cookbooks
    with environment constraints
      with constraints {"pedant_cb_one"=>"= 1.0.0"}
        retrieves appropriate cookbooks
      with constraints {"pedant_cb_one"=>"> 1.0.0"}
        retrieves appropriate cookbooks
      with constraints {"pedant_cb_one"=>"> 1.0.0"}
        retrieves appropriate cookbooks with num_versions=2
      with constraints {"pedant_cb_one"=>"> 1.0.0"}
        retrieves appropriate cookbooks with num_versions=0
      with constraints {"pedant_cb_one"=>"> 1.0.0", "pedant_cb_two"=>"< 1.2.3"}
        retrieves appropriate cookbooks with num_versions=2
      with constraints {"pedant_cb_one"=>"> 1.0.0", "pedant_cb_two"=>"< 1.2.3"}
        retrieves appropriate cookbooks with num_versions=all

Environments API Endpoint
  POST /environments
    with no additional environments
      when creating a valid environment
        should respond with 201 Created and a correct path
        should persist the environment
      when handling the payload
        with authentication headers
          when X-Ops-Request-Source is web
            impersonating successful user
              succeeds
          with other successful user
            succeeds
        when unable to accept application/json
          should respond with 406 Not Acceptable
        when sending something other than application/json
          webmachine not sucking (PENDING: No reason given)
      when creating another "_default" environment
        should respond with 409 Conflict
      when validating
        with weird environment name
          should respond with 201 Created and the environment url
        for description
          with description = delete it succeeds
          with description =  it succeeds
          with description = normal text it succeeds
          with description = これは日本語だ it succeeds
          with description = Hello 日本! it succeeds
        for json_class
          with json_class = Chef::Environment it succeeds
          with json_class = delete it succeeds
        for chef_type
          with chef_type = environment it succeeds
          with chef_type = delete it succeeds
        for default_attributes
          with default_attributes = delete it succeeds
          with default_attributes = {} it succeeds
          with default_attributes = {"key1"=>"value1", "key2"=>"value2"} it succeeds
          for keys
            with default_attributes = {"key"=>"value"} it succeeds
            with default_attributes = {"鍵"=>"value"} it succeeds
            with default_attributes = {""=>"value"} it succeeds
          for values
            with default_attributes = {"key"=>""} it succeeds
            with default_attributes = {"key"=>nil} it succeeds
            with default_attributes = {"key"=>99} it succeeds
            with default_attributes = {"key"=>"値"} it succeeds
        for override_attributes
          with override_attributes = delete it succeeds
          with override_attributes = {} it succeeds
          with override_attributes = {"key1"=>"value1", "key2"=>"value2"} it succeeds
          for keys
            with override_attributes = {"key"=>"value"} it succeeds
            with override_attributes = {"鍵"=>"value"} it succeeds
            with override_attributes = {""=>"value"} it succeeds
          for values
            with override_attributes = {"key"=>""} it succeeds
            with override_attributes = {"key"=>nil} it succeeds
            with override_attributes = {"key"=>99} it succeeds
            with override_attributes = {"key"=>"値"} it succeeds
        for cookbooks
          with cookbook_versions = delete it succeeds
          with cookbook_versions = {} it succeeds
          for cookbook names
            with cookbook_versions = {"cookbook"=>">= 1.0.0"} it succeeds
          for versions
            with cookbook_versions = {"cookbook"=>">= 1.0.0"} it succeeds
            with cookbook_versions = {"cookbook"=>">= 1.0"} it succeeds
            with cookbook_versions = {"cookbook"=>"<= 1.0.0"} it succeeds
            with cookbook_versions = {"cookbook"=>"> 1.0.0"} it succeeds
            with cookbook_versions = {"cookbook"=>"< 1.0.0"} it succeeds
            with cookbook_versions = {"cookbook"=>"= 1.0.0"} it succeeds
            with cookbook_versions = {"cookbook"=>"~> 1.0.0"} it succeeds
            with cookbook_versions = {"cookbook"=>"1.0.0"} it succeeds
            with cookbook_versions = {"cookbook"=>">= 1.2.20130730201745"} it succeeds
            with cookbook_versions = {"cookbook"=>">= 1.2.2147483647"} it succeeds
            with cookbook_versions = {"cookbook"=>">= 1.2.2147483669"} it succeeds
      when creating an environment without json_class
        should respond with 201 Created and a correct path
        should persist the environment
    with non-default environments
      with the same name as another non-default environment
        should respond with 409 Conflict

Environments API Endpoint
  POST /environments
    with no additional environments
      when handling the payload (PENDING: No reason given)
      permissions
        with an admin user
          should respond with 201 Created and a correct path
          should persist the environment
        with a normal user
          should respond with 201 Created and a correct path
          should persist the environment
        with a user with minimal permissions to create /environments
          should respond with 201 Created and a correct path
          should persist the environment
          should create a child with restricted permissions

Environments API Endpoint
  with no additional environments
    DELETE /environments
      should respond with 405 Method Not Allowed
    DELETE /environments/<name>
      with "_default" environment
        should respond with 405 Method Not Allowed
      with non-existent environment
        should respond with 404 Not Found
  with non-default environments in the organization
    DELETE /environments/<name>
      when authenticating
        when X-Ops-Request-Source is web
          impersonating successful user
            succeeds
        with other successful user
          succeeds
      with an existing environment
        should respond with 200 OK
      without an existing environment
        should respond with 404 Not Found
      when attempting to delete "_default" environment
        should respond with 405 Method Not Allowed

Environments API Endpoint
  with non-default environments in the organization
    DELETE /environments/<name>
      permissions
        as an admin user
          should respond with 200 OK and the deleted environment
          should delete the environment
        as a normal user
          should respond with 200 OK and the deleted environment
          should delete the environment
        with a user with minimal permissions to delete /environments/<name>
          should respond with 200 OK and the deleted environment
          should delete the environment
      when the organization does not exist
        should respond with 404 Not Found

Environments API Endpoint
  GET /environments
    with an operational server
      should respond with 200 OK
    with no additional environments
      should respond with 200 OK
      should respond to cookbook versions (PENDING: Not yet implemented)
      with a non-existant environment
        should respond with 404 Not Found
    with non-default environments
      should respond with 200 OK and an index of all the available environments
  GET /environments/_default
    with an operational server
      should respond with 200 OK
    with a newly installed server
      should respond with 200 OK and the default environment
  GET /environments/<name>
    with an existing environment
      should respond with 200 OK and the environment
    when handling authentication headers
      when X-Ops-Request-Source is web
        impersonating successful user
          succeeds
      with other successful user
        succeeds
    when the environment does not exist
      should respond with 404 Not Found
  search
    can be searched for by name
    can be searched for by description
    can be searched for by JSON class
    can be searched for by cookbook versions
    can be searched for by chef type
    can be searched for by default attribute
    can be searched for by override attribute

Environments API Endpoint
  GET
    with no additional environments
      should respond to cookbook versions (PENDING: Not yet implemented)
      GET /environments
        should respond with 200 OK
      GET /environments/_default
        should respond with 200 OK and the default environment
      with a non-existant environment
        should respond with 404 Not Found
    with non-default environments
      GET /environments
        permissions
          with an admin user
            GET /environments succeeds
          with a normal user
            GET /environments succeeds
          with a user with minimal permissions to read /environments
            GET /environments succeeds
          with a client
            GET /environments succeeds
      GET /environments/<name>
        permissions
          with an admin user
            should respond with 200 OK
          with a normal user
            should respond with 200 OK
          with a user with minimal permissions to read /environments
            should respond with 200 OK
          with a client
            should respond with 200 OK
        when the organization does not exist
          should respond with 404 Not Found
        when the environment does not exist
          should respond with 404 Not Found

/environments/ENVIRONMENT/recipes API endpoint
  with no cookbooks
    when environment does not exist
      should respond with 404 Not Found
    when fetching recipes
      should respond with 200 OK and no recipes
    when fetching recipes from _default environment
      should respond with 200 OK and no recipes
  with multiple versions of multiple cookbooks
    with no environment constraints
      when fetching recipes from a non-default environment
        should respond with 200 OK and recipes from the latest version of all cookbooks within the environment
      when fetching recipes from _default environment
        should respond with 200 OK and recipes from the latest version of all cookbooks within the environment
    with environment constraints
      with constraints {"pedant_cb_one"=>"= 1.0.0"}
        retrieves appropriate recipes
      with constraints {"pedant_cb_one"=>"< 2.5.0"}
        retrieves appropriate recipes
      with constraints {"pedant_cb_one"=>"< 2.5.0", "pedant_cb_two"=>"= 1.0.0"}
        retrieves appropriate recipes
      with constraints {"pedant_cb_one"=>"= 6.6.6", "pedant_cb_two"=>"= 6.6.6", "pedant_cb_three"=>"= 6.6.6"}
        retrieves appropriate recipes

Environments API Endpoint
  GET /environments/<name>/roles
    within the default environment
      with an existing role
        should respond with 200 OK
      without an existing role
        should respond with 404 Not Found
    within a non-default environment
      with an existing role
        should respond with 200 OK and the role
      with non-existent environment
        should respond with 404 Not Found
      with existing role in different existing environment
        should respond with 404 Not Found

/environments/ENVIRONMENT/cookbooks/COOKBOOK API endpoint
  with no cookbooks
    fails if the environment does not exist
    does not find a non-existent cookbook in the 'test_env' cookbook
    does not find a non-existent cookbook in the '_default' cookbook
  with multiple versions of multiple cookbooks
    with no environment constraints
      returns all acceptable cookbook version(s) of cb_one from the 'test_env' environment when num_versions is not specified
      returns 1 acceptable cookbook version(s) of cb_one from the 'test_env' environment
      returns 2 acceptable cookbook version(s) of cb_one from the 'test_env' environment
      returns 3 acceptable cookbook version(s) of cb_one from the 'test_env' environment
      returns 30 acceptable cookbook version(s) of cb_one from the 'test_env' environment
      returns all acceptable cookbook version(s) of cb_one from the 'test_env' environment
      returns all acceptable cookbook version(s) of cb_two from the 'test_env' environment when num_versions is not specified
      returns 1 acceptable cookbook version(s) of cb_two from the 'test_env' environment
      returns 2 acceptable cookbook version(s) of cb_two from the 'test_env' environment
      returns 3 acceptable cookbook version(s) of cb_two from the 'test_env' environment
      returns 30 acceptable cookbook version(s) of cb_two from the 'test_env' environment
      returns all acceptable cookbook version(s) of cb_two from the 'test_env' environment
      returns all acceptable cookbook version(s) of cb_three from the 'test_env' environment when num_versions is not specified
      returns 1 acceptable cookbook version(s) of cb_three from the 'test_env' environment
      returns 2 acceptable cookbook version(s) of cb_three from the 'test_env' environment
      returns 3 acceptable cookbook version(s) of cb_three from the 'test_env' environment
      returns 30 acceptable cookbook version(s) of cb_three from the 'test_env' environment
      returns all acceptable cookbook version(s) of cb_three from the 'test_env' environment
      returns all acceptable cookbook version(s) of cb_one from the '_default' environment when num_versions is not specified
      returns 1 acceptable cookbook version(s) of cb_one from the '_default' environment
      returns 2 acceptable cookbook version(s) of cb_one from the '_default' environment
      returns 3 acceptable cookbook version(s) of cb_one from the '_default' environment
      returns 30 acceptable cookbook version(s) of cb_one from the '_default' environment
      returns all acceptable cookbook version(s) of cb_one from the '_default' environment
      returns all acceptable cookbook version(s) of cb_two from the '_default' environment when num_versions is not specified
      returns 1 acceptable cookbook version(s) of cb_two from the '_default' environment
      returns 2 acceptable cookbook version(s) of cb_two from the '_default' environment
      returns 3 acceptable cookbook version(s) of cb_two from the '_default' environment
      returns 30 acceptable cookbook version(s) of cb_two from the '_default' environment
      returns all acceptable cookbook version(s) of cb_two from the '_default' environment
      returns all acceptable cookbook version(s) of cb_three from the '_default' environment when num_versions is not specified
      returns 1 acceptable cookbook version(s) of cb_three from the '_default' environment
      returns 2 acceptable cookbook version(s) of cb_three from the '_default' environment
      returns 3 acceptable cookbook version(s) of cb_three from the '_default' environment
      returns 30 acceptable cookbook version(s) of cb_three from the '_default' environment
      returns all acceptable cookbook version(s) of cb_three from the '_default' environment
    with environment constraints
      with constraints {"cb_one"=>"= 1.0.0"}
        retrieves appropriate cookbook versions of 'cb_one' with num_versions=1
        retrieves appropriate cookbook versions of 'cb_one' with num_versions=2
        retrieves appropriate cookbook versions of 'cb_one' with num_versions=3
        retrieves appropriate cookbook versions of 'cb_one' with num_versions=all
        retrieves all appropriate cookbook versions of 'cb_one' without 'num_versions'
      with constraints {"cb_one"=>"> 1.0.0"}
        retrieves appropriate cookbook versions of 'cb_one' with num_versions=1
        retrieves appropriate cookbook versions of 'cb_one' with num_versions=2
        retrieves appropriate cookbook versions of 'cb_one' with num_versions=3
        retrieves appropriate cookbook versions of 'cb_one' with num_versions=all
        retrieves all appropriate cookbook versions of 'cb_one' without 'num_versions'
      with constraints {"cb_one"=>"= 6.6.6"}
        retrieves appropriate cookbook versions of 'cb_one' with num_versions=1
        retrieves appropriate cookbook versions of 'cb_one' with num_versions=2
        retrieves appropriate cookbook versions of 'cb_one' with num_versions=3
        retrieves appropriate cookbook versions of 'cb_one' with num_versions=all
        retrieves all appropriate cookbook versions of 'cb_one' without 'num_versions'
      with constraints {"cb_three"=>"~> 0.5"}
        retrieves appropriate cookbook versions of 'cb_three' with num_versions=1
        retrieves appropriate cookbook versions of 'cb_three' with num_versions=2
        retrieves appropriate cookbook versions of 'cb_three' with num_versions=3
        retrieves appropriate cookbook versions of 'cb_three' with num_versions=all
        retrieves all appropriate cookbook versions of 'cb_three' without 'num_versions'

Environments API Endpoint
  with no additional environments
    PUT /environments
      should respond with 405 Method Not Allowed
    PUT /environments/<name>
      with a non-existent environment
        should respond with 404 Not Found
      when updating the "_default" environment
        should respond with 404 Not Found
  with non-default environments in the organization
    PUT /environments/<name>
      with a valid update
        should respond with 200 OK
      when handling request headers and payload
        with authentication headers
          when X-Ops-Request-Source is web
            impersonating successful user
              succeeds
          with other successful user
            succeeds
        when unable to accept application/json
          should respond with 406 Not Acceptable
        when sending something other than application/json
          webmachine not sucking (PENDING: No reason given)
      when validating
        for description
          with description = delete it succeeds
          with description =  it succeeds
          with description = normal text it succeeds
          with description = これは日本語だ it succeeds
          with description = Hello 日本! it succeeds
        for json_class
          with json_class = Chef::Environment it succeeds
          with json_class = delete it succeeds
        for chef_type
          with chef_type = environment it succeeds
          with chef_type = delete it succeeds
        for default_attributes
          with default_attributes = delete it succeeds
          with default_attributes = {} it succeeds
          with default_attributes = {"key1"=>"value1", "key2"=>"value2"} it succeeds
          for keys
            with default_attributes = {"key"=>"value"} it succeeds
            with default_attributes = {"鍵"=>"value"} it succeeds
            with default_attributes = {""=>"value"} it succeeds
          for values
            with default_attributes = {"key"=>""} it succeeds
            with default_attributes = {"key"=>nil} it succeeds
            with default_attributes = {"key"=>99} it succeeds
            with default_attributes = {"key"=>"値"} it succeeds
        for override_attributes
          with override_attributes = delete it succeeds
          with override_attributes = {} it succeeds
          with override_attributes = {"key1"=>"value1", "key2"=>"value2"} it succeeds
          for keys
            with override_attributes = {"key"=>"value"} it succeeds
            with override_attributes = {"鍵"=>"value"} it succeeds
            with override_attributes = {""=>"value"} it succeeds
          for values
            with override_attributes = {"key"=>""} it succeeds
            with override_attributes = {"key"=>nil} it succeeds
            with override_attributes = {"key"=>99} it succeeds
            with override_attributes = {"key"=>"値"} it succeeds
        for cookbooks
          with cookbook_versions = delete it succeeds
          with cookbook_versions = {} it succeeds
          for cookbook names
            with cookbook_versions = {"cookbook"=>">= 1.0.0"} it succeeds
          for versions
            with cookbook_versions = {"cookbook"=>">= 1.0.0"} it succeeds
            with cookbook_versions = {"cookbook"=>">= 1.0"} it succeeds
            with cookbook_versions = {"cookbook"=>"<= 1.0.0"} it succeeds
            with cookbook_versions = {"cookbook"=>"> 1.0.0"} it succeeds
            with cookbook_versions = {"cookbook"=>"< 1.0.0"} it succeeds
            with cookbook_versions = {"cookbook"=>"= 1.0.0"} it succeeds
            with cookbook_versions = {"cookbook"=>"~> 1.0.0"} it succeeds
            with cookbook_versions = {"cookbook"=>"1.0.0"} it succeeds
            with cookbook_versions = {"cookbook"=>">= 1.2.20130730201745"} it succeeds
            with cookbook_versions = {"cookbook"=>">= 1.2.2147483647"} it succeeds
            with cookbook_versions = {"cookbook"=>">= 1.2.2147483669"} it succeeds
      when updating a single value
        when updating description = "whooooah"
          should respond with 200 OK and update the environment
        when updating cookbook_versions = {"fork"=>"= 2.2"}
          should respond with 200 OK and update the environment
        when updating json_class = "Chef::Environment"
          should respond with 200 OK and update the environment
        when updating chef_type = "environment"
          should respond with 200 OK and update the environment
        when updating default_attributes = {"arr"=>"yarr"}
          should respond with 200 OK and update the environment
        when updating override_attributes = {"frick"=>"frack"}
          should respond with 200 OK and update the environment
      when updating name
        should respond with 201 Created and the updated environment
        should respond with 201 Created and renames the environment
      when environment already exists
        should respond with 409 Conflict and does not rename environment
      when renaming environment to "_default"
        should respond with 409 Conflict

Environments API Endpoint
  with no additional environments
    PUT /environments/<name>
      with a non-existent organization
        should respond with 404 Not Found
  with non-default environments in the organization
    PUT /environments/<name>
      permissions
        with an admin user
          updates description = blah
        with a normal user
          updates description = blah
        with a user with minimal permissions to update an environment
          updates description = blah

Environments API Endpoint
  access control
    GET /environments/<name>
      returns a 200 ("OK") for admin
      returns a 200 ("OK") for normal user
      returns a 404 ("Not Found") for missing environment for admin
      returns a 404 ("Not Found") for missing environment for normal user
    POST /environments
      returns a 201 ("Created") for normal user
      returns a 201 ("Created") for admin user
      returns a 409 ("Conflict") when trying to recreate existing environment
    PUT /environments/<name>
      returns a 200 ("OK") for admin
      returns a 200 ("OK") for normal user
      returns a 404 ("Not Found") when PUTting missing environment
    DELETE /environments/<name>
      returns a 200 ("OK") as admin
      returns a 200 ("OK") as user
      returns a 404 ("Not Found") when DELETEing missing environment

Groups ACL
  returns expected response when trying to remove the admin group from any grant ACE
    for admins
      returns OK trying to remove grant ace from admins group user superuser
    for clients
      returns OK trying to remove grant ace from clients group user superuser
    for users
      returns OK trying to remove grant ace from users group user superuser
    returns success when trying to remove the admin group from the read ACE (a non-grant ACE)
      for admins
        returns success trying to remove read ace from admins group
      for clients
        returns success trying to remove read ace from clients group
      for users
        returns success trying to remove read ace from users group

Headers
  Request Headers
    X-Chef-Version
      Accepts High Version
    when the server sees header 'X-Forwarded-Host' with multiple hosts
      accepts it
    when the server sees header 'X-Forwarded-For' with multiple hosts
      accepts it
    when the server sees header 'X-Forwarded-Server' with multiple hosts
      accepts it

Client keys endpoint
  when a new client is created via POST /organizations/:org/clients
    should insert a new default keys entry that is retrievable via the keys API
  when a single key exists for a client
    when the key is uploaded via POST /clients
      should authenticate against the single key
  when a key has been generated for a client
    should be able to authenticate with the generated key
  when a key is deleted for a client
    should no longer be returned by the keys API
    should still contain other keys not yet deleted
  when multiple keys exist for a client
    should properly authenticate against either keys
      should properly authenticate against the first key
      should properly authenticate against the second key
  when a client's default key has an expiration date
    and is updated via a PUT to /organizations/:org/clients/:client
      should no longer have an expiration date when queried via the keys API
  when a client key has an expiration date and isn't expired
    should authenticate against the key
  when the default key for a client exists
    should return public_key field returned by GET /organization/:org/clients/:client and from the keys table should be the same
  when a clients's default key is deleted via the keys API
    public field returned by /organizations/:org/clients/:client should be null
    the keys API should not return a key named default
  when a client is updated via PUT but the public_key is omitted
    not modify the public key returned via GET /organizations/:org/clients/:client
    should not clear the default key returned via the keys API
  when a client's default key has already been deleted via the keys API and then re-added via PUT to /organizations/:org/clients/:client
    should be shown in the clients's record via GET of the named client
    should be present in the keys list
    should be able to authenticate with the updated default key
  when the default key is updated for a client via a PUT to /organizations/:org/clients/:client
    when the default key exists
      should update the default key in the keys table
      should no longer contain the old default key
      should return the new key from the /clients endpoint
  when a client is PUT with public_key:null to /organizations/:org/clients/:client
    the key should remain unchanged via GET /organizations/:org/clients/:client
    should leave the default key from the keys API list unmodified for that client
  managing keys
    posting keys
      for a client that doesn't exist it should respond with 404
      behaves like basic keys POST validation
        when a key of the same name already exists
          responds with 409
        when all fields are present and valid
          should create a key with proper response and Location header
          and infinity date is specfied it should still create a key with proper response and Location header
          when 'create_key' is false alongside a public key it should not generate a private key
          when 'create_key' : true is specified in lieu of public key it should generate a new private key and reply with it in the body
    listing key(s)
      when multiple keys are present
        when the superuser is making the request
          it should behave like successful client key get
            when GET /organizations/org/clients/client/keys is called (list keys)
              all keys should be listed with correct expiry indicators
              when GET is called on the URIs that are returned
                should return status 200
            when GET /organizations/org/clients/client/keys/key is called (get single key)
              when it is called for each valid key
                should properly return the default key with valid expiration
                should properly return the first custom key with valid expiration
                should properly return the second custom key with valid expiration
        when a client is a member of the same org is making the request
          it should behave like successful client key get
            when GET /organizations/org/clients/client/keys is called (list keys)
              all keys should be listed with correct expiry indicators
              when GET is called on the URIs that are returned
                should return status 200
            when GET /organizations/org/clients/client/keys/key is called (get single key)
              when it is called for each valid key
                should properly return the default key with valid expiration
                should properly return the first custom key with valid expiration
                should properly return the second custom key with valid expiration
        when multiple clients exist
          when the first client is making requests with an unmodified public_key_read_access group
            it should behave like successful client key get
              when GET /organizations/org/clients/client/keys is called (list keys)
                all keys should be listed with correct expiry indicators
                when GET is called on the URIs that are returned
                  should return status 200
              when GET /organizations/org/clients/client/keys/key is called (get single key)
                when it is called for each valid key
                  should properly return the default key with valid expiration
                  should properly return the first custom key with valid expiration
                  should properly return the second custom key with valid expiration
          when the second client is making requests with an unmodified public_key_read_access group
            it should behave like successful client key get
              when GET /organizations/org/clients/client/keys is called (list keys)
                all keys should be listed with correct expiry indicators
                when GET is called on the URIs that are returned
                  should return status 200
              when GET /organizations/org/clients/client/keys/key is called (get single key)
                when it is called for each valid key
                  should properly return the default key with valid expiration
                  should properly return the first custom key with valid expiration
                  should properly return the second custom key with valid expiration

license
  GET /license
    with no nodes
      returns 200 and correct body for superuser
      returns 200 and correct body for admin user
      returns 200 and correct body for normal user
    with nodes
      with one node
        should return correct body for license status
      with 25 nodes (license not exceeded)
        should return correct body for license status
      with  26 (license exceeded)
        should return correct body for license status

Testing the Nodes API endpoint
  GET /nodes
    with no nodes on the server
      returns a 200 with an empty hash
    with 1 nodes on the server
      should return a hash with 1 nodes
    with 2 nodes on the server
      should return a hash with 2 nodes
    with 3 nodes on the server
      should return a hash with 3 nodes
    with 4 nodes on the server
      should return a hash with 4 nodes
    with 5 nodes on the server
      should return a hash with 5 nodes
    with 6 nodes on the server
      should return a hash with 6 nodes
    with 7 nodes on the server
      should return a hash with 7 nodes
  GET /nodes/<name>
    for a nonexistent node
      returns a 404
    for an existing node
      returns a 200 and the node
  GET /environments/<environment_name>/nodes
    with no nodes on the server
      returns a 200 with an empty hash
  POST /nodes
    when validating
      when validating 'name' field
        when passing valid value "pedant_node"
          should respond with 201 Created and persist the resource
        when passing valid value "PEDANT_NODE"
          should respond with 201 Created and persist the resource
        when passing valid value "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqurstuvwxyz0123456789-_:"
          should respond with 201 Created and persist the resource
      when validating 'chef_environment' field
        with the "chef_environment" attribute
          should respond with 201 Created and persist the resource
        without the "chef_environment" attribute
          should respond with 201 Created and persist the resource
        when passing valid value "PEDANT"
          should respond with 201 Created and persist the resource
        when passing valid value "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqurstuvwxyz0123456789-_"
          should respond with 201 Created and persist the resource
      when validating 'json_class' field
        with the "json_class" attribute
          should respond with 201 Created and persist the resource
        without the "json_class" attribute
          should respond with 201 Created and persist the resource
      when validating 'chef_type' field
        with the "chef_type" attribute
          should respond with 201 Created and persist the resource
        without the "chef_type" attribute
          should respond with 201 Created and persist the resource
      when validating 'policy_name' field
        when policy_name is valid
          with a simple valid policy name
            accepts the policy_name field
          with a maximum length policy name
            accepts the policy_name field
          with a policy name containing every valid character
            accepts the policy_name field
      when validating 'policy_group' field
        when policy_group is valid
          with a simple valid policy name
            accepts the policy_group field
          with a maximum length policy name
            accepts the policy_group field
          with a policy name containing every valid character
            accepts the policy_group field
      when validating node attribute 'normal'
        with a value of {:with=>{"valid_key"=>"valid value"}, :default=>{}}
          should respond with 201 Created and persist the resource
        without the attribute
          should respond with 201 Created and persist the resource
        when passing valid value "{:with=>{"valid_key"=>"valid value"}}"
          should respond with 201 Created and persist the resource
        when passing valid value "{:with=>{"valid_key"=>""}}"
          should respond with 201 Created and persist the resource
        when passing valid value "{:with=>{"valid_key"=>nil}}"
          should respond with 201 Created and persist the resource
        when passing valid value "{:with=>{"valid_key"=>"これは日本語だ"}}"
          should respond with 201 Created and persist the resource
        when passing valid value "{:with=>{"valid_key"=>"Hello 日本!"}}"
          should respond with 201 Created and persist the resource
        when passing valid value "{:with=>{"valid_key"=>1}}"
          should respond with 201 Created and persist the resource
        when passing valid value "{:with=>{"valid_key"=>[1, 2, 3]}}"
          should respond with 201 Created and persist the resource
        when passing valid value "{:with=>{"valid_key"=>["a", "b", "c"]}}"
          should respond with 201 Created and persist the resource
        when passing valid value "{:with=>{"valid_key"=>{"a"=>1, "b"=>2}}}"
          should respond with 201 Created and persist the resource
        when passing valid value "{:with=>{"valid_key"=>{1=>1, 2=>2}}}"
          should respond with 201 Created and persist the resource
        when passing valid value "{:with=>{"正標"=>"valid value"}}"
          should respond with 201 Created and persist the resource
        when passing valid value "{:with=>{""=>1}}"
          should respond with 201 Created and persist the resource
      when validating node attribute 'default'
        with a value of {:with=>{"valid_key"=>"valid value"}, :default=>{}}
          should respond with 201 Created and persist the resource
        without the attribute
          should respond with 201 Created and persist the resource
        when passing valid value "{:with=>{"valid_key"=>"valid value"}}"
          should respond with 201 Created and persist the resource
        when passing valid value "{:with=>{"valid_key"=>""}}"
          should respond with 201 Created and persist the resource
        when passing valid value "{:with=>{"valid_key"=>nil}}"
          should respond with 201 Created and persist the resource
        when passing valid value "{:with=>{"valid_key"=>"これは日本語だ"}}"
          should respond with 201 Created and persist the resource
        when passing valid value "{:with=>{"valid_key"=>"Hello 日本!"}}"
          should respond with 201 Created and persist the resource
        when passing valid value "{:with=>{"valid_key"=>1}}"
          should respond with 201 Created and persist the resource
        when passing valid value "{:with=>{"valid_key"=>[1, 2, 3]}}"
          should respond with 201 Created and persist the resource
        when passing valid value "{:with=>{"valid_key"=>["a", "b", "c"]}}"
          should respond with 201 Created and persist the resource
        when passing valid value "{:with=>{"valid_key"=>{"a"=>1, "b"=>2}}}"
          should respond with 201 Created and persist the resource
        when passing valid value "{:with=>{"valid_key"=>{1=>1, 2=>2}}}"
          should respond with 201 Created and persist the resource
        when passing valid value "{:with=>{"正標"=>"valid value"}}"
          should respond with 201 Created and persist the resource
        when passing valid value "{:with=>{""=>1}}"
          should respond with 201 Created and persist the resource
      when validating node attribute 'override'
        with a value of {:with=>{"valid_key"=>"valid value"}, :default=>{}}
          should respond with 201 Created and persist the resource
        without the attribute
          should respond with 201 Created and persist the resource
        when passing valid value "{:with=>{"valid_key"=>"valid value"}}"
          should respond with 201 Created and persist the resource
        when passing valid value "{:with=>{"valid_key"=>""}}"
          should respond with 201 Created and persist the resource
        when passing valid value "{:with=>{"valid_key"=>nil}}"
          should respond with 201 Created and persist the resource
        when passing valid value "{:with=>{"valid_key"=>"これは日本語だ"}}"
          should respond with 201 Created and persist the resource
        when passing valid value "{:with=>{"valid_key"=>"Hello 日本!"}}"
          should respond with 201 Created and persist the resource
        when passing valid value "{:with=>{"valid_key"=>1}}"
          should respond with 201 Created and persist the resource
        when passing valid value "{:with=>{"valid_key"=>[1, 2, 3]}}"
          should respond with 201 Created and persist the resource
        when passing valid value "{:with=>{"valid_key"=>["a", "b", "c"]}}"
          should respond with 201 Created and persist the resource
        when passing valid value "{:with=>{"valid_key"=>{"a"=>1, "b"=>2}}}"
          should respond with 201 Created and persist the resource
        when passing valid value "{:with=>{"valid_key"=>{1=>1, 2=>2}}}"
          should respond with 201 Created and persist the resource
        when passing valid value "{:with=>{"正標"=>"valid value"}}"
          should respond with 201 Created and persist the resource
        when passing valid value "{:with=>{""=>1}}"
          should respond with 201 Created and persist the resource
      when validating node attribute 'automatic'
        with a value of {:with=>{"valid_key"=>"valid value"}, :default=>{}}
          should respond with 201 Created and persist the resource
        without the attribute
          should respond with 201 Created and persist the resource
        when passing valid value "{:with=>{"valid_key"=>"valid value"}}"
          should respond with 201 Created and persist the resource
        when passing valid value "{:with=>{"valid_key"=>""}}"
          should respond with 201 Created and persist the resource
        when passing valid value "{:with=>{"valid_key"=>nil}}"
          should respond with 201 Created and persist the resource
        when passing valid value "{:with=>{"valid_key"=>"これは日本語だ"}}"
          should respond with 201 Created and persist the resource
        when passing valid value "{:with=>{"valid_key"=>"Hello 日本!"}}"
          should respond with 201 Created and persist the resource
        when passing valid value "{:with=>{"valid_key"=>1}}"
          should respond with 201 Created and persist the resource
        when passing valid value "{:with=>{"valid_key"=>[1, 2, 3]}}"
          should respond with 201 Created and persist the resource
        when passing valid value "{:with=>{"valid_key"=>["a", "b", "c"]}}"
          should respond with 201 Created and persist the resource
        when passing valid value "{:with=>{"valid_key"=>{"a"=>1, "b"=>2}}}"
          should respond with 201 Created and persist the resource
        when passing valid value "{:with=>{"valid_key"=>{1=>1, 2=>2}}}"
          should respond with 201 Created and persist the resource
        when passing valid value "{:with=>{"正標"=>"valid value"}}"
          should respond with 201 Created and persist the resource
        when passing valid value "{:with=>{""=>1}}"
          should respond with 201 Created and persist the resource
      when validating 'run_list'
        with a value of ["chef"]
          should respond with 201 Created and persist the resource
        without the attribute
          should respond with 201 Created and persist the resource
        when passing valid value "["base", "recipe[base]", "role[base]"]"
          should respond with 201 Created and persist the resource
        with unqualified recipe names
          when passing valid value "["base", "nginx", "app"]"
            should respond with 201 Created and persist the resource
          when passing valid value "["1", "2", "3"]"
            should respond with 201 Created and persist the resource
          when passing valid value "["base@1.0"]"
            should respond with 201 Created and persist the resource
          when passing valid value "["base@1.0.1"]"
            should respond with 201 Created and persist the resource
          when passing valid value "["base@1.0.1", "nginx"]"
            should respond with 201 Created and persist the resource
        with qualified recipe names
          when passing valid value "["recipe[base]"]"
            should respond with 201 Created and persist the resource
          when passing valid value "["recipe[1]"]"
            should respond with 201 Created and persist the resource
          when passing valid value "["recipe[base@1.0]"]"
            should respond with 201 Created and persist the resource
          when passing valid value "["recipe[base@1.0.1]"]"
            should respond with 201 Created and persist the resource
          when passing valid value "["recipe[base]", "recipe[base@1.0.1]"]"
            should respond with 201 Created and persist the resource
        with qualified role names
          when passing valid value "["role[base]"]"
            should respond with 201 Created and persist the resource
          when passing valid value "["role[1]"]"
            should respond with 201 Created and persist the resource
    without existing node name
      should respond with 201 Created
    with existing node name
      should respond with 409 Conflict
    with a non-normalized run list
      should respond with 201 and the correct path
      should persist the node with a normalized run list
    with a runlist that has recipes named 'recipe' and 'role'
      should respond with 201 and the correct path
      should persist the node with all oddly-named recipes intact in the run list
    with a runlist that has duplicate recipes and roles
      should respond with 201 and the correct path
      should persist the node with all run list duplicates removed
    with a runlist that has implicit and explict 'default' recipes
      should respond with 201 and the correct path
      should persist the node with both versions remaining in the run list
  PUT /nodes/<name>
    without an existing node
      should respond with 404 Not Found
    with existing node
      when updating 'name' field
        with a value of pedant_node_test
          should respond with 200 OK and persist the resource
        without the attribute
          should respond with 200 OK and persist the resource
      when validating 'chef_environment' field
        with a value of pedant
          should respond with 200 OK and persist the resource
        without the attribute
          should respond with 200 OK and persist the resource
        when passing valid value "PEDANT"
          should respond with 200 OK and persist the resource
        when passing valid value "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqurstuvwxyz0123456789-_"
          should respond with 200 OK and persist the resource
      when validating 'json_class' field
        with a value of Chef::Node
          should respond with 200 OK and persist the resource
        without the attribute
          should respond with 200 OK and persist the resource
      when validating 'chef_type' field
        with a value of node
          should respond with 200 OK and persist the resource
        without the attribute
          should respond with 200 OK and persist the resource
      when validating node attribute 'normal'
        with a value of {:with=>{"valid_key"=>"valid value"}, :default=>{}}
          should respond with 200 OK and persist the resource
        without the attribute
          should respond with 200 OK and persist the resource
        when passing valid value "{:with=>{"valid_key"=>"valid value"}}"
          should respond with 200 OK and persist the resource
        when passing valid value "{:with=>{"valid_key"=>""}}"
          should respond with 200 OK and persist the resource
        when passing valid value "{:with=>{"valid_key"=>nil}}"
          should respond with 200 OK and persist the resource
        when passing valid value "{:with=>{"valid_key"=>"これは日本語だ"}}"
          should respond with 200 OK and persist the resource
        when passing valid value "{:with=>{"valid_key"=>"Hello 日本!"}}"
          should respond with 200 OK and persist the resource
        when passing valid value "{:with=>{"valid_key"=>1}}"
          should respond with 200 OK and persist the resource
        when passing valid value "{:with=>{"valid_key"=>[1, 2, 3]}}"
          should respond with 200 OK and persist the resource
        when passing valid value "{:with=>{"valid_key"=>["a", "b", "c"]}}"
          should respond with 200 OK and persist the resource
        when passing valid value "{:with=>{"valid_key"=>{"a"=>1, "b"=>2}}}"
          should respond with 200 OK and persist the resource
        when passing valid value "{:with=>{"valid_key"=>{1=>1, 2=>2}}}"
          should respond with 200 OK and persist the resource
        when passing valid value "{:with=>{"正標"=>"valid value"}}"
          should respond with 200 OK and persist the resource
        when passing valid value "{:with=>{""=>1}}"
          should respond with 200 OK and persist the resource
      when validating node attribute 'default'
        with a value of {:with=>{"valid_key"=>"valid value"}, :default=>{}}
          should respond with 200 OK and persist the resource
        without the attribute
          should respond with 200 OK and persist the resource
        when passing valid value "{:with=>{"valid_key"=>"valid value"}}"
          should respond with 200 OK and persist the resource
        when passing valid value "{:with=>{"valid_key"=>""}}"
          should respond with 200 OK and persist the resource
        when passing valid value "{:with=>{"valid_key"=>nil}}"
          should respond with 200 OK and persist the resource
        when passing valid value "{:with=>{"valid_key"=>"これは日本語だ"}}"
          should respond with 200 OK and persist the resource
        when passing valid value "{:with=>{"valid_key"=>"Hello 日本!"}}"
          should respond with 200 OK and persist the resource
        when passing valid value "{:with=>{"valid_key"=>1}}"
          should respond with 200 OK and persist the resource
        when passing valid value "{:with=>{"valid_key"=>[1, 2, 3]}}"
          should respond with 200 OK and persist the resource
        when passing valid value "{:with=>{"valid_key"=>["a", "b", "c"]}}"
          should respond with 200 OK and persist the resource
        when passing valid value "{:with=>{"valid_key"=>{"a"=>1, "b"=>2}}}"
          should respond with 200 OK and persist the resource
        when passing valid value "{:with=>{"valid_key"=>{1=>1, 2=>2}}}"
          should respond with 200 OK and persist the resource
        when passing valid value "{:with=>{"正標"=>"valid value"}}"
          should respond with 200 OK and persist the resource
        when passing valid value "{:with=>{""=>1}}"
          should respond with 200 OK and persist the resource
      when validating node attribute 'override'
        with a value of {:with=>{"valid_key"=>"valid value"}, :default=>{}}
          should respond with 200 OK and persist the resource
        without the attribute
          should respond with 200 OK and persist the resource
        when passing valid value "{:with=>{"valid_key"=>"valid value"}}"
          should respond with 200 OK and persist the resource
        when passing valid value "{:with=>{"valid_key"=>""}}"
          should respond with 200 OK and persist the resource
        when passing valid value "{:with=>{"valid_key"=>nil}}"
          should respond with 200 OK and persist the resource
        when passing valid value "{:with=>{"valid_key"=>"これは日本語だ"}}"
          should respond with 200 OK and persist the resource
        when passing valid value "{:with=>{"valid_key"=>"Hello 日本!"}}"
          should respond with 200 OK and persist the resource
        when passing valid value "{:with=>{"valid_key"=>1}}"
          should respond with 200 OK and persist the resource
        when passing valid value "{:with=>{"valid_key"=>[1, 2, 3]}}"
          should respond with 200 OK and persist the resource
        when passing valid value "{:with=>{"valid_key"=>["a", "b", "c"]}}"
          should respond with 200 OK and persist the resource
        when passing valid value "{:with=>{"valid_key"=>{"a"=>1, "b"=>2}}}"
          should respond with 200 OK and persist the resource
        when passing valid value "{:with=>{"valid_key"=>{1=>1, 2=>2}}}"
          should respond with 200 OK and persist the resource
        when passing valid value "{:with=>{"正標"=>"valid value"}}"
          should respond with 200 OK and persist the resource
        when passing valid value "{:with=>{""=>1}}"
          should respond with 200 OK and persist the resource
      when validating node attribute 'automatic'
        with a value of {:with=>{"valid_key"=>"valid value"}, :default=>{}}
          should respond with 200 OK and persist the resource
        without the attribute
          should respond with 200 OK and persist the resource
        when passing valid value "{:with=>{"valid_key"=>"valid value"}}"
          should respond with 200 OK and persist the resource
        when passing valid value "{:with=>{"valid_key"=>""}}"
          should respond with 200 OK and persist the resource
        when passing valid value "{:with=>{"valid_key"=>nil}}"
          should respond with 200 OK and persist the resource
        when passing valid value "{:with=>{"valid_key"=>"これは日本語だ"}}"
          should respond with 200 OK and persist the resource
        when passing valid value "{:with=>{"valid_key"=>"Hello 日本!"}}"
          should respond with 200 OK and persist the resource
        when passing valid value "{:with=>{"valid_key"=>1}}"
          should respond with 200 OK and persist the resource
        when passing valid value "{:with=>{"valid_key"=>[1, 2, 3]}}"
          should respond with 200 OK and persist the resource
        when passing valid value "{:with=>{"valid_key"=>["a", "b", "c"]}}"
          should respond with 200 OK and persist the resource
        when passing valid value "{:with=>{"valid_key"=>{"a"=>1, "b"=>2}}}"
          should respond with 200 OK and persist the resource
        when passing valid value "{:with=>{"valid_key"=>{1=>1, 2=>2}}}"
          should respond with 200 OK and persist the resource
        when passing valid value "{:with=>{"正標"=>"valid value"}}"
          should respond with 200 OK and persist the resource
        when passing valid value "{:with=>{""=>1}}"
          should respond with 200 OK and persist the resource
      when validating 'run_list'
        with a value of ["chef"]
          should respond with 200 OK and persist the resource
        without the attribute
          should respond with 200 OK and persist the resource
        when passing valid value "["base", "recipe[base]", "role[base]"]"
          should respond with 200 OK and persist the resource
        with unqualified recipe names
          when passing valid value "["base", "nginx", "app"]"
            should respond with 200 OK and persist the resource
          when passing valid value "["1", "2", "3"]"
            should respond with 200 OK and persist the resource
          when passing valid value "["base@1.0"]"
            should respond with 200 OK and persist the resource
          when passing valid value "["base@1.0.1"]"
            should respond with 200 OK and persist the resource
          when passing valid value "["base@1.0.1", "nginx"]"
            should respond with 200 OK and persist the resource
        with qualified recipe names
          when passing valid value "["recipe[base]"]"
            should respond with 200 OK and persist the resource
          when passing valid value "["recipe[1]"]"
            should respond with 200 OK and persist the resource
          when passing valid value "["recipe[base@1.0]"]"
            should respond with 200 OK and persist the resource
          when passing valid value "["recipe[base@1.0.1]"]"
            should respond with 200 OK and persist the resource
          when passing valid value "["recipe[base]", "recipe[base@1.0.1]"]"
            should respond with 200 OK and persist the resource
        with qualified role names
          when passing valid value "["role[base]"]"
            should respond with 200 OK and persist the resource
          when passing valid value "["role[1]"]"
            should respond with 200 OK and persist the resource
      when validating 'policy_name' field
        when policy_name is valid
          with a simple valid policy name
            accepts the policy_name field
          with a maximum length policy name
            accepts the policy_name field
          with a policy name containing every valid character
            accepts the policy_name field
      when validating 'policy_group' field
        when policy_group is valid
          with a simple valid policy name
            accepts the policy_group field
          with a maximum length policy name
            accepts the policy_group field
          with a policy name containing every valid character
            accepts the policy_group field
      with a canonical payload
        updates the node
  using DELETE
    to a node that already exists
      succeeds
    to a node that does not exist
      fails

Private Chef Nodes API endpoint
  retrieving object identifiers
    for nodes
      that exist
        returns a 200 and valid node identifiers
      that do not exist
        returns a 404
    for an unsupported object type
      returns a 404

Pedant Self-Diagnostic
  with shared() and let()
    before(:all)
      should use parent shared_var
      should use parent let_var
      within a child context
        should use the child shared_var
        should use the child let_var
  Integration Users
    with admin_user
      should use parent let_var
      within a child context
        should use the child let_var
    with normal_user
      should use parent let_var
      within a child context
        should use the child let_var
    with outside_user
      should use parent let_var
      within a child context
        should use the child let_var
    with superuser
      should use parent let_var
      within a child context
        should use the child let_var
  Matchers
    strictly_match
      works with plain hashes
      works with regex keys
      works with arrays of scalars, treating them as sets
      works with regexp specs in array elements
      works with hash values
      should work with nested hashes of specs
      works with hash values contained within an array
        whether or not order matches
        should not match if a key within the nested hash is missing from the target
        should not match if the target contains more values then expected
        should match if the spec contains a value that matches on regex and it is present in the target
        should not match if the spec contains a value that matches on regex and it is not present in the target
        should match a nested array that matches
        should not match a nested array with too many values that otherwise matches
        should not match a nested array with too few values
        should not match a nested array that doesn't match
    loosely_match
      works with plain hashes
      works with regex keys
      works with arrays of scalars, treating them as sets
      works with hash values
      should work with nested hashes of specs
      works with hashes nested within an array
        whether or not order matches
        should not match if a key within the nested hash is missing from the target
        should match if the target contains more values then expected
        should match if the spec contains a value that matches on regex and it is present in the target
        should not match if the spec contains a value that matches on regex and it is not present in the target
        should match a nested array that matches
        should match a nested array with too many values that otherwise matches because arrays are still exact matches
        should not match a nested array with too few values
        should not match a nested array that doesn't match

Policies API endpoint
  Listing policies and policy groups
    when no policies or policy_groups exist on the server
      GET /policies returns an empty list
      GET /policy_groups returns an empty list
    when a policy assigned to a group exists
      GET /policies returns a data structure with the groups assigned policy revision
      GET /policy_groups returns a data structure with the groups assigned policy revision
    policy exists but has been removed from all policy groups
      GET /policies shows the policy
      GET /policy_groups returns a data structure with the groups assigned policy revision
    with multiple policies and groups
      GET /policies returns a data structure with all the policies
      GET /policy_groups returns a data structure with all policy group->policy rev associations
  Named Policy Groups endpoint /policy_groups/:policy_group_name
    when the named group doesn't exist
      GET /policy_groups/:policy_group_name returns a 404
      DELETE /policy_groups/:policy_group_name returns a 404
    when the named group exists
      when no policies are assigned to the group
        GET /policy_groups/:policy_group_name returns 200 with an empty JSON Object
        DELETE /policy_groups/:policy_group_name returns 200 with an empty JSON Object
      when policies are assigned to the group
        GET /policy_groups/:policy_group_name returns 200 with a JSON Object showing associated policies
        DELETE /policy_groups/:policy_group_name returns 200 with a JSON Object showing associated policies
        DELETE /policy_groups/:policy_group_name deletes policy associations
  Named policy endpoint /policies/:policy_name
    when :policy_name doesn't exist
      GET /policies/:policy_name returns a 404
      DELETE /policies/:policy_name returns 404
      POST /policies/:policy_name/revisions creates the policy name and policy revision
    when policy_name exists
      GET /policies/:policy_name returns a list of revisions
      DELETE /policies/:policy_name deletes all revisions and returns the list of revisions
      creating a new revision
        when the revision doesn't yet exist
          POST /policies/:policy_name/revisions creates the policy revision
        when the revision exists
          POST /policies/:policy_name/revisions returns 409
  Named policy revision endpoint /policies/:policy_name/revisions/:revision_id
    when the policy_name doesn't exist
      GET /policies/:policy_name/revisions/:revision_id returns 404
      DELETE /policies/:policy_name/revisions/:revision_id returns 404
    when the policy_name exists but :revision_id doesn't
      GET /policies/:policy_name/revisions/:revision_id returns 404
      DELETE /policies/:policy_name/revisions/:revision_id returns 404
    when the policy_name exists and :revision_id exists
      GET /policies/:policy_name/revisions/:revision_id returns 200, with the policy as the body
      DELETE /policies/:policy_name/revisions/:revision_id returns 200, with the policy as the body
      DELETE /policies/:policy_name/revisions/:revision_id doesn't delete authz information for :policy_name
  Policy Group Revision Association Endpoint /policy_groups/:policy_group/policies/:policy_name
    when no policies exist on the server
      GET
        GET /policy_groups/:group_name/policies/:policy_name returns 404
      DELETE
        DELETE /policy_groups/:group_name/policies/:policy_name returns 404
      PUT
        with a canonical payload
          PUT /policy_groups/:group_name/policies/:policy_name returns 201
        with a minimal payload
          PUT /policy_groups/:group_name/policies/:policy_name returns 201
        with a payload demonstrating validation edge conditions for 'name'
          when the name contains every valid character
            PUT /policy_groups/:group_name/policies/:policy_name returns 201
          when a revision_id contains every valid character
            PUT /policy_groups/:group_name/policies/:policy_name returns 201
          when a cookbook identifier is the maximum size
            PUT /policy_groups/:group_name/policies/:policy_name returns 201
          when a cookbook identifier contains every valid character
            PUT /policy_groups/:group_name/policies/:policy_name returns 201
    when a policy exists on the server
      GET
        retrieves the policy document
      PUT (update policy document)
        PUT /policies/:group/:name returns 200
        GET /policies/:group/:name subsequently returns the updated document
      DELETE
        DELETE /policies/:group/:name returns the deleted document
        DELETE /policies/:group/:name removes the policy from the data store

Principals API Endpoint
  access control
    with bogus org
      returns a 404 ("Not Found") for admin
      returns a 404 ("Not Found") for normal user
    GET /principals
      returns a 404 ("Not Found") for admin
      returns a 404 ("Not Found") for normal user
      returns a 404 ("Not Found") for invalid user
      returns a 404 ("Not Found") for outside user
    [deprecated] v0
      returns a 404 ("Not Found") for missing principal for admin
      returns a 404 ("Not Found") for missing principal for normal user
      when requesting a client
        returns a 200 ("OK") for admin
        returns a 200 ("OK") for normal user
        returns a 200 ("OK") for invalid user
        returns a 200 ("OK") for outside user
      when requesting a user
        returns a 200 ("OK") for admin
        returns a 200 ("OK") for normal user
        returns a 200 ("OK") for invalid user
        returns a 200 ("OK") for outside user
      when requesting a bad client
        returns a 404 ("Not Found") for admin
        returns a 404 ("Not Found") for normal user
        returns a 404 ("Not Found") for invalid user
        returns a 404 ("Not Found") for outside user
    [current] v > 0
      returns a 404 ("Not Found") for missing principal for admin
      returns a 404 ("Not Found") for missing principal for normal user
      when requesting a client
        returns a 200 ("OK") for admin
        returns a 200 ("OK") for normal user
        returns a 200 ("OK") for invalid user
        returns a 200 ("OK") for outside user
      when requesting a user
        returns a 200 ("OK") for admin
        returns a 200 ("OK") for normal user
        returns a 200 ("OK") for invalid user
        returns a 200 ("OK") for outside user
      when requesting a bad client
        returns a 404 ("Not Found") for admin
        returns a 404 ("Not Found") for normal user
        returns a 404 ("Not Found") for invalid user
        returns a 404 ("Not Found") for outside user

Required Recipe Endpoint
  when required_recipe is disabled
    with a valid client
      POST to /required_recipe returns 404
      GET to /required_recipe returns 404
    with an invalid client
      POST to /required_recipe returns 404
      GET to /required_recipe returns 404
    with a bad request
      POST to /required_recipe returns 404
      GET to /required_recipe returns 404

Testing the Roles API endpoint
  making a request to /roles
    using GET
      with no roles
        returns a 200 and an empty hash
      with roles
        returns a 200 and a hash of name -> url
    using POST
      for a role that does not exist
        should respond with 201 and the correct path
        should persist the role
      when validating
        the 'name' field
          when passing valid value "pedant_role"
            should respond with 201 Created and persist the resource
          when passing valid value "PEDANT_ROLE"
            should respond with 201 Created and persist the resource
          when passing valid value "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqurstuvwxyz0123456789-_:"
            should respond with 201 Created and persist the resource
        the 'json_class' field
          when passing valid value "Chef::Role"
            should respond with 201 Created and persist the resource
        the 'chef_type' field
          when passing valid value "role"
            should respond with 201 Created and persist the resource
      with various valid inputs
        when missing 'default_attributes' value
          should create role and set '{}' as 'default_attributes' value
        when missing 'override_attributes' value
          should create role and set '{}' as 'override_attributes' value
        when missing 'run_list' value
          should create role and set '[]' as 'run_list' value
        when missing 'env_run_lists' value
          should create role and set '{}' as 'env_run_lists' value
        with a non-normalized run list
          should respond with 201 and the correct path
          should persist the role with a normalized run list
        with a runlist that has recipes named 'recipe' and 'role'
          should respond with 201 and the correct path
          should persist the role with all oddly-named recipes intact in the run list
        with a runlist that has duplicate recipes and roles
          should respond with 201 and the correct path
          should persist the role with all run list duplicates removed
        with a runlist that has implicit and explict 'default' recipes
          should respond with 201 and the correct path
          should persist the role with both versions remaining in the run list
        with non-normalized environment run lists
          should respond with 201 and the correct path
          should persist the role with normalized environment run lists
        with environment run lists that have duplicates
          should respond with 201 and the correct path
          should persist the role with duplicates removed
        with environment run lists that have implicit and explicit 'default' recipes
          should respond with 201 and the correct path
          should persist the role with both versions remaining in the lists
        with environment run lists that have recipes named 'recipe' and 'role'
          should respond with 201 and the correct path
          should persist the role with all oddly-named recipes intact in the run lists
      for a role that already exists
        fails
  making a request to /roles/<role>
    using GET
      to a nonexistent role
        fails with a 404
      to a role that exists
        succeeds
    using PUT
      to a nonexistent role
        should respond with a 404
      to a role that exists
        with canonical payload
          should respond with 200 and the updated role body
          should actually update the role
        without role name in payload
          should respond with 200 and the updated role body
          should actually update the role
    using DELETE
      to a nonexistent role
        fails with a 404
      to an existing role
        should respond with 201 and the deleted role body
        should actually delete the role
  making a request to /roles/<role>/environments
    GET
      for a nonexistent role
        fails
      for a role with no environment run lists
        should return just the default environment
      for a role with one additional environment run list
        should return the default environment and the additional environment
      for a role with multiple additional environment run lists
        returns multiple environments, even if some do not exist
  making a request to /roles/<role>/environments/<environment>
    using GET
      with the default environment
        to a nonexistent role
          responds with a 404 for the role
        with an already existing role
          responds with 200 and the role's run list
      with a non-default environment
        for a role with a run list in that environment
          responds with 200 and the role's run list
        for a role with no run list in that environment
          responds with 200 and a null run list
      with a non-existent environment
        responds with a 404 for the environment

Sandboxes API Endpoint
  Sandboxes Endpoint, POST
    when creating a new sandbox
      should respond with 201 Created
    with existing file
[Sleeping to allow S3 to work ... ]
      should recognize files that are already on the server
  Sandboxes Endpoint, PUT
    'is_committed' should be true for a committed sandbox
    when committing an incomplete sandbox
      should respond with 503 Service Unavailable
    when uploading expected files to the sandbox
      should respond with 200 OK or 204 No Content
    when committing a sandbox after uploading files
      should respond with 200 OK

Search API endpoint
  /search
    GET
      with no data bags
        should return a list of built-in indexes
      with data bags
        should return a list of built-in indexes, as well as indexes for each data bag
  /search/environment
    GET
      should return filtered results when ACL on environments exist (PENDING: No reason given)
      a search that should return no results
        should have multiple environments on the system (for our search to ignore)
        returns 200, with no search results
      when searching for a single environment by name
        should have more than just the target of our environment search on the system
        should return status code 200 and a single environment
      when searching for multiple environments names using a * wildcard
        should have more than just the targets of our environment search on the system
        should return all testing environments
      when searching for a limited number of rows
        returns the limited number of rows
        honors the start parameter
        has 0 rows when starting at the last item
    POST
      should return filtered results when ACLs exist (PENDING: No reason given)
      targeted toward no environments with body of {"possibly_nested"=>["default_attributes", "top", "middle", "bottom"], "the_name"=>["name"], "not_found"=>["foo", "bar", "baz", "totally_not_a_real_field"], "empty"=>[]}
        should succeed, but return nothing
      targeted toward one environment with body of {"possibly_nested"=>["default_attributes", "top", "middle", "bottom"], "the_name"=>["name"], "not_found"=>["foo", "bar", "baz", "totally_not_a_real_field"], "empty"=>[]}
        should succeed, and return the single environment
      targeted toward many environments with body of {"possibly_nested"=>["default_attributes", "top", "middle", "bottom"], "the_name"=>["name"], "not_found"=>["foo", "bar", "baz", "totally_not_a_real_field"], "empty"=>[]}
        should succeed, and return multiple environments
      targeted toward no environments with body of {"possibly_nested"=>["description"], "the_name"=>["name"], "not_found"=>["foo", "bar", "baz", "totally_not_a_real_field"], "empty"=>[]}
        should succeed, but return nothing
      targeted toward one environment with body of {"possibly_nested"=>["description"], "the_name"=>["name"], "not_found"=>["foo", "bar", "baz", "totally_not_a_real_field"], "empty"=>[]}
        should succeed, and return the single environment
      targeted toward many environments with body of {"possibly_nested"=>["description"], "the_name"=>["name"], "not_found"=>["foo", "bar", "baz", "totally_not_a_real_field"], "empty"=>[]}
        should succeed, and return multiple environments
  /search/node
    GET
      should return filtered results when ACL on nodes exist (PENDING: No reason given)
      a search that should return no results
        should have multiple nodes on the system (for our search to ignore)
        returns 200, with no search results
      when searching for a single node by name
        should have more than just the target of our node search on the system
        should return status code 200 and a single node
      when searching for multiple nodes names using a * wildcard
        should have more than just the targets of our node search on the system
        should return all testing nodes
      when searching for a limited number of rows
        returns the limited number of rows
        honors the start parameter
        has 0 rows when starting at the last item
      with a run_list of ["pedant_testing_cookbook"]
        searching for recipe:pedant_testing_cookbook (properly escaped) should return the node,
      with a run_list of ["pedant_testing_cookbook"]
        searching for run_list:recipe[pedant_testing_cookbook] (properly escaped) should return the node,
      with a run_list of ["pedant_testing_cookbook"]
        searching for recipe:pedant_testing_cookbook::default (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["pedant_testing_cookbook"]
        searching for run_list:recipe[pedant_testing_cookbook::default] (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["pedant_testing_cookbook"]
        searching for recipe:pedant_testing_cookbook::default@1.0.0 (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["pedant_testing_cookbook"]
        searching for run_list:recipe[pedant_testing_cookbook::default@1.0.0] (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["pedant_testing_cookbook"]
        searching for recipe:pedant_testing_cookbook@1.0.0 (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["pedant_testing_cookbook"]
        searching for run_list:recipe[pedant_testing_cookbook@1.0.0] (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["pedant_testing_cookbook"]
        searching for recipe:pedant_testing_cookbook (properly escaped) should return the node,
      with a run_list of ["pedant_testing_cookbook"]
        searching for run_list:recipe[pedant_testing_cookbook] (properly escaped) should return the node,
      with a run_list of ["pedant_testing_cookbook"]
        searching for recipe:pedant_testing_cookbook::default (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["pedant_testing_cookbook"]
        searching for run_list:recipe[pedant_testing_cookbook::default] (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["pedant_testing_cookbook"]
        searching for recipe:pedant_testing_cookbook::default@1.0.0 (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["pedant_testing_cookbook"]
        searching for run_list:recipe[pedant_testing_cookbook::default@1.0.0] (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["pedant_testing_cookbook"]
        searching for recipe:pedant_testing_cookbook@1.0.0 (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["pedant_testing_cookbook"]
        searching for run_list:recipe[pedant_testing_cookbook@1.0.0] (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["pedant_testing_cookbook::default"]
        searching for recipe:pedant_testing_cookbook (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["pedant_testing_cookbook::default"]
        searching for run_list:recipe[pedant_testing_cookbook] (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["pedant_testing_cookbook::default"]
        searching for recipe:pedant_testing_cookbook::default (properly escaped) should return the node,
      with a run_list of ["pedant_testing_cookbook::default"]
        searching for run_list:recipe[pedant_testing_cookbook::default] (properly escaped) should return the node,
      with a run_list of ["pedant_testing_cookbook::default"]
        searching for recipe:pedant_testing_cookbook::default@1.0.0 (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["pedant_testing_cookbook::default"]
        searching for run_list:recipe[pedant_testing_cookbook::default@1.0.0] (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["pedant_testing_cookbook::default"]
        searching for recipe:pedant_testing_cookbook@1.0.0 (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["pedant_testing_cookbook::default"]
        searching for run_list:recipe[pedant_testing_cookbook@1.0.0] (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["pedant_testing_cookbook::default"]
        searching for recipe:pedant_testing_cookbook (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["pedant_testing_cookbook::default"]
        searching for run_list:recipe[pedant_testing_cookbook] (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["pedant_testing_cookbook::default"]
        searching for recipe:pedant_testing_cookbook::default (properly escaped) should return the node,
      with a run_list of ["pedant_testing_cookbook::default"]
        searching for run_list:recipe[pedant_testing_cookbook::default] (properly escaped) should return the node,
      with a run_list of ["pedant_testing_cookbook::default"]
        searching for recipe:pedant_testing_cookbook::default@1.0.0 (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["pedant_testing_cookbook::default"]
        searching for run_list:recipe[pedant_testing_cookbook::default@1.0.0] (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["pedant_testing_cookbook::default"]
        searching for recipe:pedant_testing_cookbook@1.0.0 (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["pedant_testing_cookbook::default"]
        searching for run_list:recipe[pedant_testing_cookbook@1.0.0] (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["pedant_testing_cookbook::default@1.0.0"]
        searching for recipe:pedant_testing_cookbook (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["pedant_testing_cookbook::default@1.0.0"]
        searching for run_list:recipe[pedant_testing_cookbook] (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["pedant_testing_cookbook::default@1.0.0"]
        searching for recipe:pedant_testing_cookbook::default (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["pedant_testing_cookbook::default@1.0.0"]
        searching for run_list:recipe[pedant_testing_cookbook::default] (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["pedant_testing_cookbook::default@1.0.0"]
        searching for recipe:pedant_testing_cookbook::default@1.0.0 (properly escaped) should return the node,
      with a run_list of ["pedant_testing_cookbook::default@1.0.0"]
        searching for run_list:recipe[pedant_testing_cookbook::default@1.0.0] (properly escaped) should return the node,
      with a run_list of ["pedant_testing_cookbook::default@1.0.0"]
        searching for recipe:pedant_testing_cookbook@1.0.0 (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["pedant_testing_cookbook::default@1.0.0"]
        searching for run_list:recipe[pedant_testing_cookbook@1.0.0] (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["pedant_testing_cookbook::default@1.0.0"]
        searching for recipe:pedant_testing_cookbook (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["pedant_testing_cookbook::default@1.0.0"]
        searching for run_list:recipe[pedant_testing_cookbook] (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["pedant_testing_cookbook::default@1.0.0"]
        searching for recipe:pedant_testing_cookbook::default (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["pedant_testing_cookbook::default@1.0.0"]
        searching for run_list:recipe[pedant_testing_cookbook::default] (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["pedant_testing_cookbook::default@1.0.0"]
        searching for recipe:pedant_testing_cookbook::default@1.0.0 (properly escaped) should return the node,
      with a run_list of ["pedant_testing_cookbook::default@1.0.0"]
        searching for run_list:recipe[pedant_testing_cookbook::default@1.0.0] (properly escaped) should return the node,
      with a run_list of ["pedant_testing_cookbook::default@1.0.0"]
        searching for recipe:pedant_testing_cookbook@1.0.0 (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["pedant_testing_cookbook::default@1.0.0"]
        searching for run_list:recipe[pedant_testing_cookbook@1.0.0] (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["pedant_testing_cookbook@1.0.0"]
        searching for recipe:pedant_testing_cookbook (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["pedant_testing_cookbook@1.0.0"]
        searching for run_list:recipe[pedant_testing_cookbook] (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["pedant_testing_cookbook@1.0.0"]
        searching for recipe:pedant_testing_cookbook::default (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["pedant_testing_cookbook@1.0.0"]
        searching for run_list:recipe[pedant_testing_cookbook::default] (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["pedant_testing_cookbook@1.0.0"]
        searching for recipe:pedant_testing_cookbook::default@1.0.0 (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["pedant_testing_cookbook@1.0.0"]
        searching for run_list:recipe[pedant_testing_cookbook::default@1.0.0] (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["pedant_testing_cookbook@1.0.0"]
        searching for recipe:pedant_testing_cookbook@1.0.0 (properly escaped) should return the node,
      with a run_list of ["pedant_testing_cookbook@1.0.0"]
        searching for run_list:recipe[pedant_testing_cookbook@1.0.0] (properly escaped) should return the node,
      with a run_list of ["pedant_testing_cookbook@1.0.0"]
        searching for recipe:pedant_testing_cookbook (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["pedant_testing_cookbook@1.0.0"]
        searching for run_list:recipe[pedant_testing_cookbook] (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["pedant_testing_cookbook@1.0.0"]
        searching for recipe:pedant_testing_cookbook::default (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["pedant_testing_cookbook@1.0.0"]
        searching for run_list:recipe[pedant_testing_cookbook::default] (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["pedant_testing_cookbook@1.0.0"]
        searching for recipe:pedant_testing_cookbook::default@1.0.0 (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["pedant_testing_cookbook@1.0.0"]
        searching for run_list:recipe[pedant_testing_cookbook::default@1.0.0] (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["pedant_testing_cookbook@1.0.0"]
        searching for recipe:pedant_testing_cookbook@1.0.0 (properly escaped) should return the node,
      with a run_list of ["pedant_testing_cookbook@1.0.0"]
        searching for run_list:recipe[pedant_testing_cookbook@1.0.0] (properly escaped) should return the node,
      with a run_list of ["recipe[pedant_testing_cookbook]"]
        searching for recipe:pedant_testing_cookbook (properly escaped) should return the node,
      with a run_list of ["recipe[pedant_testing_cookbook]"]
        searching for run_list:recipe[pedant_testing_cookbook] (properly escaped) should return the node,
      with a run_list of ["recipe[pedant_testing_cookbook]"]
        searching for recipe:pedant_testing_cookbook::default (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["recipe[pedant_testing_cookbook]"]
        searching for run_list:recipe[pedant_testing_cookbook::default] (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["recipe[pedant_testing_cookbook]"]
        searching for recipe:pedant_testing_cookbook::default@1.0.0 (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["recipe[pedant_testing_cookbook]"]
        searching for run_list:recipe[pedant_testing_cookbook::default@1.0.0] (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["recipe[pedant_testing_cookbook]"]
        searching for recipe:pedant_testing_cookbook@1.0.0 (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["recipe[pedant_testing_cookbook]"]
        searching for run_list:recipe[pedant_testing_cookbook@1.0.0] (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["recipe[pedant_testing_cookbook]"]
        searching for recipe:pedant_testing_cookbook (properly escaped) should return the node,
      with a run_list of ["recipe[pedant_testing_cookbook]"]
        searching for run_list:recipe[pedant_testing_cookbook] (properly escaped) should return the node,
      with a run_list of ["recipe[pedant_testing_cookbook]"]
        searching for recipe:pedant_testing_cookbook::default (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["recipe[pedant_testing_cookbook]"]
        searching for run_list:recipe[pedant_testing_cookbook::default] (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["recipe[pedant_testing_cookbook]"]
        searching for recipe:pedant_testing_cookbook::default@1.0.0 (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["recipe[pedant_testing_cookbook]"]
        searching for run_list:recipe[pedant_testing_cookbook::default@1.0.0] (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["recipe[pedant_testing_cookbook]"]
        searching for recipe:pedant_testing_cookbook@1.0.0 (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["recipe[pedant_testing_cookbook]"]
        searching for run_list:recipe[pedant_testing_cookbook@1.0.0] (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["recipe[pedant_testing_cookbook::default]"]
        searching for recipe:pedant_testing_cookbook (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["recipe[pedant_testing_cookbook::default]"]
        searching for run_list:recipe[pedant_testing_cookbook] (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["recipe[pedant_testing_cookbook::default]"]
        searching for recipe:pedant_testing_cookbook::default (properly escaped) should return the node,
      with a run_list of ["recipe[pedant_testing_cookbook::default]"]
        searching for run_list:recipe[pedant_testing_cookbook::default] (properly escaped) should return the node,
      with a run_list of ["recipe[pedant_testing_cookbook::default]"]
        searching for recipe:pedant_testing_cookbook::default@1.0.0 (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["recipe[pedant_testing_cookbook::default]"]
        searching for run_list:recipe[pedant_testing_cookbook::default@1.0.0] (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["recipe[pedant_testing_cookbook::default]"]
        searching for recipe:pedant_testing_cookbook@1.0.0 (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["recipe[pedant_testing_cookbook::default]"]
        searching for run_list:recipe[pedant_testing_cookbook@1.0.0] (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["recipe[pedant_testing_cookbook::default]"]
        searching for recipe:pedant_testing_cookbook (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["recipe[pedant_testing_cookbook::default]"]
        searching for run_list:recipe[pedant_testing_cookbook] (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["recipe[pedant_testing_cookbook::default]"]
        searching for recipe:pedant_testing_cookbook::default (properly escaped) should return the node,
      with a run_list of ["recipe[pedant_testing_cookbook::default]"]
        searching for run_list:recipe[pedant_testing_cookbook::default] (properly escaped) should return the node,
      with a run_list of ["recipe[pedant_testing_cookbook::default]"]
        searching for recipe:pedant_testing_cookbook::default@1.0.0 (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["recipe[pedant_testing_cookbook::default]"]
        searching for run_list:recipe[pedant_testing_cookbook::default@1.0.0] (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["recipe[pedant_testing_cookbook::default]"]
        searching for recipe:pedant_testing_cookbook@1.0.0 (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["recipe[pedant_testing_cookbook::default]"]
        searching for run_list:recipe[pedant_testing_cookbook@1.0.0] (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["recipe[pedant_testing_cookbook::default@1.0.0]"]
        searching for recipe:pedant_testing_cookbook (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["recipe[pedant_testing_cookbook::default@1.0.0]"]
        searching for run_list:recipe[pedant_testing_cookbook] (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["recipe[pedant_testing_cookbook::default@1.0.0]"]
        searching for recipe:pedant_testing_cookbook::default (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["recipe[pedant_testing_cookbook::default@1.0.0]"]
        searching for run_list:recipe[pedant_testing_cookbook::default] (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["recipe[pedant_testing_cookbook::default@1.0.0]"]
        searching for recipe:pedant_testing_cookbook::default@1.0.0 (properly escaped) should return the node,
      with a run_list of ["recipe[pedant_testing_cookbook::default@1.0.0]"]
        searching for run_list:recipe[pedant_testing_cookbook::default@1.0.0] (properly escaped) should return the node,
      with a run_list of ["recipe[pedant_testing_cookbook::default@1.0.0]"]
        searching for recipe:pedant_testing_cookbook@1.0.0 (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["recipe[pedant_testing_cookbook::default@1.0.0]"]
        searching for run_list:recipe[pedant_testing_cookbook@1.0.0] (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["recipe[pedant_testing_cookbook::default@1.0.0]"]
        searching for recipe:pedant_testing_cookbook (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["recipe[pedant_testing_cookbook::default@1.0.0]"]
        searching for run_list:recipe[pedant_testing_cookbook] (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["recipe[pedant_testing_cookbook::default@1.0.0]"]
        searching for recipe:pedant_testing_cookbook::default (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["recipe[pedant_testing_cookbook::default@1.0.0]"]
        searching for run_list:recipe[pedant_testing_cookbook::default] (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["recipe[pedant_testing_cookbook::default@1.0.0]"]
        searching for recipe:pedant_testing_cookbook::default@1.0.0 (properly escaped) should return the node,
      with a run_list of ["recipe[pedant_testing_cookbook::default@1.0.0]"]
        searching for run_list:recipe[pedant_testing_cookbook::default@1.0.0] (properly escaped) should return the node,
      with a run_list of ["recipe[pedant_testing_cookbook::default@1.0.0]"]
        searching for recipe:pedant_testing_cookbook@1.0.0 (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["recipe[pedant_testing_cookbook::default@1.0.0]"]
        searching for run_list:recipe[pedant_testing_cookbook@1.0.0] (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["recipe[pedant_testing_cookbook@1.0.0]"]
        searching for recipe:pedant_testing_cookbook (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["recipe[pedant_testing_cookbook@1.0.0]"]
        searching for run_list:recipe[pedant_testing_cookbook] (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["recipe[pedant_testing_cookbook@1.0.0]"]
        searching for recipe:pedant_testing_cookbook::default (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["recipe[pedant_testing_cookbook@1.0.0]"]
        searching for run_list:recipe[pedant_testing_cookbook::default] (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["recipe[pedant_testing_cookbook@1.0.0]"]
        searching for recipe:pedant_testing_cookbook::default@1.0.0 (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["recipe[pedant_testing_cookbook@1.0.0]"]
        searching for run_list:recipe[pedant_testing_cookbook::default@1.0.0] (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["recipe[pedant_testing_cookbook@1.0.0]"]
        searching for recipe:pedant_testing_cookbook@1.0.0 (properly escaped) should return the node,
      with a run_list of ["recipe[pedant_testing_cookbook@1.0.0]"]
        searching for run_list:recipe[pedant_testing_cookbook@1.0.0] (properly escaped) should return the node,
      with a run_list of ["recipe[pedant_testing_cookbook@1.0.0]"]
        searching for recipe:pedant_testing_cookbook (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["recipe[pedant_testing_cookbook@1.0.0]"]
        searching for run_list:recipe[pedant_testing_cookbook] (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["recipe[pedant_testing_cookbook@1.0.0]"]
        searching for recipe:pedant_testing_cookbook::default (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["recipe[pedant_testing_cookbook@1.0.0]"]
        searching for run_list:recipe[pedant_testing_cookbook::default] (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["recipe[pedant_testing_cookbook@1.0.0]"]
        searching for recipe:pedant_testing_cookbook::default@1.0.0 (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["recipe[pedant_testing_cookbook@1.0.0]"]
        searching for run_list:recipe[pedant_testing_cookbook::default@1.0.0] (properly escaped) should not return the node, because it is not the form that was initially entered in the run list
      with a run_list of ["recipe[pedant_testing_cookbook@1.0.0]"]
        searching for recipe:pedant_testing_cookbook@1.0.0 (properly escaped) should return the node,
      with a run_list of ["recipe[pedant_testing_cookbook@1.0.0]"]
        searching for run_list:recipe[pedant_testing_cookbook@1.0.0] (properly escaped) should return the node,
      with a node that has policyfile attributes
        finds nodes by policy_name
        finds nodes by policy_group
    POST
      should return filtered results when ACLs exist (PENDING: No reason given)
      targeted toward no nodes with body of {"possibly_nested"=>["top", "middle", "bottom"], "the_name"=>["name"], "not_found"=>["foo", "bar", "baz", "totally_not_a_real_field"], "empty"=>[]}
        should succeed, but return nothing
      targeted toward one node with body of {"possibly_nested"=>["top", "middle", "bottom"], "the_name"=>["name"], "not_found"=>["foo", "bar", "baz", "totally_not_a_real_field"], "empty"=>[]}
        should succeed, and return the single node
      targeted toward many nodes with body of {"possibly_nested"=>["top", "middle", "bottom"], "the_name"=>["name"], "not_found"=>["foo", "bar", "baz", "totally_not_a_real_field"], "empty"=>[]}
        should succeed, and return multiple nodes
      searching a node with [:default] attributes, with a partial search path of ["testing"]
        should return {"one"=>"default"}, showing default attributes are merged directly to the node
      searching a node with [:normal] attributes, with a partial search path of ["testing"]
        should return {"one"=>"normal"}, showing normal attributes are merged directly to the node
      searching a node with [:override] attributes, with a partial search path of ["testing"]
        should return {"one"=>"override"}, showing override attributes are merged directly to the node
      searching a node with [:automatic] attributes, with a partial search path of ["testing"]
        should return {"one"=>"automatic"}, showing automatic attributes are merged directly to the node
      searching a node with [:default, :normal] attributes, with a partial search path of ["testing"]
        should return {"one"=>"default", "two"=>"normal", "three"=>"normal", "four"=>"normal"}, showing 'default' < 'normal' attributes
      searching a node with [:default, :override] attributes, with a partial search path of ["testing"]
        should return {"one"=>"default", "two"=>"default", "three"=>"override", "four"=>"override"}, showing 'default' < 'override' attributes
      searching a node with [:default, :automatic] attributes, with a partial search path of ["testing"]
        should return {"one"=>"default", "two"=>"default", "three"=>"default", "four"=>"automatic"}, showing 'default' < 'automatic' attributes
      searching a node with [:normal, :override] attributes, with a partial search path of ["testing"]
        should return {"two"=>"normal", "three"=>"override", "four"=>"override"}, showing 'normal' <  'override' attributes
      searching a node with [:normal, :automatic] attributes, with a partial search path of ["testing"]
        should return {"two"=>"normal", "three"=>"normal", "four"=>"automatic"}, showing 'normal' < 'automatic' attributes
      searching a node with [:override, :automatic] attributes, with a partial search path of ["testing"]
        should return {"three"=>"override", "four"=>"automatic"}, showing 'override' <  'automatic' attributes
      searching a node with [:default, :normal, :override] attributes, with a partial search path of ["testing"]
        should return {"one"=>"default", "two"=>"normal", "three"=>"override", "four"=>"override"}, showing 'default' < 'normal' < 'override' attributes
      searching a node with [:default, :normal, :automatic] attributes, with a partial search path of ["testing"]
        should return {"one"=>"default", "two"=>"normal", "three"=>"normal", "four"=>"automatic"}, showing 'default' < 'normal' < 'automatic' attributes
      searching a node with [:default, :override, :automatic] attributes, with a partial search path of ["testing"]
        should return {"one"=>"default", "two"=>"default", "three"=>"override", "four"=>"automatic"}, showing 'default' < 'override' < 'automatic' attributes
      searching a node with [:normal, :override, :automatic] attributes, with a partial search path of ["testing"]
        should return {"two"=>"normal", "three"=>"override", "four"=>"automatic"}, showing 'normal' < 'override' < 'automatic' attributes
      searching a node with [:default, :normal, :override, :automatic] attributes, with a partial search path of ["testing"]
        should return {"one"=>"default", "two"=>"normal", "three"=>"override", "four"=>"automatic"}, showing 'default' < 'normal' < 'override' < 'automatic' attributes
  /search/role
    GET
      should return filtered results when ACL on roles exist (PENDING: No reason given)
      a search that should return no results
        should have multiple roles on the system (for our search to ignore)
        returns 200, with no search results
      when searching for a single role by name
        should have more than just the target of our role search on the system
        should return status code 200 and a single role
      when searching for multiple roles names using a * wildcard
        should have more than just the targets of our role search on the system
        should return all testing roles
      when searching for a limited number of rows
        returns the limited number of rows
        honors the start parameter
        has 0 rows when starting at the last item
    POST
      should return filtered results when ACLs exist (PENDING: No reason given)
      targeted toward no roles with body of {"possibly_nested"=>["override_attributes", "top", "middle", "bottom"], "the_name"=>["name"], "not_found"=>["foo", "bar", "baz", "totally_not_a_real_field"], "empty"=>[]}
        should succeed, but return nothing
      targeted toward one role with body of {"possibly_nested"=>["override_attributes", "top", "middle", "bottom"], "the_name"=>["name"], "not_found"=>["foo", "bar", "baz", "totally_not_a_real_field"], "empty"=>[]}
        should succeed, and return the single role
      targeted toward many roles with body of {"possibly_nested"=>["override_attributes", "top", "middle", "bottom"], "the_name"=>["name"], "not_found"=>["foo", "bar", "baz", "totally_not_a_real_field"], "empty"=>[]}
        should succeed, and return multiple roles
  /search/client
    GET
      with no criteria
        returns all the clients
      searching by name
        returns the correct client
      a search that should return no results
        should have multiple clients on the system (for our search to ignore)
        returns 200, with no search results
    POST
      targeted toward no clients with body of {"possibly_nested"=>["validator"], "the_name"=>["name"], "not_found"=>["foo", "bar", "baz", "totally_not_a_real_field"], "empty"=>[]}
        should succeed, but return nothing
      targeted toward one client with body of {"possibly_nested"=>["validator"], "the_name"=>["name"], "not_found"=>["foo", "bar", "baz", "totally_not_a_real_field"], "empty"=>[]}
        should succeed, and return the single client
      targeted toward many clients with body of {"possibly_nested"=>["validator"], "the_name"=>["name"], "not_found"=>["foo", "bar", "baz", "totally_not_a_real_field"], "empty"=>[]}
        should succeed, and return multiple clients
  /search/<data_bag>
    using GET
      for a nonexistent data bag
        should fail
      an existing data bag
        should return no results to an unauthorized user (PENDING: No reason given)
        a query that should succeed
          should succeed
        with nested keys (CHEF-3975)
          when searching a nested key
            should succeed
          when searching a nested key prefixed by raw_data_
            should return no results
    using POST
      for a nonexistent data bag
        does something (PENDING: Not yet implemented)
      for an existing data bag
        a partial search
          should succeed
        with nested keys (CHEF-3975)
          when searching a nested key
            should succeed
          when searching a nested key prefixed by raw_data_
            should return no results
    Search tokenizer
      When the Chef server has data bag items with "foo" and "foo-bar"
        A search for foo-bar returns foo-bar and nothing else
        A search for foo* AND NOT bar returns foo and foo-bar
  Index Deletion
    Roles
      it should behave like Deletes from Solr Index
        deletes an object from Solr when deleting from the system as a whole
    Nodes
      it should behave like Deletes from Solr Index
        deletes an object from Solr when deleting from the system as a whole
    Data Bag Items
      it should behave like Deletes from Solr Index
        deletes an object from Solr when deleting from the system as a whole
  partial search
    roles
      many results (roles)
        should have 10 results
      nodes
        returns partial results from default attributes of a node
        returns partial results from normal attributes of a node
        returns partial results from deep merged node attributes

Search API endpoint
  word break handling
    when searching for an attribute value containing the special character '!'
      with an exact match on name and value, should find the node
      with a wildcard match on attribute name with exact value, should find the node
      with a wildcard in attribute value around the special char, should find the node
      with a wildcard in attribute value before the special char with trailing match, should not find the node
      with a wildcard in attribute value before the special char with no trailing match, should find the node
      with a wildcard in attribute value after the special char with prefixing match, should find the node
      with a wildcard in attribute value after the special char with no prefixing match, should not find the node
      with an exact search for a partial match of the first word, should not find the node
      with an exact search for a partial match of the second word, should not find the node
      with a search for attribute value as a string without the special character, should not find the node
    when searching for attribute an attribute key containing the special character '!'
      with an exact match on name and value, should find the node
      with a wildcard match on key name with exact value, should find the node
      with a wildcard in attribute key around the special char, should find the node
      with a wildcard in attribute key before the special char with trailing match, should find the node
      with a wildcard in attribute key before the special char with no trailing match, should not find the node
      with a wildcard in attribute key after the special char with no prefixing match, should not find the node
      with a wildcard in attribute key after the special char with prefixing match, should find the node
      with an exact search for a partial match of the first word, should not find the node
      with an exact search for a partial match of the second word, should not find the node
      with a search for attribute key as a string without the special character, should not find the node
    when searching for an attribute value containing the special character '"'
      with an exact match on name and value, should find the node
      with a wildcard match on attribute name with exact value, should find the node
      with a wildcard in attribute value around the special char, should find the node
      with a wildcard in attribute value before the special char with trailing match, should not find the node
      with a wildcard in attribute value before the special char with no trailing match, should find the node
      with a wildcard in attribute value after the special char with prefixing match, should find the node
      with a wildcard in attribute value after the special char with no prefixing match, should not find the node
      with an exact search for a partial match of the first word, should not find the node
      with an exact search for a partial match of the second word, should not find the node
      with a search for attribute value as a string without the special character, should not find the node
    when searching for attribute an attribute key containing the special character '"'
      with an exact match on name and value, should find the node
      with a wildcard match on key name with exact value, should find the node
      with a wildcard in attribute key around the special char, should find the node
      with a wildcard in attribute key before the special char with trailing match, should find the node
      with a wildcard in attribute key before the special char with no trailing match, should not find the node
      with a wildcard in attribute key after the special char with no prefixing match, should not find the node
      with a wildcard in attribute key after the special char with prefixing match, should find the node
      with an exact search for a partial match of the first word, should not find the node
      with an exact search for a partial match of the second word, should not find the node
      with a search for attribute key as a string without the special character, should not find the node
    when searching for an attribute value containing the special character '$'
      with an exact search for a partial match of the first word, should not find the node
      with an exact search for a partial match of the second word, should not find the node
      with a search for attribute value as a string without the special character, should not find the node
    when searching for attribute an attribute key containing the special character '$'
      with an exact search for a partial match of the first word, should not find the node
      with an exact search for a partial match of the second word, should not find the node
      with a search for attribute key as a string without the special character, should not find the node
    when searching for an attribute value containing the special character '%'
      with an exact search for a partial match of the first word, should not find the node
      with an exact search for a partial match of the second word, should not find the node
      with a search for attribute value as a string without the special character, should not find the node
    when searching for attribute an attribute key containing the special character '%'
      with an exact search for a partial match of the first word, should not find the node
      with an exact search for a partial match of the second word, should not find the node
      with a search for attribute key as a string without the special character, should not find the node
    when searching for an attribute value containing the special character '&'
      with an exact search for a partial match of the first word, should not find the node
      with an exact search for a partial match of the second word, should not find the node
      with a search for attribute value as a string without the special character, should not find the node
    when searching for attribute an attribute key containing the special character '&'
      with an exact search for a partial match of the first word, should not find the node
      with an exact search for a partial match of the second word, should not find the node
      with a search for attribute key as a string without the special character, should not find the node
    when searching for an attribute value containing the special character '('
      with an exact match on name and value, should find the node
      with a wildcard match on attribute name with exact value, should find the node
      with a wildcard in attribute value around the special char, should find the node
      with a wildcard in attribute value before the special char with trailing match, should not find the node
      with a wildcard in attribute value before the special char with no trailing match, should find the node
      with a wildcard in attribute value after the special char with prefixing match, should find the node
      with a wildcard in attribute value after the special char with no prefixing match, should not find the node
      with an exact search for a partial match of the first word, should not find the node
      with an exact search for a partial match of the second word, should not find the node
      with a search for attribute value as a string without the special character, should not find the node
    when searching for attribute an attribute key containing the special character '('
      with an exact match on name and value, should find the node
      with a wildcard match on key name with exact value, should find the node
      with a wildcard in attribute key around the special char, should find the node
      with a wildcard in attribute key before the special char with trailing match, should find the node
      with a wildcard in attribute key before the special char with no trailing match, should not find the node
      with a wildcard in attribute key after the special char with no prefixing match, should not find the node
      with a wildcard in attribute key after the special char with prefixing match, should find the node
      with an exact search for a partial match of the first word, should not find the node
      with an exact search for a partial match of the second word, should not find the node
      with a search for attribute key as a string without the special character, should not find the node
    when searching for an attribute value containing the special character ')'
      with an exact match on name and value, should find the node
      with a wildcard match on attribute name with exact value, should find the node
      with a wildcard in attribute value around the special char, should find the node
      with a wildcard in attribute value before the special char with trailing match, should not find the node
      with a wildcard in attribute value before the special char with no trailing match, should find the node
      with a wildcard in attribute value after the special char with prefixing match, should find the node
      with a wildcard in attribute value after the special char with no prefixing match, should not find the node
      with an exact search for a partial match of the first word, should not find the node
      with an exact search for a partial match of the second word, should not find the node
      with a search for attribute value as a string without the special character, should not find the node
    when searching for attribute an attribute key containing the special character ')'
      with an exact match on name and value, should find the node
      with a wildcard match on key name with exact value, should find the node
      with a wildcard in attribute key around the special char, should find the node
      with a wildcard in attribute key before the special char with trailing match, should find the node
      with a wildcard in attribute key before the special char with no trailing match, should not find the node
      with a wildcard in attribute key after the special char with no prefixing match, should not find the node
      with a wildcard in attribute key after the special char with prefixing match, should find the node
      with an exact search for a partial match of the first word, should not find the node
      with an exact search for a partial match of the second word, should not find the node
      with a search for attribute key as a string without the special character, should not find the node
    when searching for an attribute value containing the special character '*'
      with an exact match on name and value, should find the node
      with a wildcard match on attribute name with exact value, should find the node
      with a wildcard in attribute value around the special char, should find the node
      with a wildcard in attribute value before the special char with trailing match, should not find the node
      with a wildcard in attribute value before the special char with no trailing match, should find the node
      with a wildcard in attribute value after the special char with prefixing match, should find the node
      with a wildcard in attribute value after the special char with no prefixing match, should not find the node
      with an exact search for a partial match of the first word, should not find the node
      with an exact search for a partial match of the second word, should not find the node
      with a search for attribute value as a string without the special character, should not find the node
    when searching for attribute an attribute key containing the special character '*'
      with an exact match on name and value, should find the node
      with a wildcard match on key name with exact value, should find the node
      with a wildcard in attribute key around the special char, should find the node
      with a wildcard in attribute key before the special char with trailing match, should find the node
      with a wildcard in attribute key before the special char with no trailing match, should not find the node
      with a wildcard in attribute key after the special char with no prefixing match, should not find the node
      with a wildcard in attribute key after the special char with prefixing match, should find the node
      with an exact search for a partial match of the first word, should not find the node
      with an exact search for a partial match of the second word, should not find the node
      with a search for attribute key as a string without the special character, should not find the node
    when searching for an attribute value containing the special character '+'
      with an exact search for a partial match of the first word, should not find the node
      with an exact search for a partial match of the second word, should not find the node
      with a search for attribute value as a string without the special character, should not find the node
    when searching for attribute an attribute key containing the special character '+'
      with an exact search for a partial match of the first word, should not find the node
      with an exact search for a partial match of the second word, should not find the node
      with a search for attribute key as a string without the special character, should not find the node
    when searching for an attribute value containing the special character ','
      with an exact search for a partial match of the first word, should not find the node
      with an exact search for a partial match of the second word, should not find the node
      with a search for attribute value as a string without the special character, should not find the node
    when searching for attribute an attribute key containing the special character ','
      with an exact search for a partial match of the first word, should not find the node
      with an exact search for a partial match of the second word, should not find the node
      with a search for attribute key as a string without the special character, should not find the node
    when searching for an attribute value containing the special character '-'
      with an exact search for a partial match of the first word, should not find the node
      with an exact search for a partial match of the second word, should not find the node
      with a search for attribute value as a string without the special character, should not find the node
    when searching for attribute an attribute key containing the special character '-'
      with an exact search for a partial match of the first word, should not find the node
      with an exact search for a partial match of the second word, should not find the node
      with a search for attribute key as a string without the special character, should not find the node
    when searching for an attribute value containing the special character ':'
      with an exact match on name and value, should find the node
      with a wildcard match on attribute name with exact value, should find the node
      with a wildcard in attribute value around the special char, should find the node
      with a wildcard in attribute value before the special char with trailing match, should not find the node
      with a wildcard in attribute value before the special char with no trailing match, should find the node
      with a wildcard in attribute value after the special char with prefixing match, should find the node
      with a wildcard in attribute value after the special char with no prefixing match, should not find the node
      with an exact search for a partial match of the first word, should not find the node
      with an exact search for a partial match of the second word, should not find the node
      with a search for attribute value as a string without the special character, should not find the node
    when searching for attribute an attribute key containing the special character ':'
      with an exact match on name and value, should find the node
      with a wildcard match on key name with exact value, should find the node
      with a wildcard in attribute key around the special char, should find the node
      with a wildcard in attribute key before the special char with trailing match, should find the node
      with a wildcard in attribute key before the special char with no trailing match, should not find the node
      with a wildcard in attribute key after the special char with no prefixing match, should not find the node
      with a wildcard in attribute key after the special char with prefixing match, should find the node
      with an exact search for a partial match of the first word, should not find the node
      with an exact search for a partial match of the second word, should not find the node
      with a search for attribute key as a string without the special character, should not find the node
    when searching for an attribute value containing the special character ';'
      with an exact search for a partial match of the first word, should not find the node
      with an exact search for a partial match of the second word, should not find the node
      with a search for attribute value as a string without the special character, should not find the node
    when searching for attribute an attribute key containing the special character ';'
      with an exact search for a partial match of the first word, should not find the node
      with an exact search for a partial match of the second word, should not find the node
      with a search for attribute key as a string without the special character, should not find the node
    when searching for an attribute value containing the special character '<'
      with an exact search for a partial match of the first word, should not find the node
      with an exact search for a partial match of the second word, should not find the node
      with a search for attribute value as a string without the special character, should not find the node
    when searching for attribute an attribute key containing the special character '<'
      with an exact search for a partial match of the first word, should not find the node
      with an exact search for a partial match of the second word, should not find the node
      with a search for attribute key as a string without the special character, should not find the node
    when searching for an attribute value containing the special character '='
      with an exact search for a partial match of the first word, should not find the node
      with an exact search for a partial match of the second word, should not find the node
      with a search for attribute value as a string without the special character, should not find the node
    when searching for attribute an attribute key containing the special character '='
      with an exact search for a partial match of the first word, should not find the node
      with an exact search for a partial match of the second word, should not find the node
      with a search for attribute key as a string without the special character, should not find the node
    when searching for an attribute value containing the special character '>'
      with an exact search for a partial match of the first word, should not find the node
      with an exact search for a partial match of the second word, should not find the node
      with a search for attribute value as a string without the special character, should not find the node
    when searching for attribute an attribute key containing the special character '>'
      with an exact search for a partial match of the first word, should not find the node
      with an exact search for a partial match of the second word, should not find the node
      with a search for attribute key as a string without the special character, should not find the node
    when searching for an attribute value containing the special character '?'
      with an exact match on name and value, should find the node
      with a wildcard match on attribute name with exact value, should find the node
      with a wildcard in attribute value around the special char, should find the node
      with a wildcard in attribute value before the special char with trailing match, should not find the node
      with a wildcard in attribute value before the special char with no trailing match, should find the node
      with a wildcard in attribute value after the special char with prefixing match, should find the node
      with a wildcard in attribute value after the special char with no prefixing match, should not find the node
      with an exact search for a partial match of the first word, should not find the node
      with an exact search for a partial match of the second word, should not find the node
      with a search for attribute value as a string without the special character, should not find the node
    when searching for attribute an attribute key containing the special character '?'
      with an exact match on name and value, should find the node
      with a wildcard match on key name with exact value, should find the node
      with a wildcard in attribute key around the special char, should find the node
      with a wildcard in attribute key before the special char with trailing match, should find the node
      with a wildcard in attribute key before the special char with no trailing match, should not find the node
      with a wildcard in attribute key after the special char with no prefixing match, should not find the node
      with a wildcard in attribute key after the special char with prefixing match, should find the node
      with an exact search for a partial match of the first word, should not find the node
      with an exact search for a partial match of the second word, should not find the node
      with a search for attribute key as a string without the special character, should not find the node
    when searching for an attribute value containing the special character '@'
      with an exact search for a partial match of the first word, should not find the node
      with an exact search for a partial match of the second word, should not find the node
      with a search for attribute value as a string without the special character, should not find the node
    when searching for attribute an attribute key containing the special character '@'
      with an exact search for a partial match of the first word, should not find the node
      with an exact search for a partial match of the second word, should not find the node
      with a search for attribute key as a string without the special character, should not find the node
    when searching for an attribute value containing the special character '['
      with an exact match on name and value, should find the node
      with a wildcard match on attribute name with exact value, should find the node
      with a wildcard in attribute value around the special char, should find the node
      with a wildcard in attribute value before the special char with trailing match, should not find the node
      with a wildcard in attribute value before the special char with no trailing match, should find the node
      with a wildcard in attribute value after the special char with prefixing match, should find the node
      with a wildcard in attribute value after the special char with no prefixing match, should not find the node
      with an exact search for a partial match of the first word, should not find the node
      with an exact search for a partial match of the second word, should not find the node
      with a search for attribute value as a string without the special character, should not find the node
    when searching for attribute an attribute key containing the special character '['
      with an exact match on name and value, should find the node
      with a wildcard match on key name with exact value, should find the node
      with a wildcard in attribute key around the special char, should find the node
      with a wildcard in attribute key before the special char with trailing match, should find the node
      with a wildcard in attribute key before the special char with no trailing match, should not find the node
      with a wildcard in attribute key after the special char with no prefixing match, should not find the node
      with a wildcard in attribute key after the special char with prefixing match, should find the node
      with an exact search for a partial match of the first word, should not find the node
      with an exact search for a partial match of the second word, should not find the node
      with a search for attribute key as a string without the special character, should not find the node
    when searching for an attribute value containing the special character '\'
      with an exact match on name and value, should find the node
      with a wildcard match on attribute name with exact value, should find the node
      with a wildcard in attribute value around the special char, should find the node
      with a wildcard in attribute value before the special char with trailing match, should not find the node
      with a wildcard in attribute value before the special char with no trailing match, should find the node
      with a wildcard in attribute value after the special char with prefixing match, should find the node
      with a wildcard in attribute value after the special char with no prefixing match, should not find the node
      with an exact search for a partial match of the first word, should not find the node
      with an exact search for a partial match of the second word, should not find the node
      with a search for attribute value as a string without the special character, should not find the node
    when searching for attribute an attribute key containing the special character '\'
      with an exact match on name and value, should find the node
      with a wildcard match on key name with exact value, should find the node
      with a wildcard in attribute key around the special char, should find the node
      with a wildcard in attribute key before the special char with trailing match, should find the node
      with a wildcard in attribute key before the special char with no trailing match, should not find the node
      with a wildcard in attribute key after the special char with no prefixing match, should not find the node
      with a wildcard in attribute key after the special char with prefixing match, should find the node
      with an exact search for a partial match of the first word, should not find the node
      with an exact search for a partial match of the second word, should not find the node
      with a search for attribute key as a string without the special character, should not find the node
    when searching for an attribute value containing the special character ']'
      with an exact match on name and value, should find the node
      with a wildcard match on attribute name with exact value, should find the node
      with a wildcard in attribute value around the special char, should find the node
      with a wildcard in attribute value before the special char with trailing match, should not find the node
      with a wildcard in attribute value before the special char with no trailing match, should find the node
      with a wildcard in attribute value after the special char with prefixing match, should find the node
      with a wildcard in attribute value after the special char with no prefixing match, should not find the node
      with an exact search for a partial match of the first word, should not find the node
      with an exact search for a partial match of the second word, should not find the node
      with a search for attribute value as a string without the special character, should not find the node
    when searching for attribute an attribute key containing the special character ']'
      with an exact match on name and value, should find the node
      with a wildcard match on key name with exact value, should find the node
      with a wildcard in attribute key around the special char, should find the node
      with a wildcard in attribute key before the special char with trailing match, should find the node
      with a wildcard in attribute key before the special char with no trailing match, should not find the node
      with a wildcard in attribute key after the special char with no prefixing match, should not find the node
      with a wildcard in attribute key after the special char with prefixing match, should find the node
      with an exact search for a partial match of the first word, should not find the node
      with an exact search for a partial match of the second word, should not find the node
      with a search for attribute key as a string without the special character, should not find the node
    when searching for an attribute value containing the special character '%'
      with an exact search for a partial match of the first word, should not find the node
      with an exact search for a partial match of the second word, should not find the node
      with a search for attribute value as a string without the special character, should not find the node
    when searching for attribute an attribute key containing the special character '%'
      with an exact search for a partial match of the first word, should not find the node
      with an exact search for a partial match of the second word, should not find the node
      with a search for attribute key as a string without the special character, should not find the node
    when searching for an attribute value containing the special character '_'
      with an exact search for a partial match of the first word, should not find the node
      with an exact search for a partial match of the second word, should not find the node
      with a search for attribute value as a string without the special character, should not find the node
    when searching for attribute an attribute key containing the special character '_'
      with an exact search for a partial match of the first word, should not find the node
      with an exact search for a partial match of the second word, should not find the node
      with a search for attribute key as a string without the special character, should not find the node
    when searching for an attribute value containing the special character '`'
      with an exact search for a partial match of the first word, should not find the node
      with an exact search for a partial match of the second word, should not find the node
      with a search for attribute value as a string without the special character, should not find the node
    when searching for attribute an attribute key containing the special character '`'
      with an exact search for a partial match of the first word, should not find the node
      with an exact search for a partial match of the second word, should not find the node
      with a search for attribute key as a string without the special character, should not find the node
    when searching for an attribute value containing the special character '{'
      with an exact match on name and value, should find the node
      with a wildcard match on attribute name with exact value, should find the node
      with a wildcard in attribute value around the special char, should find the node
      with a wildcard in attribute value before the special char with trailing match, should not find the node
      with a wildcard in attribute value before the special char with no trailing match, should find the node
      with a wildcard in attribute value after the special char with prefixing match, should find the node
      with a wildcard in attribute value after the special char with no prefixing match, should not find the node
      with an exact search for a partial match of the first word, should not find the node
      with an exact search for a partial match of the second word, should not find the node
      with a search for attribute value as a string without the special character, should not find the node
    when searching for attribute an attribute key containing the special character '{'
      with an exact match on name and value, should find the node
      with a wildcard match on key name with exact value, should find the node
      with a wildcard in attribute key around the special char, should find the node
      with a wildcard in attribute key before the special char with trailing match, should find the node
      with a wildcard in attribute key before the special char with no trailing match, should not find the node
      with a wildcard in attribute key after the special char with no prefixing match, should not find the node
      with a wildcard in attribute key after the special char with prefixing match, should find the node
      with an exact search for a partial match of the first word, should not find the node
      with an exact search for a partial match of the second word, should not find the node
      with a search for attribute key as a string without the special character, should not find the node
    when searching for an attribute value containing the special character '|'
      with an exact search for a partial match of the first word, should not find the node
      with an exact search for a partial match of the second word, should not find the node
      with a search for attribute value as a string without the special character, should not find the node
    when searching for attribute an attribute key containing the special character '|'
      with an exact search for a partial match of the first word, should not find the node
      with an exact search for a partial match of the second word, should not find the node
      with a search for attribute key as a string without the special character, should not find the node
    when searching for an attribute value containing the special character '}'
      with an exact match on name and value, should find the node
      with a wildcard match on attribute name with exact value, should find the node
      with a wildcard in attribute value around the special char, should find the node
      with a wildcard in attribute value before the special char with trailing match, should not find the node
      with a wildcard in attribute value before the special char with no trailing match, should find the node
      with a wildcard in attribute value after the special char with prefixing match, should find the node
      with a wildcard in attribute value after the special char with no prefixing match, should not find the node
      with an exact search for a partial match of the first word, should not find the node
      with an exact search for a partial match of the second word, should not find the node
      with a search for attribute value as a string without the special character, should not find the node
    when searching for attribute an attribute key containing the special character '}'
      with an exact match on name and value, should find the node
      with a wildcard match on key name with exact value, should find the node
      with a wildcard in attribute key around the special char, should find the node
      with a wildcard in attribute key before the special char with trailing match, should find the node
      with a wildcard in attribute key before the special char with no trailing match, should not find the node
      with a wildcard in attribute key after the special char with no prefixing match, should not find the node
      with a wildcard in attribute key after the special char with prefixing match, should find the node
      with an exact search for a partial match of the first word, should not find the node
      with an exact search for a partial match of the second word, should not find the node
      with a search for attribute key as a string without the special character, should not find the node
    when searching for an attribute value containing the special character '~'
      with an exact match on name and value, should find the node
      with a wildcard match on attribute name with exact value, should find the node
      with a wildcard in attribute value around the special char, should find the node
      with a wildcard in attribute value before the special char with trailing match, should not find the node
      with a wildcard in attribute value before the special char with no trailing match, should find the node
      with a wildcard in attribute value after the special char with prefixing match, should find the node
      with a wildcard in attribute value after the special char with no prefixing match, should not find the node
      with an exact search for a partial match of the first word, should not find the node
      with an exact search for a partial match of the second word, should not find the node
      with a search for attribute value as a string without the special character, should not find the node
    when searching for attribute an attribute key containing the special character '~'
      with an exact match on name and value, should find the node
      with a wildcard match on key name with exact value, should find the node
      with a wildcard in attribute key around the special char, should find the node
      with a wildcard in attribute key before the special char with trailing match, should find the node
      with a wildcard in attribute key before the special char with no trailing match, should not find the node
      with a wildcard in attribute key after the special char with no prefixing match, should not find the node
      with a wildcard in attribute key after the special char with prefixing match, should find the node
      with an exact search for a partial match of the first word, should not find the node
      with an exact search for a partial match of the second word, should not find the node
      with a search for attribute key as a string without the special character, should not find the node
    when searching for an attribute value containing the special character '''
      with an exact search for a partial match of the first word, should not find the node
      with an exact search for a partial match of the second word, should not find the node
      with a search for attribute value as a string without the special character, should not find the node
    when searching for attribute an attribute key containing the special character '''
      with an exact search for a partial match of the first word, should not find the node
      with an exact search for a partial match of the second word, should not find the node
      with a search for attribute key as a string without the special character, should not find the node
    when searching for an attribute value containing the special character '\'
      with an exact match on name and value, should find the node
      with a wildcard match on attribute name with exact value, should find the node
      with a wildcard in attribute value around the special char, should find the node
      with a wildcard in attribute value before the special char with trailing match, should not find the node
      with a wildcard in attribute value before the special char with no trailing match, should find the node
      with a wildcard in attribute value after the special char with prefixing match, should find the node
      with a wildcard in attribute value after the special char with no prefixing match, should not find the node
      with an exact search for a partial match of the first word, should not find the node
      with an exact search for a partial match of the second word, should not find the node
      with a search for attribute value as a string without the special character, should not find the node
    when searching for attribute an attribute key containing the special character '\'
      with an exact match on name and value, should find the node
      with a wildcard match on key name with exact value, should find the node
      with a wildcard in attribute key around the special char, should find the node
      with a wildcard in attribute key before the special char with trailing match, should find the node
      with a wildcard in attribute key before the special char with no trailing match, should not find the node
      with a wildcard in attribute key after the special char with no prefixing match, should not find the node
      with a wildcard in attribute key after the special char with prefixing match, should find the node
      with an exact search for a partial match of the first word, should not find the node
      with an exact search for a partial match of the second word, should not find the node
      with a search for attribute key as a string without the special character, should not find the node

Server API Versioning
/home/travis/.rvm/gems/ruby-2.4.1/bundler/gems/chef-server-0ecebf2c610d/oc-chef-pedant/spec/api/server_api_version_spec.rb:9: warning: constant ::Fixnum is deprecated
/home/travis/.rvm/gems/ruby-2.4.1/bundler/gems/chef-server-0ecebf2c610d/oc-chef-pedant/spec/api/server_api_version_spec.rb:10: warning: constant ::Fixnum is deprecated
  GET /server_api_version should respond with valid current server api version data
  version validation should occur before most other validation
    invalid method should fail for version, not method
    invalid content should fail for version, not content
  any request should validate requested server api version
    and it should reply with the error message as specified in the RFC
    and rejects when version is not a number
    and rejects when version is higher than what's supported
    and rejects when version is lower than what's supported
    and accepts when version is exactly the minimum of what's supported
    and accepts when version is exactly the maximum of what's supported
    and accepts when it's in valid range of what's supported
    and accept it when it's not specified

Server API v1 Behaviors
  [v1+]
    search results should not include client key data (PENDING: No reason given)
    clients
      POST /organizations/:org/clients
        it should behave like actor creation validation
          should allow create_key: true and give a proper valid key in response
          should allow allow public_key to be provided and respond with its location
          should accept the public key if both create_key:false and public_key are specified
          when neither create_key nor public_key is specified, the operation should succeed and no default key is created
      PUT /organization/:org/clients/:name
        it should behave like actor update validation
          should allow an update that doesn't include public_key or create_key
      GET /organization/:org/clients/:name
        behaves like actor read validation
          should not include public_key
Pedant did not create the user pivotal, and will not delete it
Pedant did not create the user pivotal, and will not delete it
Pedant did not create the user pivotal, and will not delete it
Pedant did not create the org, so will not delete it

Pending: (Failures listed here are expected and do not affect your suite's status)

  1) opscode-account groups /groups/<name> endpoint PUT /groups/<name> permissions admin user cannot remove self from group can update group
     # pending discussion
     # /home/travis/.rvm/gems/ruby-2.4.1/bundler/gems/chef-server-0ecebf2c610d/oc-chef-pedant/spec/api/account/account_group_spec.rb:715

  2) opscode-account groups /groups/<name> endpoint PUT /groups/<name> permissions normal user with update ACE cannot remove self can update group
     # pending discussion
     # /home/travis/.rvm/gems/ruby-2.4.1/bundler/gems/chef-server-0ecebf2c610d/oc-chef-pedant/spec/api/account/account_group_spec.rb:771

  3) opscode-account endpoint Client Creation by a validator a new validator should have read / create permissions on clients container
     # No reason given
     # /home/travis/.rvm/gems/ruby-2.4.1/bundler/gems/chef-server-0ecebf2c610d/oc-chef-pedant/spec/api/clients/account_client_spec.rb:264

  4) Client API endpoint PUT /clients/<name> as an admin requestor RSpec::ExampleGroups::ClientAPIEndpoint::PUTClientsName::AsAnAdminRequestor::AdminUpdatesToValidatorClientAppearToBeMisbehavingOrMisconfigured
     # No reason given
     # /home/travis/.rvm/gems/ruby-2.4.1/bundler/gems/chef-server-0ecebf2c610d/oc-chef-pedant/spec/api/clients/complete_endpoint_spec.rb:379

  5) Client API endpoint PUT /clients/<name> as a normal client with self normal clients should not be able to upgrade themselves to validator - are we testing what we think we are?
     # No reason given
     # /home/travis/.rvm/gems/ruby-2.4.1/bundler/gems/chef-server-0ecebf2c610d/oc-chef-pedant/spec/api/clients/complete_endpoint_spec.rb:456

  6) Environments API Endpoint POST /environments with no additional environments when handling the payload when sending something other than application/json webmachine not sucking
     # No reason given
     # /home/travis/.rvm/gems/ruby-2.4.1/bundler/gems/chef-server-0ecebf2c610d/oc-chef-pedant/spec/api/environments/create_oss_spec.rb:104

  7) Environments API Endpoint POST /environments with no additional environments when handling the payload
     # No reason given
     # /home/travis/.rvm/gems/ruby-2.4.1/bundler/gems/chef-server-0ecebf2c610d/oc-chef-pedant/spec/api/environments/create_spec.rb:133

  8) Environments API Endpoint GET /environments with no additional environments should respond to cookbook versions
     # Not yet implemented
     # /home/travis/.rvm/gems/ruby-2.4.1/bundler/gems/chef-server-0ecebf2c610d/oc-chef-pedant/spec/api/environments/read_oss_spec.rb:49

  9) Environments API Endpoint GET with no additional environments should respond to cookbook versions
     # Not yet implemented
     # /home/travis/.rvm/gems/ruby-2.4.1/bundler/gems/chef-server-0ecebf2c610d/oc-chef-pedant/spec/api/environments/read_spec.rb:65

  10) Environments API Endpoint with non-default environments in the organization PUT /environments/<name> when handling request headers and payload when sending something other than application/json webmachine not sucking
     # No reason given
     # /home/travis/.rvm/gems/ruby-2.4.1/bundler/gems/chef-server-0ecebf2c610d/oc-chef-pedant/spec/api/environments/update_oss_spec.rb:119

  11) Search API endpoint /search/environment GET should return filtered results when ACL on environments exist
     # No reason given
     # /home/travis/.rvm/gems/ruby-2.4.1/bundler/gems/chef-server-0ecebf2c610d/oc-chef-pedant/lib/pedant/rspec/search_util.rb:108

  12) Search API endpoint /search/environment POST should return filtered results when ACLs exist
     # No reason given
     # /home/travis/.rvm/gems/ruby-2.4.1/bundler/gems/chef-server-0ecebf2c610d/oc-chef-pedant/lib/pedant/rspec/search_util.rb:499

  13) Search API endpoint /search/node GET should return filtered results when ACL on nodes exist
     # No reason given
     # /home/travis/.rvm/gems/ruby-2.4.1/bundler/gems/chef-server-0ecebf2c610d/oc-chef-pedant/lib/pedant/rspec/search_util.rb:108

  14) Search API endpoint /search/node POST should return filtered results when ACLs exist
     # No reason given
     # /home/travis/.rvm/gems/ruby-2.4.1/bundler/gems/chef-server-0ecebf2c610d/oc-chef-pedant/lib/pedant/rspec/search_util.rb:499

  15) Search API endpoint /search/role GET should return filtered results when ACL on roles exist
     # No reason given
     # /home/travis/.rvm/gems/ruby-2.4.1/bundler/gems/chef-server-0ecebf2c610d/oc-chef-pedant/lib/pedant/rspec/search_util.rb:108

  16) Search API endpoint /search/role POST should return filtered results when ACLs exist
     # No reason given
     # /home/travis/.rvm/gems/ruby-2.4.1/bundler/gems/chef-server-0ecebf2c610d/oc-chef-pedant/lib/pedant/rspec/search_util.rb:499

  17) Search API endpoint /search/<data_bag> using GET an existing data bag should return no results to an unauthorized user
     # No reason given
     # /home/travis/.rvm/gems/ruby-2.4.1/bundler/gems/chef-server-0ecebf2c610d/oc-chef-pedant/spec/api/search/search_spec.rb:463

  18) Search API endpoint /search/<data_bag> using POST for a nonexistent data bag does something
     # Not yet implemented
     # /home/travis/.rvm/gems/ruby-2.4.1/bundler/gems/chef-server-0ecebf2c610d/oc-chef-pedant/spec/api/search/search_spec.rb:481

  19) Server API v1 Behaviors [v1+] search results should not include client key data
     # No reason given
     # /home/travis/.rvm/gems/ruby-2.4.1/bundler/gems/chef-server-0ecebf2c610d/oc-chef-pedant/spec/api/versioned_behaviors/server_api_v1_spec.rb:85


Finished in 7 minutes 15 seconds (files took 5.58 seconds to load)
2193 examples, 0 failures, 19 pending


travis_time:end:1411b0fe:start=1496823026824716210,finish=1496823546054388624,duration=519229672414
The command "bundle exec tasks/bin/run_external_test $TEST_GEM master rake spec cheffs" exited with 0.
travis_fold:start:cache.2store build cache
$ bundle clean
travis_time:start:04aac16a
travis_time:end:04aac16a:start=1496823547053201622,finish=1496823547064247549,duration=11045927travis_time:start:120c9731nothing changed, not updating cache

travis_time:end:120c9731:start=1496823547078652601,finish=1496823549818733501,duration=2740080900travis_fold:end:cache.2
Done. Your build exited with 0.
