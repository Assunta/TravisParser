<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Home user</title>
      <link type="text/css" rel="stylesheet" href="../static/jqwidget/jqwidgets/styles/jqx.base.css" />
      <link type="text/css" rel="stylesheet" href="../static/jqwidget/jqwidgets/styles/jqx.summer.css" />

    	<meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
      <link rel="stylesheet" href="../static/jqwidget/styles/bootstrap.min.css" />
    <link rel="stylesheet" href="../static/jqwidget/styles/bootstrap-theme.min.css" />
    <script type="text/javascript" src="../static/jqwidget/scripts/jquery-1.11.1.min.js"></script>
    <script type="text/javascript" src="../static/jqwidget/scripts/bootstrap.min.js"></script>
    <link rel="stylesheet" href="../static/jqwidget/styles/style.css" />

    <script type="text/javascript" src="../static/jqwidget/jqwidgets/jqxcore.js"></script>
    <script type="text/javascript" src="../static/jqwidget/jqwidgets/jqxinput.js"></script>
    <script type="text/javascript" src="../static/jqwidget/jqwidgets/jqxtooltip.js"></script>
    <script type="text/javascript" src="../static/jqwidget/jqwidgets/globalization/globalize.js"></script>
    <script type="text/javascript" src="../static/jqwidget/jqwidgets/jqxbuttons.js"></script>
    <script type="text/javascript" src="../static/jqwidget/jqwidgets/jqxscrollbar.js"></script>
    <script type="text/javascript" src="../static/jqwidget/jqwidgets/jqxdropdownlist.js"></script>
    <script type="text/javascript" src="../static/jqwidget/jqwidgets/jqxexpander.js"></script>
    <script type="text/javascript" src="../static/jqwidget/jqwidgets/jqxvalidator.js"></script>
    <script type="text/javascript" src="../static/jqwidget/jqwidgets/jqxmenu.js"></script>
      <script type="text/javascript" src="../static/jqwidget/jqwidgets/jqxnotification.js"></script>
       <script type="text/javascript" src="../static/jqwidget/jqwidgets/jqxdropdownlist.js"></script>
      <script type="text/javascript" src="../static/jqwidget/jqwidgets/jqxlistbox.js"></script>
    <script type="text/javascript" src="../static/jqwidget/scripts/demos.js"></script>
    <script type="text/javascript" src="../static/jqwidget/jqwidgets/jqxdata.js"></script>



   <script type="text/javascript">
        $(document).ready(function () {
         $("#input").jqxInput({placeHolder: "username/project", height: 25, width: 200, minLength: 1 });
          var source='{{projects}}'.split(',');
          var a=[];
            for(var i=0; i<source.length; i++){
            a[i]=source[i]
            a[i]=a[i].replace("[", "").replace("]","")
            }

          $('#selectProject').jqxDropDownList({source: a, selectedIndex: 0, width:"50%",autoDropDownHeight: true, height: '20'});


         $("#getProjectButton").jqxButton({template: "inverse",  width: 160, height: 25 });
         $("#getProjectButton").on('click', function ()
            {
            //get project name
               var item = $("#selectProject").jqxDropDownList('getSelectedItem').value;
               //submit form
               <!--$('#formGetProject').attr("reponame", item);-->
                $('#formGetProject').append('<input type="hidden" name="reponame" value='+item+'>');
                $('#formGetProject').submit();
            });

        $("#addProjectButton").jqxButton({template: "inverse",  width: 160, height: 25 });



        //logout
         $('.topBar li').on('click', function (e)
            {
                if (!e.currentTarget.textContent)
                {
                    $.ajax({
                            url: "/logout",
                            type: 'GET',
                            success: function(data)
                            {
                                window.location.href='/home'
                            },
                            error: function(error)
                            {
                                 console.log(error);
                            }
                        });
                }
            });
        });


    </script>
</head>
<body>
<div class="header-wrap">
        <div class="container">
            <div class="row" style="padding-top:1.2em;">
                <div class="col-md-6"></div>
                <div class="col-md-6">
                    <ul class="list-inline pull-right topBar">
                        <li style="margin-left:1.4em"><p><span class="glyphicon glyphicon-envelope" aria-hidden="true" style="margin-right:0.3em"></span>Help</p></li>
                        <li style="margin-left:1.4em"><p><span class="glyphicon glyphicon-wrench" aria-hidden="true" style="margin-right:0.3em"></span>Settings</p></li>
                        <li style="margin-left:1.4em"><p><span class="glyphicon glyphicon-off" aria-hidden="true" style="margin-right:0.3em"></span></p></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

<div style="width:400px; margin:0 auto; ">
    <table style="padding:5px; width:100%; text-align: left; vertical-align:top;">
        <form id="formGetProject" action="{{url_for('results')}}" method="post">
        <tr>
            <td><h3>Welcome {{username}}</h3></td>
        </tr>
        <tr>
            <td><h3>Select your project</h3></td>
        </tr>
        <tr>
            <td id="selectProject"></td>
            <td><button type="button" id="getProjectButton">View project</button></td>
        </tr>
            </form>
         <tr>
            <td><h4><BR>or..</h4></td>
        </tr>
        <tr>
            <td><h3>Add new project</h3></td>
        </tr>
        <tr>
            <td><input type="text" id="input"/></td>
            <td><button type="button" id="addProjectButton">Analyze new project</button></td>
        </tr>

    </table>

</div>

</body>
</html>